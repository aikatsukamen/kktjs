<!DOCTYPE html>
<html lang="ja" prefix="og: http://ogp.me/ns#">
<head>
<link rel="canonical" href="./index.html">
<meta charset="utf-8">
<title>kktjs</title>
<link rel="stylesheet" href="./css/emojipicker.css">
<link rel="stylesheet" href="./css/Pv=0926_style.css">
<link rel="stylesheet" href="./css/font-awesome.min.css">
<link rel="stylesheet" href="./css/addtohomescreen.css">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta name="Description" content="キラキラッターをもっと素敵にするWebクライアント">
<meta content="#000" name="theme-color">

<meta property="og:title" content="kktjs" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://sumire.work/kktjs/" />
<meta property="og:image" content="https://sumire.work/kktjs/img/touch/apple-touch-icon.png" />
<meta property="og:site_name" content="sumire.work/kktjs" />
<meta property="og:description" content="キラキラッターをもっと素敵にするWebクライアント" />

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<meta name="format-detection" content="telephone=no">

<link rel="icon" href="./img/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="shortcut icon" href="./img/favicon.ico" type="image/vnd.microsoft.icon">
<link rel="apple-touch-icon" sizes="152x152" href="./img/touch/apple-touch-icon.png">

<link rel="manifest" href="./js/manifest.json">
</head>
<body>

<script type="text/x-template" id="modal-media">
      <transition name="media">
        <div class="modal-mask">

          <slot name="header"></slot>

        </div>
      </transition>
    </script>
<script type="text/x-template" id="modal-input">
      <transition name="input">
        <div class="modal-mask">

          <div class="flex">
            <div class="column bgcolor-wh">
              <slot name="header"></slot>
            </div>
          </div>

        </div>
      </transition>
    </script>
<script type="text/x-template" id="modal-confirm">
      <transition name="confirm">
        <div class="modal-mask">

          <div class="flex center">
            <div class="column bgcolor-wh">
              <slot name="header"></slot>
            </div>
          </div>

        </div>
      </transition>
    </script>
<script type="text/x-template" id="modal-info">
      <transition name="info">

        <div class="flex toast-list">
          <div class="column info">
            <slot name="header"></slot>
          </div>
        </div>

      </transition>
    </script>
<div id="app" class="color" :class="[optThemeTops, optThemeBottoms, optMediaHeight, optMediaFit, optKatsuTrim]" onDragover="importdragover(event)" onDrop="importdrop(event)" onPaste="importpaste(event)" onDragenter="importdragenter(event)" onFocus="changeAppActive(true);" onBlur="changeAppActive(false);">
<svg width="0" height="0" class="invisible" xmlns="http://www.w3.org/2000/svg">
<g id="cb" :class="[optThemeTops, optThemeBottoms, optMediaHeight, optKatsuTrim]">
<line class="cbl" y2="12.412" x2="10.03575" y1="0.833" x1="10.03575" stroke-miterlimit="10" stroke-width="2" />
<path class="cbp" d="m9.76,1c0,0 -4.8235,0.92675 -8,5.833c5.42675,1 8,5.334 8,5.334" stroke-miterlimit="10" stroke-linecap="round" stroke-width="2" />
</g>
</svg>
<div v-if="startApp" class="modal-front bgcolor-disable front">
</div>
<div v-if="'web' == app_mode" class="app-header flex">
<svg xmlns="http://www.w3.org/2000/svg" height="100%" width="100%">
<defs>
<pattern id="pttops" patternUnits="userSpaceOnUse" height="24" width="18">
<rect class="pkl" height="24" width="18" y="0" x="0" />
<path class="pkd" d="m0 12 9-12 9 12-9 12z" />
</pattern>
</defs>
<rect width="100%" height="100%" style="fill: url(./index.html#pttops)" />
</svg>
</div>
<div v-if="'web' == app_mode" class="app-header control flex">
<div class="logo-wrapper color-wh">
<div v-if="ua != 'pc'" class="svgkkt logo" v-on:click="toggleLink();"><small v-if="!optSimple">{{app_ver_top}}</small></div>
<div v-else class="svgkkt logo" v-on:click="toggleSideLink();"><small v-if="!optSimple">{{app_ver_top}}</small></div>
</div>
<div class="icon-wrapper flex">
<i class="fa fa-fw fa-home" v-on:click="runHome();"></i>
<i class="fa fa-fw fa-users" v-on:click="runLocal(local_type);reopenWsLocal(local_type);"></i>

<i class="fa fa-fw fa-bell" v-on:click="runNotif('all');"></i>
<i v-if="showAcct && acct_type == 'fav'" class="fa fa-fw fa-cog" v-on:click="runUser('fav');"></i>
<i v-else class="fa fa-fw fa-star" v-on:click="runUser('fav');"></i>
<i class="fa fa-fw fa-list" v-on:click="runMulti('top');"></i>
<i class="fa fa-fw fa-search" v-on:click="toggleSearch();"></i>
<i class="fa fa-fw fa-pencil-square-o" v-on:click="toggleForm();"></i>
</div>
<div class="margin"></div>
</div>
<div v-if="null == at" class="flex center">
<div class="modal-mask">
<div class="modal-wrapper">
<div class="flex login-container bgsvg-pk">
<div class="column text center color-wh login">
<div>
<h2>{{app_name}} v{{app_ver}}</h2>
Custom Themes for <a href="https://kirakiratter.com/">kirakiratter.com</a>
</div>
<div class="flex login-option">
<span v-on:click="autologin = true;" class="tl-link full color-wh" :class="[autologin ? 'bgcolor-gr' : 'bgcolor']">通常認証</span>
<span v-on:click="autologin = false;" class="tl-link full color-wh" :class="[!autologin ? 'bgcolor-gr' : 'bgcolor']">コード認証</span>
</div>
<div v-if="autologin">
<h3>- アプリ認証 -</h3>
kirakiratter.comにログインして、<br>
アプリからのアクセスを許可してね。<br>
<button v-on:click="openAuth();" class="color-wh bgcolor-gr">App Authorize</button>
</div>
<div v-else>
<h3>- コードでアプリ認証 -</h3>
kirakiratter.comにログインして、<br>
アプリの認証コードを取得してね。<br>
<button v-on:click="openAuth();" class="color-wh bgcolor-gr">App Authorize</button><br>
コードを張り付けてボタンを押してね。<br>　
<span class="flex">
<input type="text" v-model="code" class="border-lite" @keyup.enter="fetchToken();"><br>
<span v-on:click="fetchToken();" class="button bgcolor-gr color-wh border-lite">Start</span>
</span>
</div>
<small>{{result_text_tmp}}</small>
</div>
</div>
</div>
</div>
<div class="modal-bg"></div>
</div>
<media v-if="showMedia">
<div class="modalbutton flex center" v-on:click="showMedia = false; modal_media = '';" slot="header">
<img v-if="null != modal_media.remote_url && ('image' == modal_media.type || 'unknown' == modal_media.type)" :src="https://sumire.work/kktjs/modal_media.remote_url" alt="" class="fullimage">
<img v-else-if="'image' == modal_media.type" :src="https://sumire.work/kktjs/modal_media.url" alt="" class="fullimage">
<video v-else-if="null != modal_media.remote_url" :src="https://sumire.work/kktjs/modal_media.remote_url" class="fullimage" v-play="true" autoplay loop></video>
<video v-else :src="https://sumire.work/kktjs/modal_media.url" class="fullimage" v-play="true" autoplay loop></video>
</div>
</media>
<emojipicker v-show="showEmojiPicker">
<span slot="header">
<div id="container" class="form-option full">
<div class="wrapper full">
<h3>Emoji Picker</h3>
<textarea type="text" id="katsu" placeholder="What is on your mind?" class="content-input border-lite" onkeyup="autogrow(this)"></textarea>
<div class="flex center">
<span class="full">
<i class="fa fa-fw fa-smile-o full border-lite"></i>
</span>
</div>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showEmojiPicker = false;">Cancel</span>
<span class="button full color-wh bgcolor-pk" v-on:click="showEmojiPicker = false; closeEmoji();">OK</span>
</div>
</div>
</div>
</span>
</emojipicker>
<confirm v-if="showConfirm">
<div slot="header">
<div class="status flex" v-if="['delete','report','fav','unfav','reblog','unreblog','pin','unpin','vote','bookmark'].indexOf(modal_issue.confirmtype) != -1">
<img :src="https://sumire.work/kktjs/checkAvatar(modal_issue.account.avatar_static)" class="avatar border" v-on:click="runAcct(modal_issue.account.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(modal_issue.account.display_name)" class="color-pk" v-html="formatEmoji(modal_issue.account.display_name, modal_issue.account.emojis)"></a>
<a v-else class="color-pk">{{modal_issue.account.username}}</a>
<small>‭@{{modal_issue.account.acct}}</small>
</div>
<small v-if="'public' != modal_issue.visibility">[{{modal_issue.visibility}}]</small>
<small v-if="!optSimple && modal_issue.sensitive" class="status-info"><i class="fa fa-fw fa-exclamation-triangle"></i></small>
</div>
<div class="status-text">
<span v-html="formatSpoiler(modal_issue.spoiler_text, modal_issue.emojis)"></span>
<div v-if="modal_issue.spoiler_text">
<div v-if="!modal_issue.content_opened" class="spoller-link color-wh bgcolor-pk" v-on:click="updateContentWrapper(modal_issue, true);"><small>- SHOW MORE -</small></div>
<div v-else class="spoller-link color-wh bgcolor" v-on:click="updateContentWrapper(modal_issue, false);"><small>- SHOW LESS -</small></div>
<span v-if="modal_issue.content_opened" v-html="formatContent(modal_issue.content, modal_issue.emojis)"></span>
</div>
<div v-else>
<span v-html="formatContent(modal_issue.content, modal_issue.emojis)"></span>
</div>
</div>
<div v-if="null != modal_issue.poll && 0 != modal_issue.poll.options" class="card">
<div v-for="(option, index) in modal_issue.poll.options" class="option-name flex start">
<div class="hidden full"><span v-html="index+1+'. '+formatEmojiDraft(option.title, modal_issue.poll.emojis)"></span></div>
<small v-if="modal_issue.poll.voted || modal_issue.poll.expired">{{option.votes_count}}票</small>
</div>
<div v-if="modal_issue.poll.voted || modal_issue.poll.expired || user.id == modal_issue.account.id" class="flex center">
 <div v-if="user.id != modal_issue.account.id" class="color-wh bgcolor-disable button full flex wrap">
<small v-if="modal_issue.poll.expired">Finished</small>
<small v-else>Voted</small>
</div>
</div>
<div v-else class="flex center">
<div v-for="(option, index) in modal_issue.poll.options" class="full">
<small v-if="isSetVote(modal_issue.poll, index)" class="color-wh bgcolor-pk button flex wrap">{{index+1}}</small>
<small v-else class="color-wh bgcolor-disable button flex wrap">{{index+1}}</small>
</div>
</div>
<div>
<small v-if="modal_issue.poll.expired">最終結果 計{{modal_issue.poll.votes_count}}票</small>
<small v-else>投票中 現在{{modal_issue.poll.votes_count}}票 ({{formatDate(modal_issue.poll.expires_at)}}まで)</small>
</div>
</div>
<div v-if="0 != modal_issue.media_attachments" class="media-wrapper bgcolor-gray hidden flex">
<a v-for="media in modal_issue.media_attachments">
<video v-if="'gifv' == media.type && '2' == optAutoPlay" :src="https://sumire.work/kktjs/media.url" class="media" playsinline muted autoplay loop></video>
<img v-if="('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" :src="https://sumire.work/kktjs/checkMedia(media.preview_url,%20media.remote_url)" :alt="media.description" :title="media.description" class="media" onerror="this.src=IMG_DUMMY">
<i v-if="'video' == media.type || ('gifv' == media.type && '1' == optAutoPlay)" class="fa fa-fw fa-play-circle-o color-pk"></i>
</a>
</div>
<div v-if="0 != modal_issue.media_attachments" class="media-wrapper control">
<i v-on:click="updateMediaWrapper(modal_issue, false);" class="fa fa-fw fa-eye-slash bgcolor-wh"></i>
</div>
<div v-if="((( optAllNsfw || modal_issue.sensitive ) && !modal_issue.media_opened ) || false === modal_issue.media_opened ) && 0 != modal_issue.media_attachments" class="media-wrapper bluesheet" v-on:click="updateMediaWrapper(modal_issue, true);">
<h4 v-if="modal_issue.sensitive">Sensitive contents</h4>
<h4 v-else>Media contents</h4>
<small>Click to view</small>
</div>
<a v-if="null != modal_issue.card" class="flex center card" :href="https://sumire.work/kktjs/modal_issue.card.url" target="_blank" rel="noopener noreferrer">
<img v-if="null != modal_issue.card.image" :src="https://sumire.work/kktjs/modal_issue.card.image" onerror="this.src=IMG_DUMMY">
<div class="detail-content hidden">
<span>{{modal_issue.card.title}}</span><br>
<small>{{formatDomain(modal_issue.card)}}</small>
</div>
</a>
<div class="action-bar flex end wrap">
<div class="hidden">
<i class="fa fa-fw fa-paperclip color-disable"></i>
<small class="time">{{formatDate(modal_issue.created_at)}}</small>
<small v-if="!optSimple">(id:{{modal_issue.id}})</small>
</div>
</div>
</div>
</div>
<div v-else-if="'katsu' == modal_issue.confirmtype" class="status flex">
<img :src="https://sumire.work/kktjs/checkAvatar(user.avatar_static)" class="avatar border" v-on:click="runAcct(user.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(user.display_name)" class="color-pk" v-html="formatEmoji(user.display_name, user.emojis)"></a>
<a v-else class="color-pk">{{user.username}}</a>
<small>‭@{{user.acct}}</small>
</div>
<small v-if="'' != modal_issue.visibility && 'public' != modal_issue.visibility">[{{modal_issue.visibility}}]</small>
<small v-if="!optSimple && modal_issue.sensitive" class="status-info"><i class="fa fa-fw fa-exclamation-triangle"></i></small>
</div>
<div class="status-text">
<span v-html="formatSpoilerConfirm(modal_issue.spoiler_text, modal_issue.emojis)"></span>
<div v-if="modal_issue.spoiler_text && modal_issue.content">
<div v-if="!modal_issue.content_opened" class="spoller-link color-wh bgcolor-pk" v-on:click="updateContentWrapper(modal_issue, true);"><small>- SHOW MORE -</small></div>
<div v-else class="spoller-link color-wh bgcolor" v-on:click="updateContentWrapper(modal_issue, false);"><small>- SHOW LESS -</small></div>
<span v-if="modal_issue.content_opened" v-html="formatContentConfirm(modal_issue.content, modal_issue.emojis)"></span>
</div>
<div v-else>
<span v-html="formatContentConfirm(modal_issue.content, modal_issue.emojis)"></span>
</div>
</div>
<div v-if="null != modal_issue.poll && 0 != modal_issue.poll.options" class="card">
<div v-for="(option, index) in modal_issue.poll.options" class="option-name flex start">
<div class="hidden full"><span v-html="index+1+'. '+formatEmoji(option, modal_issue.emojis)"></span></div>
<small v-if="modal_issue.poll.voted || modal_issue.poll.expired">0票</small>
</div>
<div class="flex center">
<div v-for="(option, index) in modal_issue.poll.options" v-if="!modal_issue.poll.expired" class="full">
<small v-if="isSetVote(modal_issue.poll, index)" class="color-wh bgcolor-pk button flex wrap" v-on:click="setVote(modal_issue, index);">{{index+1}}</small>
<small v-else class="color-wh bgcolor button flex wrap" v-on:click="setVote(modal_issue, index);">{{index+1}}</small>
</div>
<div class="full">
<small class="color-wh bgcolor-disable button flex wrap">Vote</small>
</div>
</div>
<div>
<small>投票中 現在0票 ({{formatDate(modal_issue.poll_work.expires_at)}}まで)</small>
</div>
</div>
<div v-if="0 != modal_issue.media_attachments" class="media-wrapper bgcolor-gray hidden flex">
<a v-for="media in modal_issue.media_attachments">
<video v-if="'gifv' == media.type && '2' == optAutoPlay" :src="https://sumire.work/kktjs/media.url" class="media" playsinline muted autoplay loop></video>
<img v-if="('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" :src="https://sumire.work/kktjs/checkMedia(media.preview_url,%20media.remote_url)" :alt="media.description" :title="media.description" class="media" onerror="this.src=IMG_DUMMY">
<i v-if="'video' == media.type || ('gifv' == media.type && '1' == optAutoPlay)" class="fa fa-fw fa-play-circle-o color-pk"></i>
</a>
</div>
<div v-if="0 != modal_issue.media_attachments" class="media-wrapper control">
<i v-on:click="updateMediaWrapper(modal_issue, false);" class="fa fa-fw fa-eye-slash bgcolor-wh"></i>
</div>
<div v-if="(( modal_issue.sensitive && !modal_issue.media_opened ) || false === modal_issue.media_opened ) && 0 != modal_issue.media_attachments" class="media-wrapper bluesheet" v-on:click="updateMediaWrapper(modal_issue, true);">
<h4 v-if="modal_issue.sensitive">Sensitive contents</h4>
<h4 v-else>Media contents</h4>
<small>Click to view</small>
</div>
<a v-if="null != modal_issue.card" class="flex center card" :href="https://sumire.work/kktjs/modal_issue.card.url" target="_blank" rel="noopener noreferrer">
<img v-if="null != modal_issue.card.image" :src="https://sumire.work/kktjs/modal_issue.card.image" onerror="this.src=IMG_DUMMY">
<div class="detail-content hidden">
<span>{{modal_issue.card.title}}</span><br>
<small>{{formatDomain(modal_issue.card)}}</small>
</div>
</a>
<div class="action-bar flex end">
<div class="hidden nodot">
<i class="fa fa-fw fa-paperclip color-disable"></i>

</div>
<i class="fa fa-fw fa-reply color-disable"></i>
<i class="fa fa-fw fa-retweet color-disable"></i>
<i class="fa fa-fw fa-star color-disable"></i>
<i class="fa fa-fw fa-comment-o color-disable"></i>
<i class="fa fa-fw fa-user-circle-o color-disable"></i>
</div>
</div>
</div>
<div v-else class="status flex">
<img :src="https://sumire.work/kktjs/checkAvatar(modal_issue.avatar)" class="avatar border" onerror="this.src=IMG_DUMMY">
<div class="content">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(modal_issue.display_name)" class="color-pk" v-html="formatEmoji(modal_issue.display_name, modal_issue.emojis)"></a>
<a v-else class="color-pk">{{modal_issue.username}}</a>
<small>‭@{{modal_issue.acct}}</small>
</div>
<span v-if="modal_issue.locked"><i class="fa fa-fw fa-lock"></i></span>
<small v-if="modal_issue.bot" class="status-info">[Bot]</small>
</div>
<span>{{modal_issue.statuses_count}} </span>Katsu
<div>
<span>{{modal_issue.following_count}} </span>Follow /
<span>{{modal_issue.followers_count}} </span>Follower
</div>
</div>
</div>
<div class="text center confirm-wrapper">
<div v-if="'katsu' == modal_issue.confirmtype">
<h3>カツ!しますか？</h3>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showConfirm = false; modal_issue = '';">Cancel</span>
<span v-if="checkKatsu()" v-on:click="showConfirm = false; actKatsu(katsu, true);" class="color-wh bgcolor-gr button full">KATSU!</span>
<span v-else class="color-wh bgcolor-disable button full">KATSU!</span>
</div>
</div>
<div v-else-if="'delete' == modal_issue.confirmtype">
<h3>カツ!を削除しますか？</h3>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showConfirm = false; modal_issue = '';">Cancel</span>
<span class="button full color-wh bgcolor-pk" v-on:click="showConfirm = false; actDelete(modal_issue, true);">OK</span>
</div>
</div>
<div v-else-if="'report' == modal_issue.confirmtype">
<h3>カツ!を通報しますか？</h3>
<small>(どういった点で不適切な内容ですか？)</small><br>
<input v-focus type="text" id="report_text" class="report underline-dash"><br>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showConfirm = false; modal_issue = '';">Cancel</span>
<span class="button full color-wh bgcolor-pk" v-on:click="actReport(modal_issue, true);">OK</span>
</div>
</div>
<div v-else-if="'fav' == modal_issue.confirmtype">
<h3>お気に入り登録しますか？</h3>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showConfirm = false; modal_issue = '';">Cancel</span>
<span class="button full color-wh bgcolor-gr" v-on:click="showConfirm = false; actFav(modal_issue, true);">OK</span>
</div>
</div>
<div v-else-if="'unfav' == modal_issue.confirmtype">
<h3>お気に入り登録を解除しますか？</h3>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showConfirm = false; modal_issue = '';">Cancel</span>
<span class="button full color-wh bgcolor-pk" v-on:click="showConfirm = false; actUnFav(modal_issue, true);">OK</span>
</div>
</div>
<div v-else-if="'reblog' == modal_issue.confirmtype">
<h3>ブーストしますか？</h3>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showConfirm = false; modal_issue = '';">Cancel</span>
<span class="button full color-wh bgcolor-gr" v-on:click="showConfirm = false; actReblog(modal_issue, true);">OK</span>
</div>
</div>
<div v-else-if="'unreblog' == modal_issue.confirmtype">
<h3>ブーストを解除しますか？</h3>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showConfirm = false; modal_issue = '';">Cancel</span>
<span class="button full color-wh bgcolor-pk" v-on:click="showConfirm = false; actUnReblog(modal_issue, true);">OK</span>
</div>
</div>
<div v-else-if="'follow' == modal_issue.confirmtype">
<h3>フォローしますか？</h3>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showConfirm = false; modal_issue = '';">Cancel</span>
<span class="button full color-wh bgcolor-gr" v-on:click="showConfirm = false; actFollow(modal_issue, true);">OK</span>
</div>
</div>
<div v-else-if="'unfollow' == modal_issue.confirmtype">
<h3>フォローを解除しますか？</h3>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showConfirm = false; modal_issue = '';">Cancel</span>
<span class="button full color-wh bgcolor-pk" v-on:click="showConfirm = false; actUnFollow(modal_issue, true);">OK</span>
</div>
</div>
<div v-else-if="'mute' == modal_issue.confirmtype">
<h3>ミュートしますか？</h3>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showConfirm = false; modal_issue = '';">Cancel</span>
<span class="button full color-wh bgcolor-gr" v-on:click="showConfirm = false; actMute(modal_issue, true);">OK</span>
</div>
</div>
<div v-else-if="'unmute' == modal_issue.confirmtype">
<h3>ミュートを解除しますか？</h3>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showConfirm = false; modal_issue = '';">Cancel</span>
<span class="button full color-wh bgcolor-pk" v-on:click="showConfirm = false; actUnMute(modal_issue, true);">OK</span>
</div>
</div>
<div v-else-if="'block' == modal_issue.confirmtype">
<h3>ブロックしますか？</h3>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showConfirm = false; modal_issue = '';">Cancel</span>
<span class="button full color-wh bgcolor-gr" v-on:click="showConfirm = false; actBlock(modal_issue, true);">OK</span>
</div>
</div>
<div v-else-if="'unblock' == modal_issue.confirmtype">
<h3>ブロックを解除しますか？</h3>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showConfirm = false; modal_issue = '';">Cancel</span>
<span class="button full color-wh bgcolor-pk" v-on:click="showConfirm = false; actUnBlock(modal_issue, true);">OK</span>
</div>
</div>
<div v-else-if="'pin' == modal_issue.confirmtype">
<h3>カツ!を固定しますか？</h3>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showConfirm = false; modal_issue = '';">Cancel</span>
<span class="button full color-wh bgcolor-gr" v-on:click="showConfirm = false; actPin(modal_issue, true);">OK</span>
</div>
</div>
<div v-else-if="'unpin' == modal_issue.confirmtype">
<h3>カツ!の固定を解除しますか？</h3>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showConfirm = false; modal_issue = '';">Cancel</span>
<span class="button full color-wh bgcolor-pk" v-on:click="showConfirm = false; actUnPin(modal_issue, true);">OK</span>
</div>
</div>
<div v-else-if="'list' == modal_issue.confirmtype">
<h3>アカウントをリストに追加しますか？</h3>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showConfirm = false; modal_issue = '';">Cancel</span>
<span class="button full color-wh bgcolor-gr" v-on:click="showConfirm = false; actList(modal_issue, true);">OK</span>
</div>
</div>
<div v-else-if="'unlist' == modal_issue.confirmtype">
<h3>アカウントをリストから外しますか？</h3>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showConfirm = false; modal_issue = '';">Cancel</span>
<span class="button full color-wh bgcolor-pk" v-on:click="showConfirm = false; actUnList(modal_issue, true);">OK</span>
</div>
</div>
<div v-else-if="'vote' == modal_issue.confirmtype">
<h3>投票しますか？</h3>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showConfirm = false; modal_issue = '';">Cancel</span>
<span class="button full color-wh bgcolor-gr" v-on:click="showConfirm = false; actVote(modal_issue, true);">OK</span>
</div>
</div>
<div v-else-if="'bookmark' == modal_issue.confirmtype">
<h3>しおりをはさみますか？</h3>
<div class="flex center">
<span class="button full color-wh bgcolor" v-on:click="showConfirm = false; modal_issue = '';">Cancel</span>
<span class="button full color-wh bgcolor-gr" v-on:click="showConfirm = false; runBookmark(modal_issue, true);">OK</span>
</div>
</div>
</div>
</div>
</confirm>
<info v-if="hasInfo">
<span slot="header">
<div v-if="app_wait_update" class="flex info-wrapper color-wh bgcolor">
<div v-on:click="location.reload();" class="flex full">
<span class="hidden full"><i class="fa fa-fw fa-refresh"></i> {{result_text}}</span>
</div>
<div v-on:click="runToast(false);playSound('sound'+optThemeSound);" class="flex color-wh bgcolor">
<i class="fa fa-fw fa-times"></i>
</div>
</div>
<div v-else class="flex info-wrapper color-wh bgcolor">
<div v-on:click="runToast(true);playSound('sound'+optThemeSound);" class="flex full">
<span class="hidden full" v-html="formatEmoji(result_text)"></span>
</div>
<div v-on:click="runToast(false);playSound('sound'+optThemeSound);" class="flex color-wh bgcolor">
<i class="fa fa-fw fa-times"></i>
</div>
</div>
</span>
</info>
<div id="base" :class="{ 'extra': 'native' == app_mode }" class="flex column-list">

<div v-if="showDebug" class="column debug bgcolor-gray">
<div class="column-header"><i class="fa fa-fw fa-cog"></i>App Status/{{app_mode}}-{{ua}} (sw: {{this.sw_stat.enabled}}, {{this.sw_stat.controller}})</div>
<div class="scrollable">
<h3>Columns</h3>

<div>
Home({{home_type}})<input type="checkbox" id="showHome" v-model="showHome">
Local({{local_type}})<input type="checkbox" id="showLocal" v-model="showLocal">
Multl({{multi_type}})<input type="checkbox" id="showMulti" v-model="showMulti">
</div>
<div>
Notif({{notif_type}})<input type="checkbox" id="showNotif" v-model="showNotif">
Detail<input type="checkbox" id="showDetail" v-model="showDetail">
Acct({{acct_type}})<input type="checkbox" id="showAcct" v-model="showAcct">
Debug<input type="checkbox" id="showDubug" v-model="showDebug">
</div>
<div>
Setting<input type="checkbox" id="showSetting" v-model="showSetting">
Search<input type="checkbox" id="showSearch" v-model="showSearch">
Stream<input type="checkbox" id="showStream" v-model="showStream">
Form<input type="checkbox" id="showForm" v-model="showForm">
</div>
<div>
Links<input type="checkbox" id="showLink" v-model="showLink">
S-Links<input type="checkbox" id="showSideLink" v-model="showSideLink">
</div>
<button v-on:click="playSound('sound');">default boop</button>
<button v-on:click="playSound('soundex');">excelent boop</button>
<button v-on:click="result_text = 0 != notifs_filter[0].account.display_name.length ? notifs_filter[0].account.display_name : notifs_filter[0].account.acct; result_text = result_text + ' ' + notifs_filter[0].type + ' '; result_text = notifs_filter[0].type == 'follow' ? result_text + 'you' : result_text + 'your katsu'; result_type = 'notif';">Toast</button><br>

<button v-on:click="reopenWsHome('Force');">Reopen Home Stream</button><br>
<button v-on:click="reopenWsLocal('Force');">Reopen Local Stream</button><br>
<button v-on:click="reopenWsMulti('Force');">Reopen Multi Stream</button><br>

<input type="text" v-model="detail_targetid">
<button v-on:click="runDetail(detail_targetid);">Load Detail</button>
detail_targetid<br>
<input type="text" v-model="acct_targetid">
<button v-on:click="runAcct(acct_targetid);">Load Account</button>
acct_targetid<br>
<input type="text" v-model="search_userid">
<button v-on:click="runUserId();">Load Account</button>
runUserId()<br>
<input type="text" onKeyup="inputSearch(this);">
<button v-on:click="runMulti('Hashtag', search_text);reopenWsMulti('Hashtag', search_text);">Load HashTL</button>
search_text<br>
<input type="text" v-model="stream_list.id">
<button v-on:click="runMulti('List', stream_list.id);reopenWsMulti('List', stream_list);">Load List</button>
stream_list.id<br>
<input type="text" v-model="home_id">
katsu_id(home_min)<br>
<input type="text" v-model="local_id">
katsu_id(local_min)<br>
<input type="text" v-model="notif_id">
katsu_id(notif_min)<br>
<input type="text" v-model="multi_id">
katsu_id(multi_min)<br>
<input type="text" v-model="acct_id">
katsu_id(acct_min)<br>
<input type="text" v-model="local_id_bookmark">
katsu_id(bookmark)<br>
<input type="text" v-model="notif_id_bookmark">
katsu_id(bm_Notif)<br>

home_unread: {{home_unread}}/ {{homes.length}},
local_unread: {{local_unread}}/ {{locals.length}}<br>


notif_unread: {{notif_unread}}/ {{notifs_filter.length}}({{notifs.length}}),
multi_unread: {{multi_unread}}/ {{multis.length}}<br>


notif_unread_filter: {{notif_unread_filter.complete}} {{notif_unread_filter.mention+notif_unread_filter.fav+notif_unread_filter.reblog+notif_unread_filter.follow+notif_unread_filter.others}}({{notif_unread_filter.mention}}+{{notif_unread_filter.fav}}+{{notif_unread_filter.reblog}}+{{notif_unread_filter.follow}}+{{notif_unread_filter.others}}),
</div>
</div>

<div v-if="showSideLink" class="column mini bgcolor-gray">
<div class="column-header"><i class="fa fa-fw fa-comment"></i>TimeLine</div>
<div class="scrollable">
<div class="flex wrap">
<span v-on:click="runHome();" class="list-link border-lite full bgcolor-wh flex end">
<div class="hidden full"><i class="fa fa-fw fa-home"></i>Home</div>
</span>
<span v-if="fetch_lock.localws || fetch_lock.local" class="list-link border-lite full color bgcolor-disable flex end">
<div class="hidden full"><i class="fa fa-fw fa-users"></i>Local</div>
</span>
<span v-else v-on:click="runLocal('Local');reopenWsLocal('Local');" class="list-link border-lite full bgcolor-wh flex end">
<div class="hidden full"><i class="fa fa-fw fa-users"></i>Local</div>
</span>
<span v-if="fetch_lock.localws || fetch_lock.local" class="list-link border-lite full color bgcolor-disable flex end">
<div class="hidden full"><i class="fa fa-fw fa-globe"></i>Global</div>
</span>
<span v-else v-on:click="runLocal('Global');reopenWsLocal('Global');" class="list-link border-lite full bgcolor-wh flex end">
<div class="hidden full"><i class="fa fa-fw fa-globe"></i>Global</div>
</span>
<span v-on:click="toggleLinkStream('lists');" class="list-link border-lite full bgcolor-wh flex end">
<div class="hidden full"><i class="fa fa-fw fa-list"></i>Lists</div>
</span>
<div v-if="showLinkStream == 'lists'" class="full">
<span v-if="fetch_lock.multiws || fetch_lock.multi || fetch_lock.lists" class="list-link slim color-wh bgcolor-disable flex end">
<div class="hidden full"><small>Loading...</small></div>
</span>
<span v-else v-for="issue in stream_lists" v-on:click="runMulti('List', issue.id);reopenWsMulti('List', issue);showMultiOption = false;" class="list-link slim border-lite bgcolor-wh flex end">
<div class="hidden full"><small>{{issue.title}}</small></div>
</span>
<span v-on:click="toggleStream();" class="list-link slim border-lite bgcolor-wh flex end">
<div class="hidden full"><small><i class="fa fa-fw fa-pencil"></i>Open Streams</small></div>
</span>
</div>
<span v-on:click="toggleLinkStream('tags');" class="list-link border-lite full bgcolor-wh flex end">
<div class="hidden full"><i class="fa fa-fw fa-hashtag"></i>Hashtags</div>
</span>
<div v-if="showLinkStream == 'tags'" class="full">
<span v-if="fetch_lock.multiws || fetch_lock.multi" class="list-link slim color-wh bgcolor-disable flex end">
<div class="hidden full"><small>Loading...</small></div>
</span>
<span v-else v-for="issue in stream_hashtags" v-on:click="runMulti('Hashtag', issue);reopenWsMulti('Hashtag', issue);showMultiOption = false;" class="list-link slim border-lite bgcolor-wh flex end">
<div class="hidden full"><small>#{{issue}}</small></div>
</span>
<span v-on:click="toggleStream();" class="list-link slim border-lite  bgcolor-wh flex end">
<div class="hidden full"><small><i class="fa fa-fw fa-pencil"></i>Open Streams</small></div>
</span>
</div>
<span v-if="'web' == app_mode" v-on:click="toggleLinkStream('channels_d');" class="list-link border-lite full color bgcolor-disable flex end">
<div class="hidden full"><i class="fa fa-fw fa-gamepad"></i>Discord Channels</div>
<small>未</small>
</span>
<span v-if="showLinkStream == 'channels'" v-for="issue in stream_channels" v-on:click="return;runMulti('Discord', issue);reopenWsMulti('Discord', issue);showMultiOption = false;" class="list-link slim border-lite full bgcolor-wh flex end">
<div class="hidden full"><small>{{issue}}</small></div>
</span>

</div>





<div class="link-header"><i class="fa fa-fw fa-search"></i>Search</div>
<div class="flex wrap">

<span class="search-container full flex end">
<input type="text" v-restore-search class="underline-dash" @keyup.enter="searchAll();toggleLinkSearch();" onKeyup="inputSearch(this)"><br>
<span v-on:click="searchAll();toggleLinkSearch();" class="bgcolor-wh border-lite"><i class="fa fa-fw fa-search"></i></span>
</span>
</div>
<div v-if="null != user.id" class="status flex">
<img :src="https://sumire.work/kktjs/checkAvatar(user.avatar_static)" class="avatar border short" v-on:click="runUser('katsu');" onerror="this.src=IMG_DUMMY">
<div class="content border short">
<div class="flex start hidden">
<a v-if="checkDisplayName(user.display_name)" class="color-pk" v-html="formatEmoji(user.display_name, user.emojis)"></a>
<a v-else class="color-pk">{{user.username}}</a>
</div>
<div class="status-name flex start color-gr">
<div class="hidden full">
<small>‭@{{user.acct}}</small>
</div>
<span v-if="user.locked"><i class="fa fa-fw fa-lock"></i></span>
<small v-if="user.bot" class="status-info">[Bot]</small>
</div>
<div class="status-text">
</div>
</div>
</div>
<div class="flex wrap">
<span v-on:click="runNotif('all');" class="list-link border-lite full bgcolor-wh flex end">
<div class="hidden full"><i class="fa fa-fw fa-bell"></i>Notification</div>
<small v-if="!notif_unread_filter.complete">30+</small>
<small v-else-if="0 != notif_unread_filter.mention + notif_unread_filter.fav + notif_unread_filter.reblog + notif_unread_filter.follow + notif_unread_filter.others">{{notif_unread_filter.mention + notif_unread_filter.fav + notif_unread_filter.reblog + notif_unread_filter.follow + notif_unread_filter.others}}</small>
</span>
<span v-on:click="runNotif('mention');showNotifOption = true;" class="list-link border-lite full bgcolor-wh flex end">
<div class="hidden full"><i class="fa fa-fw fa-at"></i>Mention</div>
<small v-if="!notif_unread_filter.complete">?</small>
<small v-else-if="0 != notif_unread_filter.mention">{{notif_unread_filter.mention}}</small>
</span>
<span v-on:click="toggleSetting();" class="list-link border-lite full bgcolor-wh flex end">
<div class="hidden full"><i class="fa fa-fw fa-cog"></i>Setting</div>
</span>
<span v-on:click="toggleForm();" class="list-link border-lite full bgcolor-wh flex end">
<div class="hidden full"><i class="fa fa-fw fa-pencil"></i>Katsu</div>
</span>
</div>
</div>
<div class="flex column-footer">
<i class="fa fa-fw fa-bars" v-on:click="toggleSideLink();"></i>
</div>
</div>

<div v-if="ua == 'pc' && !showSideLink" class="column nano">
<div class="flex column-footer inside">
<i class="fa fa-fw fa-bars" v-on:click="toggleSideLink();"></i>
</div>
</div>

<div v-show="showHome" :class="[{ primary: optColumnWide }, { full: optColumnWide && '1' == optColumns }]" class="column bgcolor-gray">
<div class="column-header">
<div class="flex">
<div class="hidden full">
<i class="fa fa-fw fa-home"></i>Home <small v-if="!optSimple">(Stream: {{connHome}})</small>
</div>
<span class="column-option">
<i v-if="fetch_lock.homews || fetch_lock.home || fetch_lock.localws || fetch_lock.local || fetch_lock.multiws || fetch_lock.multi" class="fa fa-fw fa-spin fa-refresh color-disable"></i>
<i v-else v-on:click="toggleHomeOption();" class="fa fa-fw fa-ellipsis-h"></i>
</span>
</div>
<div v-if="showHomeOption" class="flex">
<div v-if="fetch_lock.homews || fetch_lock.home" class="tl-link full color-wh bgcolor-disable"><i class="fa fa-fw fa-users"></i>Home</div>
<div v-else v-on:click="reopenWsHome('Home');showHomeOption = false;" class="tl-link full color-wh" :class="[showHome ? 'bgcolor-pk' : 'bgcolor']"><i class="fa fa-fw fa-home"></i>Home</div>
<div v-if="1 == optColumns && (fetch_lock.homews || fetch_lock.home)" class="tl-link full color-wh bgcolor-disable"><i class="fa fa-fw fa-users"></i>Local</div>
<div v-else-if="1 == optColumns" v-on:click="runLocal('Local');reopenWsLocal('Local');showHomeOption = false;" class="tl-link full color-wh" :class="[showLocal && 'Local' == local_type ? 'bgcolor-pk' : 'bgcolor']"><i class="fa fa-fw fa-users"></i>Local</div>
<div v-if="1 == optColumns && (fetch_lock.homews || fetch_lock.home)" class="tl-link full color-wh bgcolor-disable"><i class="fa fa-fw fa-globe"></i>Global</div>
<div v-else-if="1 == optColumns" v-on:click="runLocal('Global');reopenWsLocal('Global');showHomeOption = false;" class="tl-link full color-wh" :class="[showLocal && 'Global' == local_type ? 'bgcolor-pk' : 'bgcolor']"><i class="fa fa-fw fa-globe"></i>Global</div>
<div v-if="fetch_lock.homews || fetch_lock.home || fetch_lock.localws || fetch_lock.local || fetch_lock.multiws || fetch_lock.multi" class="tl-link color-wh bgcolor-disable"><i class="fa fa-fw fa-spin fa-refresh"></i></div>
<div v-else v-on:click="reopenForce();" class="tl-link color-wh bgcolor"><i class="fa fa-fw fa-refresh"></i></div>
</div>
</div>
<div class="scrollable" id="home" v-if="showHome" v-on:scroll="handleScrollHome">
<div v-if="hasHome" class="status-list">
<div v-for="(issue, index) in homes" v-if="home_unread <= index" class="status-wrapper" :class="issue.visibility">
<a :id="'home'+issue.id"></a>
<div v-if="null != issue.reblog" class="status-header flex start">
<i class="fa fa-fw fa-retweet color-on"></i>
<img :src="https://sumire.work/kktjs/checkAvatar(issue.account.avatar_static)" class="avatar border notif" v-on:click="runAcct(issue.account.id);" onerror="this.src=IMG_DUMMY">
<div class="hidden full">
<div>
<span v-if="checkDisplayName(issue.account.display_name)" class="color-pk" v-html="formatEmoji(issue.account.display_name, issue.account.emojis)"></span>
<span v-else class="color-pk">{{issue.account.username}}</span>
<small class="color-gr">‭@{{issue.account.acct}}</small>
</div>
<div class="status-name flex start">
<div class="hidden">
<span> reblog</span>
</div>
<span class="status-info color-gr">({{formatDate(issue.created_at)}})</span>
</div>
</div>
</div>

<div v-if="null != issue.reblog" class="status flex">
<span v-if="issue.loading_avatar" class="avatar border" v-on:click="runAcct(issue.reblog.account.id);"></span>
<img v-else :src="https://sumire.work/kktjs/checkAvatar(issue.reblog.account.avatar_static)" class="avatar border" v-on:click="runAcct(issue.reblog.account.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(issue.reblog.account.display_name)" class="color-pk" v-html="formatEmoji(issue.reblog.account.display_name, issue.reblog.account.emojis)"></a>
<a v-else class="color-pk">{{issue.reblog.account.username}}</a>
<small>‭@{{issue.reblog.account.acct}}</small>
</div>
<small v-if="'public' != issue.reblog.visibility">[{{issue.reblog.visibility}}]</small>
<small v-if="!optSimple && issue.reblog.sensitive" class="status-info"><i class="fa fa-fw fa-exclamation-triangle"></i></small>
</div>
<div v-if="issue.caught_katsufilter">
<div class="spoller-link border-dash" v-on:click="updateWrapper(issue.reblog, false);"><small>- Caught by Katsu Filter -</small></div>
</div>
<div v-else>
<div class="status-text">
<span v-html="formatSpoiler(issue.reblog.spoiler_text, issue.reblog.emojis)"></span>
<div v-if="issue.reblog.spoiler_text">
<div v-if="!issue.reblog.content_opened" class="spoller-link color-wh bgcolor-pk" v-on:click="updateContentWrapper(issue.reblog, true);"><small>- SHOW MORE -</small></div>
<div v-else class="spoller-link color-wh bgcolor" v-on:click="updateContentWrapper(issue.reblog, false);"><small>- SHOW LESS -</small></div>
<span v-if="issue.reblog.content_opened" v-html="formatContent(issue.reblog.content, issue.reblog.emojis)"></span>
</div>
<div v-else>
<span v-html="formatContent(issue.reblog.content, issue.reblog.emojis)"></span>
</div>
</div>
<div v-if="null != issue.reblog.poll && 0 != issue.reblog.poll.options" class="card">
<div v-for="(option, index) in issue.reblog.poll.options" class="option-name flex start">
<div class="hidden full"><span v-html="index+1+'. '+formatEmojiDraft(option.title, issue.reblog.poll.emojis)"></span></div>
<small v-if="issue.reblog.poll.voted || issue.reblog.poll.expired">{{option.votes_count}}票</small>
</div>
<div v-if="issue.reblog.poll.voted || issue.reblog.poll.expired || user.id == issue.reblog.account.id" class="flex center">
<div v-if="user.id != issue.reblog.account.id" class="color-wh bgcolor-disable button full flex wrap">
<small v-if="issue.reblog.poll.expired">Finished</small>
<small v-else>Voted</small>
</div>
</div>
<div v-else class="flex center">
<div v-for="(option, index) in issue.reblog.poll.options" v-if="!issue.reblog.poll.expired" class="full">
<small v-if="isSetVote(issue.reblog.poll, index)" class="color-wh bgcolor-pk button flex wrap" v-on:click="setVote(issue.reblog, index);">{{index+1}}</small>
<small v-else class="color-wh bgcolor button flex wrap" v-on:click="setVote(issue.reblog, index);">{{index+1}}</small>
</div>
<div class="full">
<small v-if="issue.reblog.req_vote" class="color-wh bgcolor-disable button flex wrap"><i class="fa fa-fw fa-spinner fa-pulse"></i></small>
<small v-else-if="!checkVote(issue.reblog.poll)" class="color-wh bgcolor-disable button flex wrap">Vote</small>
<small v-else class="color-wh bgcolor-pk button flex wrap" v-on:click="actVote(issue.reblog);">Vote</small>
</div>
</div>
<div>
<small v-if="issue.reblog.poll.expired">最終結果 計{{issue.reblog.poll.votes_count}}票</small>
<small v-else>投票中 現在{{issue.reblog.poll.votes_count}}票 ({{formatDate(issue.reblog.poll.expires_at)}}まで)</small>
</div>
</div>
<div v-if="0 != issue.reblog.media_attachments" class="media-wrapper bgcolor-gray hidden flex">
<a v-for="media in issue.reblog.media_attachments" @click="modal_media = media;showMedia = true;">
<video v-if="'gifv' == media.type && '2' == optAutoPlay" :src="https://sumire.work/kktjs/media.url" class="media" playsinline muted autoplay loop></video>
<span v-if="issue.loading_media && ('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" class="media"></span>
 <img v-else-if="('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" :src="https://sumire.work/kktjs/checkMedia(media.preview_url,%20media.remote_url)" :alt="media.description" :title="media.description" class="media" onerror="this.src=IMG_DUMMY">
<i v-if="'video' == media.type || ('gifv' == media.type && '1' == optAutoPlay)" class="fa fa-fw fa-play-circle-o color-pk"></i>
</a>
</div>
<div v-if="0 != issue.reblog.media_attachments" class="media-wrapper control">
<i v-on:click="updateMediaWrapper(issue.reblog, false);" class="fa fa-fw fa-eye-slash bgcolor-wh"></i>
</div>
<div v-if="((( optAllNsfw || issue.reblog.sensitive ) && !issue.reblog.media_opened ) || false === issue.reblog.media_opened ) && 0 != issue.reblog.media_attachments" class="media-wrapper bluesheet" v-on:click="updateMediaWrapper(issue.reblog, true);">
<h4 v-if="issue.reblog.sensitive">Sensitive contents</h4>
<h4 v-else>Media contents</h4>
<small>Click to view</small>
</div>
</div>
<a v-if="!issue.caught_katsufilter && null != issue.reblog.card" class="flex center card" :href="https://sumire.work/kktjs/issue.reblog.card.url" target="_blank" rel="noopener noreferrer">
<img v-if="null != issue.reblog.card.image" :src="https://sumire.work/kktjs/issue.reblog.card.image" onerror="this.src=IMG_DUMMY">
<div class="detail-content hidden">
<span>{{issue.reblog.card.title}}</span><br>
<small>{{formatDomain(issue.reblog.card)}}</small>
</div>
</a>
<div class="action-bar flex end">
<div class="hidden nodot">
<i class="fa fa-fw fa-paperclip color-disable"></i>
<small class="time">{{formatDate(issue.reblog.created_at)}}</small>
</div>
<i v-on:click="runReply(issue.reblog);" class="fa fa-fw fa-reply"></i>
<i v-if="issue.reblog.req_reblog" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="'direct' == issue.reblog.visibility || 'private' == issue.reblog.visibility" class="fa fa-fw fa-retweet color-disable"></i>
<i v-else-if="issue.reblog.reblogged" v-on:click="actUnReblog(issue.reblog);" class="fa fa-fw fa-retweet color-on"></i>
<i v-else v-on:click="actReblog(issue.reblog);" class="fa fa-fw fa-retweet"></i>
<i v-if="issue.reblog.req_favourite" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="issue.reblog.favourited" v-on:click="actUnFav(issue.reblog, false);" class="fa fa-fw fa-star color-on"></i>
<i v-else v-on:click="actFav(issue.reblog);" class="fa fa-fw fa-star"></i>
<i v-if="checkKatsuChain(issue.reblog)" v-on:click="runDetail(issue.reblog.id);" class="fa fa-fw fa-comments-o"></i>
<i v-else v-on:click="runDetail(issue.reblog.id);" class="fa fa-fw fa-comment-o"></i>
<i v-on:click="runAcct(issue.reblog.account.id);" class="fa fa-fw fa-user-circle-o"></i>
</div>
</div>
</div>

<div v-else class="status flex">
<span v-if="issue.loading_avatar" class="avatar border" v-on:click="runAcct(issue.account.id);"></span>
<img v-else :src="https://sumire.work/kktjs/checkAvatar(issue.account.avatar_static)" class="avatar border" v-on:click="runAcct(issue.account.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
 <div class="hidden full">
<a v-if="checkDisplayName(issue.account.display_name)" class="color-pk" v-html="formatEmoji(issue.account.display_name, issue.account.emojis)"></a>
<a v-else class="color-pk">{{issue.account.username}}</a>
<small>‭@{{issue.account.acct}}</small>
</div>
<small v-if="'public' != issue.visibility">[{{issue.visibility}}]</small>
<small v-if="!optSimple && issue.sensitive" class="status-info"><i class="fa fa-fw fa-exclamation-triangle"></i></small>
</div>
<div v-if="issue.caught_katsufilter">
<div class="spoller-link border-dash" v-on:click="updateWrapper(issue, false);"><small>- Caught by Katsu Filter -</small></div>
</div>
<div v-else>
<div class="status-text">
<span v-html="formatSpoiler(issue.spoiler_text, issue.emojis)"></span>
<div v-if="issue.spoiler_text">
<div v-if="!issue.content_opened" class="spoller-link color-wh bgcolor-pk" v-on:click="updateContentWrapper(issue, true);"><small>- SHOW MORE -</small></div>
<div v-else class="spoller-link color-wh bgcolor" v-on:click="updateContentWrapper(issue, false);"><small>- SHOW LESS -</small></div>
<span v-show="issue.content_opened" v-html="formatContent(issue.content, issue.emojis)"></span>
</div>
<div v-else>
<span v-html="formatContent(issue.content, issue.emojis)"></span>
</div>
</div>
<div v-if="null != issue.poll && 0 != issue.poll.options" class="card">
<div v-for="(option, index) in issue.poll.options" class="option-name flex start">
<div class="hidden full"><span v-html="index+1+'. '+formatEmojiDraft(option.title, issue.poll.emojis)"></span></div>
<small v-if="issue.poll.voted || issue.poll.expired">{{option.votes_count}}票</small>
</div>
<div v-if="issue.poll.voted || issue.poll.expired || user.id == issue.account.id" class="flex center">
<div v-if="user.id != issue.account.id" class="color-wh bgcolor-disable button full flex wrap">
<small v-if="issue.poll.expired">Finished</small>
<small v-else>Voted</small>
</div>
</div>
<div v-else class="flex center">
<div v-for="(option, index) in issue.poll.options" v-if="!issue.poll.expired" class="full">
<small v-if="isSetVote(issue.poll, index)" class="color-wh bgcolor-pk button flex wrap" v-on:click="setVote(issue, index);">{{index+1}}</small>
<small v-else class="color-wh bgcolor button flex wrap" v-on:click="setVote(issue, index);">{{index+1}}</small>
</div>
<div class="full">
<small v-if="issue.req_vote" class="color-wh bgcolor-disable button flex wrap"><i class="fa fa-fw fa-spinner fa-pulse"></i></small>
<small v-else-if="!checkVote(issue.poll)" class="color-wh bgcolor-disable button flex wrap">Vote</small>
<small v-else class="color-wh bgcolor-pk button flex wrap" v-on:click="actVote(issue);">Vote</small>
</div>
</div>
<div>
<small v-if="issue.poll.expired">最終結果 計{{issue.poll.votes_count}}票</small>
<small v-else>投票中 現在{{issue.poll.votes_count}}票 ({{formatDate(issue.poll.expires_at)}}まで)</small>
 </div>
</div>
<div v-if="0 != issue.media_attachments" class="media-wrapper bgcolor-gray hidden flex">
<a v-for="media in issue.media_attachments" @click="modal_media = media;showMedia = true;">
<video v-if="'gifv' == media.type && '2' == optAutoPlay" :src="https://sumire.work/kktjs/media.url" class="media" playsinline muted autoplay loop></video>
<span v-if="issue.loading_media && ('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" class="media"></span>
<img v-else-if="('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" :src="https://sumire.work/kktjs/checkMedia(media.preview_url,%20media.remote_url)" :alt="media.description" :title="media.description" class="media" onerror="this.src=IMG_DUMMY">
<i v-if="'video' == media.type || ('gifv' == media.type && '1' == optAutoPlay)" class="fa fa-fw fa-play-circle-o color-pk"></i>
</a>
</div>
<div v-if="0 != issue.media_attachments" class="media-wrapper control">
<i v-on:click="updateMediaWrapper(issue, false);" class="fa fa-fw fa-eye-slash bgcolor-wh"></i>
</div>
<div v-if="((( optAllNsfw || issue.sensitive ) && !issue.media_opened ) || false === issue.media_opened ) && 0 != issue.media_attachments" class="media-wrapper bluesheet" v-on:click="updateMediaWrapper(issue, true);">
<h4 v-if="issue.sensitive">Sensitive contents</h4>
<h4 v-else>Media contents</h4>
<small>Click to view</small>
</div>
</div>
<a v-if="!issue.caught_katsufilter && null != issue.card" class="flex center card" :href="https://sumire.work/kktjs/issue.card.url" target="_blank" rel="noopener noreferrer">
<img v-if="null != issue.card.image" :src="https://sumire.work/kktjs/issue.card.image" onerror="this.src=IMG_DUMMY">
<div class="detail-content hidden">
<span>{{issue.card.title}}</span><br>
<small>{{formatDomain(issue.card)}}</small>
</div>
</a>
<div class="action-bar flex end">
<div class="hidden nodot">
<i v-on:click="runBookmark(issue);" class="fa fa-fw fa-paperclip"></i>
<small class="time">{{formatDate(issue.created_at)}}</small>
</div>
<i v-on:click="runReply(issue);" class="fa fa-fw fa-reply"></i>
<i v-if="issue.req_reblog" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="'direct' == issue.visibility || 'private' == issue.visibility" class="fa fa-fw fa-retweet color-disable"></i>
<i v-else-if="issue.reblogged" v-on:click="actUnReblog(issue);" class="fa fa-fw fa-retweet color-on"></i>
<i v-else v-on:click="actReblog(issue);" class="fa fa-fw fa-retweet"></i>
<i v-if="issue.req_favourite" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="issue.favourited" v-on:click="actUnFav(issue, false);" class="fa fa-fw fa-star color-on"></i>
<i v-else v-on:click="actFav(issue);" class="fa fa-fw fa-star"></i>
<i v-if="checkKatsuChain(issue)" v-on:click="runDetail(issue.id);" class="fa fa-fw fa-comments-o"></i>
<i v-else v-on:click="runDetail(issue.id);" class="fa fa-fw fa-comment-o"></i>
<i v-on:click="runAcct(issue.account.id);" class="fa fa-fw fa-user-circle-o"></i>
</div>
</div>
</div>
<div class="status-header flex end">
<small v-if="issue.application && showDebugVia">
via <a :href="https://sumire.work/kktjs/issue.application.website" target="_blank" rel="noopener noreferrer">{{issue.application.name}} </a>
</small>
</div>
</div>
<div class="flex info-wrapper">
<span v-if="fetch_lock.home"><i class="fa fa-fw fa-spinner fa-pulse"></i>Katsu Loading...</span>
<span v-else-if="fetch_comp.home">All Loaded</span>
<span v-else>TouchEnd to Load Next</span>
</div>
</div>
<div v-else>
<div v-if="fetch_lock.home" class="flex info-wrapper">Initializing...</div>
<div v-if="fetch_lock.home" class="flex info-wrapper"><span><i class="fa fa-fw fa-spinner fa-pulse"></i>Katsu Loading...</span></div>
</div>
</div>
<div class="flex column-footer">
<i class="fa fa-fw fa-angle-double-up" v-on:click="upHome();"></i>
<i class="fa fa-fw fa-angle-up" v-on:click="backHome();"></i>
<i class="fa fa-fw fa-angle-down" v-on:click="nextHome();"></i>
</div>
</div>

<div v-if="showLocal" :class="[{ primary: optColumnWide }, { full: optColumnWide && '1' == optColumns }]" class="column bgcolor-gray">
<div class="column-header">
<div class="flex">
<div class="hidden full">
<i v-if="'Global' == local_type" class="fa fa-fw fa-globe"></i>
<i v-else class="fa fa-fw fa-users"></i>{{local_type}} <small v-if="!optSimple">(Stream: {{connLocal}})</small>
</div>
<span class="column-option">
<i v-if="fetch_lock.homews || fetch_lock.home || fetch_lock.localws || fetch_lock.local || fetch_lock.multiws || fetch_lock.multi" class="fa fa-fw fa-spin fa-refresh color-disable"></i>
<i v-else v-on:click="toggleLocalOption();" class="fa fa-fw fa-ellipsis-h"></i>
</span>
</div>
<div v-if="showLocalOption" class="flex">
<div v-if="1 == optColumns && (fetch_lock.localws || fetch_lock.local)" class="tl-link full color-wh bgcolor-disable"><i class="fa fa-fw fa-users"></i>Home</div>
<div v-else-if="1 == optColumns" v-on:click="runHome();reopenWsHome('Home');showLocalOption = false;" class="tl-link full color-wh" :class="[showHome ? 'bgcolor-pk' : 'bgcolor']"><i class="fa fa-fw fa-home"></i>Home</div>
<div v-if="fetch_lock.localws || fetch_lock.local" class="tl-link full color-wh bgcolor-disable"><i class="fa fa-fw fa-users"></i>Local</div>
<div v-else v-on:click="reopenWsLocal('Local');showLocalOption = false;" class="tl-link full color-wh" :class="['Local' == local_type ? 'bgcolor-pk' : 'bgcolor']"><i class="fa fa-fw fa-users"></i>Local</div>
<div v-if="fetch_lock.localws || fetch_lock.local" class="tl-link full color-wh bgcolor-disable"><i class="fa fa-fw fa-globe"></i>Global</div>
<div v-else v-on:click="reopenWsLocal('Global');showLocalOption = false;" class="tl-link full color-wh" :class="['Global' == local_type ? 'bgcolor-pk' : 'bgcolor']"><i class="fa fa-fw fa-globe"></i>Global</div>
<div v-if="fetch_lock.homews || fetch_lock.home || fetch_lock.localws || fetch_lock.local || fetch_lock.multiws || fetch_lock.multi" class="tl-link color-wh bgcolor-disable"><i class="fa fa-fw fa-spin fa-refresh"></i></div>
<div v-else v-on:click="reopenForce();" class="tl-link color-wh bgcolor"><i class="fa fa-fw fa-refresh"></i></div>
</div>
</div>
<div class="scrollable" id="local" v-on:scroll="handleScrollLocal">
<div v-if="hasLocal" class="status-list">
<div v-for="(issue, index) in locals" v-if="local_unread <= index" class="status-wrapper" :class="issue.visibility">
<a :id="'local'+issue.id"></a>
<div v-if="local_id_bookmark == issue.id" class="status-header flex start bgcolor-bookmark bookmark">
<i v-on:click="local_id_bookmark = '';" class="fa fa-fw fa-paperclip big"></i>
</div>
<div class="status flex">
<span v-if="issue.loading_avatar" class="avatar border" v-on:click="runAcct(issue.account.id);"></span>
<img v-else :src="https://sumire.work/kktjs/checkAvatar(issue.account.avatar_static)" class="avatar border" v-on:click="runAcct(issue.account.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(issue.account.display_name)" class="color-pk" v-html="formatEmoji(issue.account.display_name, issue.account.emojis)"></a>
<a v-else class="color-pk">{{issue.account.username}}</a>
<small>‭@{{issue.account.acct}}</small>
</div>
<small v-if="'public' != issue.visibility">[{{issue.visibility}}]</small>
<small v-if="!optSimple && issue.sensitive" class="status-info"><i class="fa fa-fw fa-exclamation-triangle"></i></small>
</div>
<div v-if="issue.caught_katsufilter">
<div class="spoller-link border-dash" v-on:click="updateWrapper(issue, false);"><small>- Caught by Katsu Filter -</small></div>
</div>
<div v-else>
<div class="status-text">
<span v-html="formatSpoiler(issue.spoiler_text, issue.emojis)"></span>
<div v-if="issue.spoiler_text">
<div v-if="!issue.content_opened" class="spoller-link color-wh bgcolor-pk" v-on:click="updateContentWrapper(issue, true);"><small>- SHOW MORE -</small></div>
<div v-else class="spoller-link color-wh bgcolor" v-on:click="updateContentWrapper(issue, false);"><small>- SHOW LESS -</small></div>
<span v-if="issue.content_opened" v-html="formatContent(issue.content, issue.emojis)"></span>
</div>
<div v-else>
<span v-html="formatContent(issue.content, issue.emojis)"></span>
</div>
</div>
<div v-if="null != issue.poll && 0 != issue.poll.options" class="card">
<div v-for="(option, index) in issue.poll.options" class="option-name flex start">
<div class="hidden full"><span v-html="index+1+'. '+formatEmojiDraft(option.title, issue.poll.emojis)"></span></div>
<small v-if="issue.poll.voted || issue.poll.expired">{{option.votes_count}}票</small>
</div>
<div v-if="issue.poll.voted || issue.poll.expired || user.id == issue.account.id" class="flex center">
<div v-if="user.id != issue.account.id" class="color-wh bgcolor-disable button full flex wrap">
<small v-if="issue.poll.expired">Finished</small>
<small v-else>Voted</small>
</div>
</div>
<div v-else class="flex center">
<div v-for="(option, index) in issue.poll.options" v-if="!issue.poll.expired" class="full">
<small v-if="isSetVote(issue.poll, index)" class="color-wh bgcolor-pk button flex wrap" v-on:click="setVote(issue, index);">{{index+1}}</small>
<small v-else class="color-wh bgcolor button flex wrap" v-on:click="setVote(issue, index);">{{index+1}}</small>
</div>
<div class="full">
<small v-if="issue.req_vote" class="color-wh bgcolor-disable button flex wrap"><i class="fa fa-fw fa-spinner fa-pulse"></i></small>
 <small v-else-if="!checkVote(issue.poll)" class="color-wh bgcolor-disable button flex wrap">Vote</small>
<small v-else class="color-wh bgcolor-pk button flex wrap" v-on:click="actVote(issue);">Vote</small>
</div>
</div>
<div>
<small v-if="issue.poll.expired">最終結果 計{{issue.poll.votes_count}}票</small>
<small v-else>投票中 現在{{issue.poll.votes_count}}票 ({{formatDate(issue.poll.expires_at)}}まで)</small>
</div>
</div>
<div v-if="0 != issue.media_attachments" class="media-wrapper bgcolor-gray hidden flex">
<a v-for="media in issue.media_attachments" @click="modal_media = media;showMedia = true;">
<video v-if="'gifv' == media.type && '2' == optAutoPlay" :src="https://sumire.work/kktjs/media.url" class="media" playsinline muted autoplay loop></video>
<span v-if="issue.loading_media && ('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" class="media"></span>
<img v-else-if="('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" :src="https://sumire.work/kktjs/checkMedia(media.preview_url,%20media.remote_url)" :alt="media.description" :title="media.description" class="media" onerror="this.src=IMG_DUMMY">
<i v-if="'video' == media.type || ('gifv' == media.type && '1' == optAutoPlay)" class="fa fa-fw fa-play-circle-o color-pk"></i>
</a>
</div>
<div v-if="0 != issue.media_attachments" class="media-wrapper control">
<i v-on:click="updateMediaWrapper(issue, false);" class="fa fa-fw fa-eye-slash bgcolor-wh"></i>
</div>
<div v-if="((( optAllNsfw || issue.sensitive ) && !issue.media_opened ) || false === issue.media_opened ) && 0 != issue.media_attachments" class="media-wrapper bluesheet" v-on:click="updateMediaWrapper(issue, true);">
<h4 v-if="issue.sensitive">Sensitive contents</h4>
<h4 v-else>Media contents</h4>
<small>Click to view</small>
</div>
</div>
<a v-if="!issue.caught_katsufilter && null != issue.card" class="flex center card" :href="https://sumire.work/kktjs/issue.card.url" target="_blank" rel="noopener noreferrer">
<img v-if="null != issue.card.image" :src="https://sumire.work/kktjs/issue.card.image" onerror="this.src=IMG_DUMMY">
<div class="detail-content hidden">
<span>{{issue.card.title}}</span><br>
<small>{{formatDomain(issue.card)}}</small>
</div>
</a>
<div class="action-bar flex end">
<div class="hidden nodot">
<i v-on:click="runBookmark(issue);" class="fa fa-fw fa-paperclip"></i>
<small class="time">{{formatDate(issue.created_at)}}</small>
</div>
<i v-on:click="runReply(issue);" class="fa fa-fw fa-reply"></i>
<i v-if="issue.req_reblog" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="'direct' == issue.visibility || 'private' == issue.visibility" class="fa fa-fw fa-retweet color-disable"></i>
<i v-else-if="issue.reblogged" v-on:click="actUnReblog(issue);" class="fa fa-fw fa-retweet color-on"></i>
<i v-else v-on:click="actReblog(issue);" class="fa fa-fw fa-retweet"></i>
<i v-if="issue.req_favourite" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="issue.favourited" v-on:click="actUnFav(issue);" class="fa fa-fw fa-star color-on"></i>
<i v-else v-on:click="actFav(issue);" class="fa fa-fw fa-star"></i>
<i v-if="checkKatsuChain(issue)" v-on:click="runDetail(issue.id);" class="fa fa-fw fa-comments-o"></i>
<i v-else v-on:click="runDetail(issue.id);" class="fa fa-fw fa-comment-o"></i>
<i v-on:click="runAcct(issue.account.id);" class="fa fa-fw fa-user-circle-o"></i>
</div>
</div>
</div>
<div class="status-header flex end">
<small v-if="issue.application && showDebugVia">
via <a :href="https://sumire.work/kktjs/issue.application.website" target="_blank" rel="noopener noreferrer">{{issue.application.name}} </a>
</small>
</div>
<div class="status-header flex end">
<small v-if="formatDomain(issue.account) != repository">
from <a :href="https://sumire.work/kktjs/'//'%20issue.account.domain" target="_blank" rel="noopener noreferrer">{{formatDomain(issue.account)}}</a>
</small>
</div>
</div>
<div class="flex info-wrapper">
<span v-if="fetch_lock.local"><i class="fa fa-fw fa-spinner fa-pulse"></i>Katsu Loading...</span>
<span v-else-if="fetch_comp.local">All Loaded</span>
<span v-else>TouchEnd to Load Next</span>
</div>
</div>
<div v-else>
<div v-if="fetch_lock.local" class="flex info-wrapper">Initializing...</div>
<div v-if="fetch_lock.local" class="flex info-wrapper"><span><i class="fa fa-fw fa-spinner fa-pulse"></i>Katsu Loading...</span></div>
</div>
</div>
<div class="flex column-footer">
<i class="fa fa-fw fa-angle-double-up" v-on:click="upLocal();"></i>
<i class="fa fa-fw fa-angle-up" v-on:click="backLocal();"></i>
<i class="fa fa-fw fa-angle-down" v-on:click="nextLocal();"></i>
</div>
</div>

<div v-show="showNotif" class="column bgcolor-gray" :class="{ full: optColumnWide && '1' == optColumns }">
<div class="column-header">
<div class="flex">
<div class="hidden full">
<i class="fa fa-fw fa-bell"></i>Notification <small v-if="!optSimple">(Stream: {{connHome}})</small>
</div>
<span v-if="!showNotifOption" class="column-option">
<i v-if="fetch_lock.homews || fetch_lock.home || fetch_lock.localws || fetch_lock.local || fetch_lock.multiws || fetch_lock.multi" class="fa fa-fw fa-spin fa-refresh color-disable"></i>
<i v-else v-on:click="notif_type = '';toggleNotifOption();" class="fa fa-fw fa-ellipsis-h"></i>
</span>
</div>
<div v-if="showNotifOption" class="action-bar flex end">
<div class="hidden">
<i class="fa fa-fw fa-filter color-disable"></i><small>Filter<span v-if="notif_type != ''">: {{notif_type}}</span> </small>
</div>
<div v-on:click="runNotif('all');showNotifOption = false;" class="button mini wide color-wh bgcolor">Clear</div>
</div>
<div v-if="showNotifOption" class="flex">
<div v-on:click="resetNotifColumn();notif_unread_filter.mention = 0;fetchNotifMention();" class="select-link color-wh bgcolor" :class="['mention' == notif_type || '' == notif_type ? 'bgcolor-pk' : 'bgcolor']"><i class="fa fa-fw fa-reply"></i></i>Mention</div>
<div v-on:click="resetNotifColumn();notif_unread_filter.fav = 0;fetchNotifFav();" class="select-link color-wh bgcolor" :class="['fav' == notif_type || '' == notif_type ? 'bgcolor-pk' : 'bgcolor']"><i class="fa fa-fw fa-star"></i>Fav</div>
<div v-on:click="resetNotifColumn();notif_unread_filter.reblog = 0;fetchNotifReblog();" class="select-link color-wh bgcolor" :class="['reblog' == notif_type || '' == notif_type ? 'bgcolor-pk' : 'bgcolor']"><i class="fa fa-fw fa-retweet"></i>Reblog</div>
<div v-on:click="resetNotifColumn();notif_unread_filter.follow = 0;fetchNotifFollow();" class="select-link color-wh bgcolor" :class="['follow' == notif_type || '' == notif_type ? 'bgcolor-pk' : 'bgcolor']"><i class="fa fa-fw fa-user-plus"></i>Follow</div>
</div>
</div>
<div class="scrollable" id="notif" v-if="showNotif" v-on:scroll="handleScrollNotif">
<div v-if="hasNotifFilter" class="status-list">
<div v-for="(issue, index) in notifs_filter" v-if="notif_unread <= index && !(('favourite' == issue.type || 'reblog' == issue.type) && null == issue.status) && notifJudge(issue)" class="status-wrapper" :class="issue.visibility">
<a :id="'notif'+issue.id"></a>
<div class="status-header flex start">
<i v-if="'mention' == issue.type" class="fa fa-fw fa-reply"></i>
<i v-else-if="'reblog' == issue.type" class="fa fa-fw fa-retweet color-on"></i>
<i v-else-if="'favourite' == issue.type" class="fa fa-fw fa-star color-on"></i>
<i v-else-if="'follow' == issue.type" class="fa fa-fw fa-user-plus color-gr"></i>
<i v-else-if="'poll' == issue.type" class="fa fa-fw fa-tasks color-gr"></i>
<span v-if="('reblog' == issue.type || 'favourite' == issue.type) && issue.loading_avatar" class="avatar border" v-on:click="runAcct(issue.account.id);"></span>
<img v-else-if="'reblog' == issue.type || 'favourite' == issue.type" :src="https://sumire.work/kktjs/checkAvatar(issue.account.avatar_static)" class="avatar border notif" v-on:click="runAcct(issue.account.id);" onerror="this.src=IMG_DUMMY">
<div class="full">
<div class="hidden">
<span v-if="checkDisplayName(issue.account.display_name)" class="color-pk" v-html="formatEmoji(issue.account.display_name, issue.account.emojis)"></span>
<span v-else class="color-pk">{{issue.account.username}}</span>
<small class="color-gr">‭@{{issue.account.acct}}</small>
</div>
<div class="status-name flex start">
<div class="hidden">
<span v-if="'mention' == issue.type">{{issue.type}} your katsu</span>
<span v-else-if="'follow' == issue.type">{{issue.type}} you</span>
<span v-else-if="'poll' == issue.type">{{issue.type}} finished</span>
<span v-else>{{issue.type}} your katsu</span>
</div>
<span v-if="'mention' != issue.type" class="status-info color-gr">({{formatDate(issue.created_at)}})</span>
</div>
</div>
</div>

<div v-if="'mention' == issue.type" class="status flex">
<span v-if="issue.loading_avatar" class="avatar border" v-on:click="runAcct(issue.account.id);"></span>
<img v-else :src="https://sumire.work/kktjs/checkAvatar(issue.account.avatar_static)" class="avatar border" v-on:click="runAcct(issue.account.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(issue.status.account.display_name)" class="color-pk" v-html="formatEmoji(issue.status.account.display_name, issue.status.account.emojis)"></a>
<a v-else class="color-pk">{{issue.status.account.username}}</a>
<small>‭@{{issue.status.account.acct}}</small>
</div>
<small v-if="'public' != issue.status.visibility">[{{issue.status.visibility}}]</small>
<small v-if="!optSimple && issue.status.sensitive" class="status-info"><i class="fa fa-fw fa-exclamation-triangle"></i></small>
</div>
<div class="status-text">
<span v-html="formatSpoiler(issue.status.spoiler_text, issue.status.emojis)" v-if="issue.status.spoiler_text"></span>
<span v-html="formatContent(issue.status.content, issue.status.emojis)"></span>
</div>
<div v-if="null != issue.status.poll && 0 != issue.status.poll.options" class="card">
<div v-for="(option, index) in issue.status.poll.options" class="option-name flex start">
<div class="hidden full"><span v-html="index+1+'. '+formatEmojiDraft(option.title, issue.status.poll.emojis)"></span></div>
<small v-if="issue.status.poll.voted || issue.status.poll.expired">{{option.votes_count}}票</small>
</div>
<div v-if="issue.status.poll.voted || issue.status.poll.expired || user.id == issue.status.account.id" class="flex center">
<div v-if="user.id != issue.status.account.id" class="color-wh bgcolor-disable button full flex wrap">
<small v-if="issue.status.poll.expired">Finished</small>
<small v-else>Voted</small>
</div>
</div>
<div v-else class="flex center">
<div v-for="(option, index) in issue.status.poll.options" v-if="!issue.status.poll.expired" class="full">
<small v-if="isSetVote(issue.status.poll, index)" class="color-wh bgcolor-pk button flex wrap" v-on:click="setVote(issue.status, index);">{{index+1}}</small>
<small v-else class="color-wh bgcolor button flex wrap" v-on:click="setVote(issue.status, index);">{{index+1}}</small>
</div>
<div class="full">
<small v-if="issue.status.req_vote" class="color-wh bgcolor-disable button flex wrap"><i class="fa fa-fw fa-spinner fa-pulse"></i></small>
<small v-else-if="!checkVote(issue.status.poll)" class="color-wh bgcolor-disable button flex wrap">Vote</small>
<small v-else class="color-wh bgcolor-pk button flex wrap" v-on:click="actVote(issue.status);">Vote</small>
</div>
</div>
<div>
<small v-if="issue.status.poll.expired">最終結果 計{{issue.status.poll.votes_count}}票</small>
<small v-else>投票中 現在{{issue.status.poll.votes_count}}票 ({{formatDate(issue.status.poll.expires_at)}}まで)</small>
</div>
</div>
<div v-if="0 != issue.status.media_attachments" class="media-wrapper bgcolor-gray hidden flex">
<a v-for="media in issue.status.media_attachments" @click="modal_media = media;showMedia = true;">
<video v-if="'gifv' == media.type && '2' == optAutoPlay" :src="https://sumire.work/kktjs/media.url" class="media" playsinline muted autoplay loop></video>
<span v-if="issue.loading_media && ('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" class="media"></span>
<img v-else-if="('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" :src="https://sumire.work/kktjs/checkMedia(media.preview_url,%20media.remote_url)" :alt="media.description" :title="media.description" class="media" onerror="this.src=IMG_DUMMY">
<i v-if="'video' == media.type || ('gifv' == media.type && '1' == optAutoPlay)" class="fa fa-fw fa-play-circle-o color-pk"></i>
</a>
</div>
<div v-if="0 != issue.status.media_attachments" class="media-wrapper control">
<i v-on:click="updateMediaWrapper(issue.status, false);" class="fa fa-fw fa-eye-slash bgcolor-wh"></i>
</div>
<div v-if="(( issue.status.sensitive && !issue.status.media_opened ) || false === issue.status.media_opened ) && 0 != issue.status.media_attachments" class="media-wrapper bluesheet" v-on:click="updateMediaWrapper(issue.status, true);">
<h4 v-if="issue.status.sensitive">Sensitive contents</h4>
<h4 v-else>Media contents</h4>
<small>Click to view</small>
</div>
<a v-if="null != issue.status.card" class="flex center card" :href="https://sumire.work/kktjs/issue.status.card.url" target="_blank" rel="noopener noreferrer">
<img v-if="null != issue.status.card.image" :src="https://sumire.work/kktjs/issue.status.card.image" onerror="this.src=IMG_DUMMY">
<div class="detail-content hidden">
<span>{{issue.status.card.title}}</span><br>
<small>{{formatDomain(issue.status.card)}}</small>
</div>
</a>
<div class="action-bar flex end">
<div class="hidden nodot">
<i class="fa fa-fw fa-paperclip color-disable"></i>
<small class="time">{{formatDate(issue.status.created_at)}}</small>
</div>
<i v-on:click="runReply(issue.status);" class="fa fa-fw fa-reply"></i>
<i v-if="issue.status.req_reblog" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="'direct' == issue.status.visibility || 'private' == issue.status.visibility" class="fa fa-fw fa-retweet color-disable"></i>
<i v-else-if="issue.status.reblogged" v-on:click="actUnReblog(issue.status);" class="fa fa-fw fa-retweet color-on"></i>
<i v-else v-on:click="actReblog(issue.status);" class="fa fa-fw fa-retweet"></i>
<i v-if="issue.status.req_favourite" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="issue.status.favourited" v-on:click="actUnFav(issue.status);" class="fa fa-fw fa-star color-on"></i>
<i v-else v-on:click="actFav(issue.status);" class="fa fa-fw fa-star"></i>
<i v-if="checkKatsuChain(issue.status)" v-on:click="runDetail(issue.status.id);" class="fa fa-fw fa-comments-o"></i>
<i v-else v-on:click="runDetail(issue.status.id);" class="fa fa-fw fa-comment-o"></i> <i v-on:click="runAcct(issue.status.account.id);" class="fa fa-fw fa-user-circle-o"></i>
</div>
</div>
</div>

<div v-else-if="'favourite' == issue.type || 'reblog' == issue.type || 'poll' == issue.type" class="status flex">
<span v-if="issue.loading_avatar" class="avatar border" v-on:click="runAcct(issue.status.account.id);"></span>
<img v-else :src="https://sumire.work/kktjs/checkAvatar(issue.status.account.avatar_static)" class="avatar border" v-on:click="runAcct(issue.status.account.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(issue.status.account.display_name)" class="color-pk" v-html="formatEmoji(issue.status.account.display_name, issue.status.account.emojis)"></a>
<a v-else class="color-pk">{{issue.status.account.username}}</a>
<small>‭@{{issue.status.account.acct}}</small>
</div>
<small v-if="'public' != issue.status.visibility">[{{issue.status.visibility}}]</small>
<small v-if="!optSimple && issue.status.sensitive" class="status-info"><i class="fa fa-fw fa-exclamation-triangle"></i></small>
</div>
<div class="status-text">
<span v-html="formatSpoiler(issue.status.spoiler_text, issue.status.emojis)" v-if="issue.status.spoiler_text"></span>
<span v-html="formatContent(issue.status.content, issue.status.emojis)"></span>
</div>
<div v-if="null != issue.status.poll && 0 != issue.status.poll.options" class="card">
<div v-for="(option, index) in issue.status.poll.options" class="option-name flex start">
<div class="hidden full"><span v-html="index+1+'. '+formatEmojiDraft(option.title, issue.status.poll.emojis)"></span></div>
<small v-if="issue.status.poll.voted || issue.status.poll.expired">{{option.votes_count}}票</small>
</div>
<div>
<small v-if="issue.status.poll.expired">最終結果 計{{issue.status.poll.votes_count}}票</small>
<small v-else>投票中 現在{{issue.status.poll.votes_count}}票 ({{formatDate(issue.status.poll.expires_at)}}まで)</small>
</div>
</div>
<div class="action-bar flex end">
<div class="hidden nodot">
<i class="fa fa-fw fa-paperclip color-disable"></i>
<small class="time">{{formatDate(issue.status.created_at)}}</small>
</div>
<i v-if="checkKatsuChain(issue.status)" v-on:click="runDetail(issue.status.id);" class="fa fa-fw fa-comments-o"></i>
<i v-else v-on:click="runDetail(issue.status.id);" class="fa fa-fw fa-comment-o"></i>
<i v-on:click="runAcct(issue.status.account.id);" class="fa fa-fw fa-user-circle-o"></i>
</div>
</div>
</div>

<div v-else class="status flex">
<span v-if="issue.loading_avatar" class="avatar border" v-on:click="runAcct(issue.account.id);"></span>
<img v-else :src="https://sumire.work/kktjs/checkAvatar(issue.account.avatar_static)" class="avatar border" v-on:click="runAcct(issue.account.id);" onerror="this.src=IMG_DUMMY">

<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(issue.account.display_name)" class="color-pk" v-html="formatEmoji(issue.account.display_name, issue.account.emojis)"></a>
<a v-else class="color-pk">{{issue.account.username}}</a>
<small>‭@{{issue.account.acct}}</small>
</div>
<span v-if="issue.account.locked"><i class="fa fa-fw fa-lock"></i></span>
<small v-if="issue.account.bot" class="status-info">[Bot]</small>
</div>
<div class="status-text">
</div>
<div class="action-bar flex end">
<div class="hidden nodot">
<i class="fa fa-fw fa-user-o color-disable"></i>
<small class="time">{{formatDate(issue.account.created_at)}}</small>
</div>
<i v-on:click="runAcct(issue.account.id);" class="fa fa-fw fa-user-circle-o"></i>
</div>
</div>
</div>
</div>
<div class="flex info-wrapper">
<span v-if="fetch_lock.notif"><i class="fa fa-fw fa-spinner fa-pulse"></i>Notif Loading...</span>
<span v-else-if="fetch_comp.notif_filter">All Loaded</span>
<span v-else>TouchEnd to Load Next</span>
</div>
</div>
<div v-else>
<div v-if="fetch_lock.notif" class="flex info-wrapper">Initializing...</div>
<div class="flex info-wrapper">
<span v-if="fetch_lock.notif"><i class="fa fa-fw fa-spinner fa-pulse"></i>Notif Loading...</span>
<span v-else-if="fetch_comp.notif_filter">All Loaded</span>
</div>
</div>
</div>
</div>

<div v-if="showMulti" :class="[{ full: optColumnWide && '1' == optColumns }]" class="column bgcolor-gray">
<div class="column-header">
<div class="flex">
<div class="hidden full">
<i v-if="'Hashtag' == multi_type" class="fa fa-fw fa-hashtag"></i>
<i v-else-if="'List' == multi_type" class="fa fa-fw fa-list"></i>
<i v-else-if="'Discord' == multi_type" class="fa fa-fw fa-gamepad"></i>
<i v-else class="fa fa-fw fa-comment"></i>
{{multi_type}}: {{multi_name}} <small v-if="!optSimple && multi_name != multi_target">(id: {{multi_target}})</small> <small v-if="!optSimple">(Stream: {{connMulti}})</small>
</div>
<span class="column-option">
<i v-if="fetch_lock.homews || fetch_lock.home || fetch_lock.localws || fetch_lock.local || fetch_lock.multiws || fetch_lock.multi" class="fa fa-fw fa-spin fa-refresh color-disable"></i>
<i v-else v-on:click="toggleStream();" class="fa fa-fw fa-exchange"></i>
</span>
</div>
</div>
<div class="scrollable" id="multi" v-on:scroll="handleScrollMulti">

<div v-if="'Hashtag' == multi_type && hasMulti" class="status-list">
<div v-for="(issue, index) in multis" v-if="multi_unread <= index" class="status-wrapper" :class="issue.visibility">
<a :id="'multi'+issue.id"></a>
<div v-if="local_id_bookmark == issue.id" class="status-header flex start bgcolor-bookmark bookmark">
<i v-on:click="local_id_bookmark = '';" class="fa fa-fw fa-paperclip big"></i>
</div>
<div class="status flex">
<span v-if="issue.loading_avatar" class="avatar border" v-on:click="runAcct(issue.account.id);"></span>
<img v-else :src="https://sumire.work/kktjs/checkAvatar(issue.account.avatar_static)" class="avatar border" v-on:click="runAcct(issue.account.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(issue.account.display_name)" class="color-pk" v-html="formatEmoji(issue.account.display_name, issue.account.emojis)"></a>
<a v-else class="color-pk">{{issue.account.username}}</a>
<small>‭@{{issue.account.acct}}</small>
</div>
<small v-if="'public' != issue.visibility">[{{issue.visibility}}]</small>
<small v-if="!optSimple && issue.sensitive" class="status-info"><i class="fa fa-fw fa-exclamation-triangle"></i></small>
</div>
<div v-if="issue.caught_katsufilter">
<div class="spoller-link border-dash" v-on:click="updateWrapper(issue, false);"><small>- Caught by Katsu Filter -</small></div>
</div>
<div v-else>
<div class="status-text">
<span v-html="formatSpoiler(issue.spoiler_text, issue.emojis)"></span>
<div v-if="issue.spoiler_text">
<div v-if="!issue.content_opened" class="spoller-link color-wh bgcolor-pk" v-on:click="updateContentWrapper(issue, true);"><small>- SHOW MORE -</small></div>
<div v-else class="spoller-link color-wh bgcolor" v-on:click="updateContentWrapper(issue, false);"><small>- SHOW LESS -</small></div>
<span v-if="issue.content_opened" v-html="formatContent(issue.content, issue.emojis)"></span>
</div>
<div v-else>
<span v-html="formatContent(issue.content, issue.emojis)"></span>
</div>
</div>
<div v-if="null != issue.poll && 0 != issue.poll.options" class="card">
<div v-for="(option, index) in issue.poll.options" class="option-name flex start">
<div class="hidden full"><span v-html="index+1+'. '+formatEmojiDraft(option.title, issue.poll.emojis)"></span></div>
<small v-if="issue.poll.voted || issue.poll.expired">{{option.votes_count}}票</small>
</div>
<div v-if="issue.poll.voted || issue.poll.expired || user.id == issue.account.id" class="flex center">
<div v-if="user.id != issue.account.id" class="color-wh bgcolor-disable button full flex wrap">
<small v-if="issue.poll.expired">Finished</small>
<small v-else>Voted</small>
</div>
</div>
<div v-else class="flex center">
<div v-for="(option, index) in issue.poll.options" v-if="!issue.poll.expired" class="full">
<small v-if="isSetVote(issue.poll, index)" class="color-wh bgcolor-pk button flex wrap" v-on:click="setVote(issue, index);">{{index+1}}</small>
<small v-else class="color-wh bgcolor button flex wrap" v-on:click="setVote(issue, index);">{{index+1}}</small>
</div>
<div class="full">
<small v-if="issue.req_vote" class="color-wh bgcolor-disable button flex wrap"><i class="fa fa-fw fa-spinner fa-pulse"></i></small>
<small v-else-if="!checkVote(issue.poll)" class="color-wh bgcolor-disable button flex wrap">Vote</small>
<small v-else class="color-wh bgcolor-pk button flex wrap" v-on:click="actVote(issue);">Vote</small>
</div>
</div>
<div>
<small v-if="issue.poll.expired">最終結果 計{{issue.poll.votes_count}}票</small>
<small v-else>投票中 現在{{issue.poll.votes_count}}票 ({{formatDate(issue.poll.expires_at)}}まで)</small>
</div>
</div>
<div v-if="0 != issue.media_attachments" class="media-wrapper bgcolor-gray hidden flex">
<a v-for="media in issue.media_attachments" @click="modal_media = media;showMedia = true;">
<video v-if="'gifv' == media.type && '2' == optAutoPlay" :src="https://sumire.work/kktjs/media.url" class="media" playsinline muted autoplay loop></video>
<span v-if="issue.loading_media && ('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" class="media"></span>
<img v-else-if="('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" :src="https://sumire.work/kktjs/checkMedia(media.preview_url,%20media.remote_url)" :alt="media.description" :title="media.description" class="media" onerror="this.src=IMG_DUMMY">
<i v-if="'video' == media.type || ('gifv' == media.type && '1' == optAutoPlay)" class="fa fa-fw fa-play-circle-o color-pk"></i>
</a>
</div>
<div v-if="0 != issue.media_attachments" class="media-wrapper control">
<i v-on:click="updateMediaWrapper(issue, false);" class="fa fa-fw fa-eye-slash bgcolor-wh"></i>
</div>
<div v-if="((( optAllNsfw || issue.sensitive ) && !issue.media_opened ) || false === issue.media_opened ) && 0 != issue.media_attachments" class="media-wrapper bluesheet" v-on:click="updateMediaWrapper(issue, true);">
<h4 v-if="issue.sensitive">Sensitive contents</h4>
<h4 v-else>Media contents</h4>
<small>Click to view</small>
</div>
</div>
<a v-if="!issue.caught_katsufilter && null != issue.card" class="flex center card" :href="https://sumire.work/kktjs/issue.card.url" target="_blank" rel="noopener noreferrer">
<img v-if="null != issue.card.image" :src="https://sumire.work/kktjs/issue.card.image" onerror="this.src=IMG_DUMMY">
<div class="detail-content hidden">
<span>{{issue.card.title}}</span><br>
<small>{{formatDomain(issue.card)}}</small>
</div>
</a>
<div class="action-bar flex end">
<div class="hidden nodot">
<i v-on:click="runBookmark(issue);" class="fa fa-fw fa-paperclip"></i>
<small class="time">{{formatDate(issue.created_at)}}</small>
</div>
<i v-on:click="runReply(issue);" class="fa fa-fw fa-reply"></i>
<i v-if="issue.req_reblog" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="'direct' == issue.visibility || 'private' == issue.visibility" class="fa fa-fw fa-retweet color-disable"></i>
<i v-else-if="issue.reblogged" v-on:click="actUnReblog(issue);" class="fa fa-fw fa-retweet color-on"></i>
<i v-else v-on:click="actReblog(issue);" class="fa fa-fw fa-retweet"></i>
<i v-if="issue.req_favourite" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="issue.favourited" v-on:click="actUnFav(issue);" class="fa fa-fw fa-star color-on"></i>
<i v-else v-on:click="actFav(issue);" class="fa fa-fw fa-star"></i>
<i v-if="checkKatsuChain(issue)" v-on:click="runDetail(issue.id);" class="fa fa-fw fa-comments-o"></i>
<i v-else v-on:click="runDetail(issue.id);" class="fa fa-fw fa-comment-o"></i>
<i v-on:click="runAcct(issue.account.id);" class="fa fa-fw fa-user-circle-o"></i>
</div>
</div>
</div>
<div class="status-header flex end">
<small v-if="issue.application && showDebugVia">
via <a :href="https://sumire.work/kktjs/issue.application.website" target="_blank" rel="noopener noreferrer">{{issue.application.name}} </a>
</small>
</div>
<div class="status-header flex end">
<small v-if="formatDomain(issue.account) != repository">
from <a :href="https://sumire.work/kktjs/'//'%20issue.account.domain" target="_blank" rel="noopener noreferrer">{{formatDomain(issue.account)}}</a>
</small>
</div>
</div>
</div>

<div v-else-if="'List' == multi_type && hasMulti" class="status-list">
<div v-for="(issue, index) in multis" v-if="multi_unread <= index" class="status-wrapper" :class="issue.visibility">
<div v-if="null != issue.reblog" class="status-header flex start">
<i class="fa fa-fw fa-retweet color-on"></i>
<span v-if="issue.loading_avatar" class="avatar border notif" v-on:click="runAcct(issue.account.id);"></span>
<img v-lese :src="https://sumire.work/kktjs/checkAvatar(issue.account.avatar_static)" class="avatar border notif" v-on:click="runAcct(issue.account.id);" onerror="this.src=IMG_DUMMY">
<div class="hidden full">
<div>
<span v-if="checkDisplayName(issue.account.display_name)" class="color-pk" v-html="formatEmoji(issue.account.display_name, issue.account.emojis)"></span>
<span v-else class="color-pk">{{issue.account.username}}</span>
<small class="color-gr">‭@{{issue.account.acct}}</small>
</div>
<div class="status-name flex start">
<div class="hidden">
<span> reblog</span>
</div>
<span class="status-info color-gr">({{formatDate(issue.created_at)}})</span>
</div>
</div>
</div>

<div v-if="null != issue.reblog" class="status flex">
<span v-if="issue.loading_avatar" class="avatar border" v-on:click="runAcct(issue.account.id);"></span>
<img v-else :src="https://sumire.work/kktjs/checkAvatar(issue.reblog.account.avatar_static)" class="avatar border" v-on:click="runAcct(issue.reblog.account.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(issue.reblog.account.display_name)" class="color-pk" v-html="formatEmoji(issue.reblog.account.display_name, issue.reblog.account.emojis)"></a>
<a v-else class="color-pk">{{issue.reblog.account.username}}</a>
<small>‭@{{issue.reblog.account.acct}}</small>
</div>
<small v-if="'public' != issue.reblog.visibility">[{{issue.reblog.visibility}}]</small>
<small v-if="!optSimple && issue.reblog.sensitive" class="status-info"><i class="fa fa-fw fa-exclamation-triangle"></i></small>
</div>
<div class="status-text">
<span v-html="formatSpoiler(issue.reblog.spoiler_text, issue.reblog.emojis)"></span>
<div v-if="issue.reblog.spoiler_text">
<div v-if="!issue.reblog.content_opened" class="spoller-link color-wh bgcolor-pk" v-on:click="updateContentWrapper(issue.reblog, true);"><small>- SHOW MORE -</small></div>
<div v-else class="spoller-link color-wh bgcolor" v-on:click="updateContentWrapper(issue.reblog, false);"><small>- SHOW LESS -</small></div>
<span v-if="issue.reblog.content_opened" v-html="formatContent(issue.reblog.content, issue.reblog.emojis)"></span>
</div>
<div v-else>
<span v-html="formatContent(issue.reblog.content, issue.reblog.emojis)"></span>
</div>
</div>
<div v-if="null != issue.reblog.poll && 0 != issue.reblog.poll.options" class="card">
<div v-for="(option, index) in issue.reblog.poll.options" class="option-name flex start">
<div class="hidden full"><span v-html="index+1+'. '+formatEmojiDraft(option.title, issue.reblog.poll.emojis)"></span></div>
<small v-if="issue.reblog.poll.voted || issue.reblog.poll.expired">{{option.votes_count}}票</small>
</div>
<div v-if="issue.reblog.poll.voted || issue.reblog.poll.expired || user.id == issue.reblog.account.id" class="flex center">
<div v-if="user.id != issue.reblog.account.id" class="color-wh bgcolor-disable button full flex wrap">
<small v-if="issue.reblog.poll.expired">Finished</small>
<small v-else>Voted</small>
</div>
</div>
<div v-else class="flex center">
<div v-for="(option, index) in issue.reblog.poll.options" v-if="!issue.reblog.poll.expired" class="full">
<small v-if="isSetVote(issue.reblog.poll, index)" class="color-wh bgcolor-pk button flex wrap" v-on:click="setVote(issue.reblog, index);">{{index+1}}</small>
<small v-else class="color-wh bgcolor button flex wrap" v-on:click="setVote(issue.reblog, index);">{{index+1}}</small>
</div>
<div class="full">
<small v-if="issue.reblog.req_vote" class="color-wh bgcolor-disable button flex wrap"><i class="fa fa-fw fa-spinner fa-pulse"></i></small>
<small v-else-if="!checkVote(issue.reblog.poll)" class="color-wh bgcolor-disable button flex wrap">Vote</small>
<small v-else class="color-wh bgcolor-pk button flex wrap" v-on:click="actVote(issue.reblog);">Vote</small>
</div>
</div>
<div>
<small v-if="issue.reblog.poll.expired">最終結果 計{{issue.reblog.poll.votes_count}}票</small>
<small v-else>投票中 現在{{issue.reblog.poll.votes_count}}票 ({{formatDate(issue.reblog.poll.expires_at)}}まで)</small>
</div>
</div>
<div v-if="0 != issue.reblog.media_attachments" class="media-wrapper bgcolor-gray hidden flex">
<a v-for="media in issue.reblog.media_attachments" @click="modal_media = media;showMedia = true;">
<video v-if="'gifv' == media.type && '2' == optAutoPlay" :src="https://sumire.work/kktjs/media.url" class="media" playsinline muted autoplay loop></video>
<span v-if="issue.loading_media && ('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" class="media"></span>
<img v-else-if="('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" :src="https://sumire.work/kktjs/checkMedia(media.preview_url,%20media.remote_url)" :alt="media.description" :title="media.description" class="media" onerror="this.src=IMG_DUMMY">
<i v-if="'video' == media.type || ('gifv' == media.type && '1' == optAutoPlay)" class="fa fa-fw fa-play-circle-o color-pk"></i>
</a>
</div>
<div v-if="0 != issue.reblog.media_attachments" class="media-wrapper control">
<i v-on:click="updateMediaWrapper(issue.reblog, false);" class="fa fa-fw fa-eye-slash bgcolor-wh"></i>
</div>
<div v-if="((( optAllNsfw || issue.reblog.sensitive ) && !issue.reblog.media_opened ) || false === issue.reblog.media_opened ) && 0 != issue.reblog.media_attachments" class="media-wrapper bluesheet" v-on:click="updateMediaWrapper(issue.reblog, true);">
<h4 v-if="issue.reblog.sensitive">Sensitive contents</h4>
<h4 v-else>Media contents</h4>
<small>Click to view</small>
</div>
<a v-if="null != issue.reblog.card" class="flex center card" :href="https://sumire.work/kktjs/issue.reblog.card.url" target="_blank" rel="noopener noreferrer">
<img v-if="null != issue.reblog.card.image" :src="https://sumire.work/kktjs/issue.reblog.card.image" onerror="this.src=IMG_DUMMY">
<div class="detail-content hidden">
<span>{{issue.reblog.card.title}}</span><br>
<small>{{formatDomain(issue.reblog.card)}}</small>
</div>
</a>
<div class="action-bar flex end">
<div class="hidden nodot">
<i class="fa fa-fw fa-paperclip color-disable"></i>
<small class="time">{{formatDate(issue.reblog.created_at)}}</small>
</div>
<i v-on:click="runReply(issue.reblog);" class="fa fa-fw fa-reply"></i>
<i v-if="issue.reblog.req_reblog" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="'direct' == issue.reblog.visibility || 'private' == issue.reblog.visibility" class="fa fa-fw fa-retweet color-disable"></i>
<i v-else-if="issue.reblog.reblogged" v-on:click="actUnReblog(issue.reblog);" class="fa fa-fw fa-retweet color-on"></i>
<i v-else v-on:click="actReblog(issue.reblog);" class="fa fa-fw fa-retweet"></i>
<i v-if="issue.reblog.req_favourite" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="issue.reblog.favourited" v-on:click="actUnFav(issue.reblog, false);" class="fa fa-fw fa-star color-on"></i>
<i v-else v-on:click="actFav(issue.reblog);" class="fa fa-fw fa-star"></i>
<i v-if="checkKatsuChain(issue.reblog)" v-on:click="runDetail(issue.reblog.id);" class="fa fa-fw fa-comments-o"></i>
<i v-else v-on:click="runDetail(issue.reblog.id);" class="fa fa-fw fa-comment-o"></i>
<i v-on:click="runAcct(issue.reblog.account.id);" class="fa fa-fw fa-user-circle-o"></i>
</div>
</div>
</div>

<div v-else class="status flex">
<span v-if="issue.loading_avatar" class="avatar border" v-on:click="runAcct(issue.account.id);"></span>
<img v-else :src="https://sumire.work/kktjs/checkAvatar(issue.account.avatar_static)" class="avatar border" v-on:click="runAcct(issue.account.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(issue.account.display_name)" class="color-pk" v-html="formatEmoji(issue.account.display_name, issue.account.emojis)"></a>
<a v-else class="color-pk">{{issue.account.username}}</a>
<small>‭@{{issue.account.acct}}</small>
</div>
<small v-if="'public' != issue.visibility">[{{issue.visibility}}]</small>
<small v-if="!optSimple && issue.sensitive" class="status-info"><i class="fa fa-fw fa-exclamation-triangle"></i></small>
</div>
<div class="status-text">
<span v-html="formatSpoiler(issue.spoiler_text, issue.emojis)"></span>
<div v-if="issue.spoiler_text">
<div v-if="!issue.content_opened" class="spoller-link color-wh bgcolor-pk" v-on:click="updateContentWrapper(issue, true);"><small>- SHOW MORE -</small></div>
<div v-else class="spoller-link color-wh bgcolor" v-on:click="updateContentWrapper(issue, false);"><small>- SHOW LESS -</small></div>
<span v-show="issue.content_opened" v-html="formatContent(issue.content, issue.emojis)"></span>
</div>
<div v-else>
<span v-html="formatContent(issue.content, issue.emojis)"></span>
</div>
</div>
<div v-if="null != issue.poll && 0 != issue.poll.options" class="card">
<div v-for="(option, index) in issue.poll.options" class="option-name flex start">
<div class="hidden full"><span v-html="index+1+'. '+formatEmojiDraft(option.title, issue.poll.emojis)"></span></div>
<small v-if="issue.poll.voted || issue.poll.expired">{{option.votes_count}}票</small>
</div>
<div v-if="issue.poll.voted || issue.poll.expired || user.id == issue.account.id" class="flex center">
<div v-if="user.id != issue.account.id" class="color-wh bgcolor-disable button full flex wrap">
<small v-if="issue.poll.expired">Finished</small>
<small v-else>Voted</small>
</div>
 </div>
<div v-else class="flex center">
<div v-for="(option, index) in issue.poll.options" v-if="!issue.poll.expired" class="full">
<small v-if="isSetVote(issue.poll, index)" class="color-wh bgcolor-pk button flex wrap" v-on:click="setVote(issue, index);">{{index+1}}</small>
<small v-else class="color-wh bgcolor button flex wrap" v-on:click="setVote(issue, index);">{{index+1}}</small>
</div>
<div class="full">
<small v-if="issue.req_vote" class="color-wh bgcolor-disable button flex wrap"><i class="fa fa-fw fa-spinner fa-pulse"></i></small>
<small v-else-if="!checkVote(issue.poll)" class="color-wh bgcolor-disable button flex wrap">Vote</small>
<small v-else class="color-wh bgcolor-pk button flex wrap" v-on:click="actVote(issue);">Vote</small>
</div>
</div>
<div>
<small v-if="issue.poll.expired">最終結果 計{{issue.poll.votes_count}}票</small>
<small v-else>投票中 現在{{issue.poll.votes_count}}票 ({{formatDate(issue.poll.expires_at)}}まで)</small>
</div>
</div>
<div v-if="0 != issue.media_attachments" class="media-wrapper bgcolor-gray hidden flex">
<a v-for="media in issue.media_attachments" @click="modal_media = media;showMedia = true;">
<video v-if="'gifv' == media.type && '2' == optAutoPlay" :src="https://sumire.work/kktjs/media.url" class="media" playsinline muted autoplay loop></video>
<span v-if="issue.loading_media && ('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" class="media"></span>
<img v-else-if="('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" :src="https://sumire.work/kktjs/checkMedia(media.preview_url,%20media.remote_url)" :alt="media.description" :title="media.description" class="media" onerror="this.src=IMG_DUMMY">
<i v-if="'video' == media.type || ('gifv' == media.type && '1' == optAutoPlay)" class="fa fa-fw fa-play-circle-o color-pk"></i>
</a>
</div>
<div v-if="0 != issue.media_attachments" class="media-wrapper control">
<i v-on:click="updateMediaWrapper(issue, false);" class="fa fa-fw fa-eye-slash bgcolor-wh"></i>
</div>
<div v-if="((( optAllNsfw || issue.sensitive ) && !issue.media_opened ) || false === issue.media_opened ) && 0 != issue.media_attachments" class="media-wrapper bluesheet" v-on:click="updateMediaWrapper(issue, true);">
<h4 v-if="issue.sensitive">Sensitive contents</h4>
<h4 v-else>Media contents</h4>
<small>Click to view</small>
</div>
<a v-if="null != issue.card" class="flex center card" :href="https://sumire.work/kktjs/issue.card.url" target="_blank" rel="noopener noreferrer">
<img v-if="null != issue.card.image" :src="https://sumire.work/kktjs/issue.card.image" onerror="this.src=IMG_DUMMY">
<div class="detail-content hidden">
<span>{{issue.card.title}}</span><br>
<small>{{formatDomain(issue.card)}}</small>
</div>
</a>
<div class="action-bar flex end">
<div class="hidden nodot">
<i v-on:click="runBookmark(issue);" class="fa fa-fw fa-paperclip"></i>
<small class="time">{{formatDate(issue.created_at)}}</small>
</div>
<i v-on:click="runReply(issue);" class="fa fa-fw fa-reply"></i>
<i v-if="issue.req_reblog" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="'direct' == issue.visibility || 'private' == issue.visibility" class="fa fa-fw fa-retweet color-disable"></i>
<i v-else-if="issue.reblogged" v-on:click="actUnReblog(issue);" class="fa fa-fw fa-retweet color-on"></i>
<i v-else v-on:click="actReblog(issue);" class="fa fa-fw fa-retweet"></i>
<i v-if="issue.req_favourite" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="issue.favourited" v-on:click="actUnFav(issue, false);" class="fa fa-fw fa-star color-on"></i>
<i v-else v-on:click="actFav(issue);" class="fa fa-fw fa-star"></i>
<i v-if="checkKatsuChain(issue)" v-on:click="runDetail(issue.id);" class="fa fa-fw fa-comments-o"></i>
<i v-else v-on:click="runDetail(issue.id);" class="fa fa-fw fa-comment-o"></i>
<i v-on:click="runAcct(issue.account.id);" class="fa fa-fw fa-user-circle-o"></i>
</div>
</div>
</div>
</div>
</div>

<div v-else-if="'Discord' == multi_type && hasMulti" class="status-list">
<div v-for="(issue, index) in discords" v-if="discord_unread <= index" class="status-wrapper" :class="issue.visibility">
<div class="status flex">
<span v-if="issue.loading_avatar" class="avatar border"></span>
<img v-else :src="https://sumire.work/kktjs/checkAvatarDiscord(issue.author)" class="avatar border" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a class="color-pk">{{issue.author.username}}</a>
<small>‭#{{issue.author.discriminator}}</small>
</div>
<span class="status-info color-gr"> {{formatDate(issue.timestamp)}}</span>
</div>
<div class="status-text">
<div>
<span v-html="formatContent(issue.content, issue.emojis)"></span>
</div>
</div>
</div>
</div>
</div>
</div>
<div v-else-if="'Hashtag' == multi_type || 'List' == multi_type || 'Discord' == multi_type">
<div v-if="'open' != connMulti || fetch_lock.multi" class="flex info-wrapper">Initializing...</div>
</div>
<div v-else>
<div class="flex">
<span class="button color-wh bgcolor-pk" v-on:click="toggleStream();"><i class="fa fa-fw fa-exchange"></i> Select Stream</span>
</div>
</div>
<div v-if="'Stream' != multi_type" class="flex info-wrapper">
<span v-if="fetch_lock.multi"><i class="fa fa-fw fa-spinner fa-pulse"></i>Katsu Loading...</span>
<span v-else-if="fetch_comp.multi">All Loaded</span>
<span v-else>TouchEnd to Load Next</span>
</div>
</div>
<div class="flex column-footer">
<i class="fa fa-fw fa-angle-double-up" v-on:click="upMulti();"></i>
<i class="fa fa-fw fa-angle-up" v-on:click="backMulti();"></i>
<i class="fa fa-fw fa-angle-down" v-on:click="nextMulti();"></i>
</div>
</div>

<div v-if="showDetail" class="column bgcolor-gray" :class="{ full: optColumnWide && '1' == optColumns }">
<div class="column-header">
<div class="flex">
<div class="hidden full">
<i class="fa fa-fw fa-comment"></i>Detail <small v-if="!optSimple">(id:{{detail_targetid}})</small>
</div>
<span class="column-option">
<i v-if="!fetch_watch.detail && !fetch_watch.detail_chain && !fetch_watch.detail_fav && !fetch_watch.detail_reblog" v-on:click="runDetail(detail_targetid);" class="fa fa-fw fa-refresh"></i>
<i v-else class="fa fa-fw fa-spin fa-refresh color-disable"></i>
</span>
</div>
</div>
<div class="scrollable">

<div v-if="hasDetail && !fetch_watch.detail_chain && !fetch_watch.detail_fav && !fetch_watch.detail_reblog" class="status-list">
<div v-for="(issue, index) in detail_chain.ancestors" class="status flex">
<img :src="https://sumire.work/kktjs/checkAvatar(issue.account.avatar_static)" class="avatar border" v-on:click="runAcct(issue.account.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(issue.account.display_name)" class="color-pk" v-html="formatEmoji(issue.account.display_name, issue.account.emojis)"></a>
<a v-else class="color-pk">{{issue.account.username}}</a>
<small>‭@{{issue.account.acct}}</small>
</div>
<small v-if="'public' != issue.visibility">[{{issue.visibility}}]</small>
<small v-if="!optSimple && issue.sensitive" class="status-info"><i class="fa fa-fw fa-exclamation-triangle"></i></small>
</div>
<div class="status-text">
<span v-html="formatSpoiler(issue.spoiler_text, issue.emojis)"></span>
<div v-if="issue.spoiler_text">
<div v-if="!issue.content_opened" class="spoller-link color-wh bgcolor-pk" v-on:click="updateContentWrapper(issue, true);"><small>- SHOW MORE -</small></div>
<div v-else class="spoller-link color-wh bgcolor" v-on:click="updateContentWrapper(issue, false);"><small>- SHOW LESS -</small></div>
<span v-if="issue.content_opened" v-html="formatContent(issue.content, issue.emojis)"></span>
</div>
<div v-else>
<span v-html="formatContent(issue.content, issue.emojis)"></span>
</div>
</div>
<div v-if="null != issue.poll && 0 != issue.poll.options" class="card">
<div v-for="(option, index) in issue.poll.options" class="option-name flex start">
<div class="hidden full"><span v-html="index+1+'. '+formatEmojiDraft(option.title, issue.poll.emojis)"></span></div>
<small v-if="issue.poll.voted || issue.poll.expired">{{option.votes_count}}票</small>
</div>
<div v-if="issue.poll.voted || issue.poll.expired || user.id == issue.account.id" class="flex center">
<div v-if="user.id != issue.account.id" class="color-wh bgcolor-disable button full flex wrap">
<small v-if="issue.poll.expired">Finished</small>
<small v-else>Voted</small>
</div>
</div>
<div v-else class="flex center">
<div v-for="(option, index) in issue.poll.options" v-if="!issue.poll.expired" class="full">
<small v-if="isSetVote(issue.poll, index)" class="color-wh bgcolor-pk button flex wrap" v-on:click="setVote(issue, index);">{{index+1}}</small>
<small v-else class="color-wh bgcolor button flex wrap" v-on:click="setVote(issue, index);">{{index+1}}</small>
</div>
<div class="full">
<small v-if="issue.req_vote" class="color-wh bgcolor-disable button flex wrap"><i class="fa fa-fw fa-spinner fa-pulse"></i></small>
<small v-else-if="!checkVote(issue.poll)" class="color-wh bgcolor-disable button flex wrap">Vote</small>
<small v-else class="color-wh bgcolor-pk button flex wrap" v-on:click="actVote(issue);">Vote</small>
</div>
</div>
<div>
<small v-if="issue.poll.expired">最終結果 計{{issue.poll.votes_count}}票</small>
<small v-else>投票中 現在{{issue.poll.votes_count}}票 ({{formatDate(issue.poll.expires_at)}}まで)</small>
</div>
</div>
<div v-if="0 != issue.media_attachments" class="media-wrapper bgcolor-gray hidden flex">
<a v-for="media in issue.media_attachments" @click="modal_media = media;showMedia = true;">
<video v-if="'gifv' == media.type && '2' == optAutoPlay" :src="https://sumire.work/kktjs/media.url" class="media" playsinline muted autoplay loop></video>
<img v-if="('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" :src="https://sumire.work/kktjs/checkMedia(media.preview_url,%20media.remote_url)" :alt="media.description" :title="media.description" class="media" onerror="this.src=IMG_DUMMY">
<i v-if="'video' == media.type || ('gifv' == media.type && '1' == optAutoPlay)" class="fa fa-fw fa-play-circle-o color-pk"></i>
</a>
</div>
 <div v-if="0 != issue.media_attachments" class="media-wrapper control">
<i v-on:click="updateMediaWrapper(issue, false);" class="fa fa-fw fa-eye-slash bgcolor-wh"></i>
</div>
<div v-if="(( issue.sensitive && !issue.media_opened ) || false === issue.media_opened ) && 0 != issue.media_attachments" class="media-wrapper bluesheet" v-on:click="updateMediaWrapper(issue, true);">
<h4 v-if="issue.sensitive">Sensitive contents</h4>
<h4 v-else>Media contents</h4>
<small>Click to view</small>
</div>
<a v-if="null != issue.card" class="flex center card" :href="https://sumire.work/kktjs/issue.card.url" target="_blank" rel="noopener noreferrer">
<img v-if="null != issue.card.image" :src="https://sumire.work/kktjs/issue.card.image" onerror="this.src=IMG_DUMMY">
<div class="detail-content hidden">
<span>{{issue.card.title}}</span><br>
<small>{{formatDomain(issue.card)}}</small>
</div>
</a>
<div class="action-bar flex end">
<div class="hidden nodot">
<i v-if="issue.req_pin" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="issue.pinned" v-on:click="actUnPin(issue);" class="fa fa-fw fa-thumb-tack"></i>
<i v-else-if="issue.account.id == user.id && 'direct' != issue.visibility && 'private' != issue.visibility" v-on:click="actPin(issue);" class="fa fa-fw fa-thumb-tack fa-rotate-270"></i>
<i v-else v-on:click="runBookmark(issue);" class="fa fa-fw fa-paperclip"></i>
<small class="time">{{formatDate(issue.created_at)}}</small>
</div>
<i v-on:click="runReply(issue);" class="fa fa-fw fa-reply"></i>
<i v-if="issue.req_reblog" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="'direct' == issue.visibility || 'private' == issue.visibility" class="fa fa-fw fa-retweet color-disable"></i>
<i v-else-if="issue.reblogged" v-on:click="actUnReblog(issue);" class="fa fa-fw fa-retweet color-on"></i>
<i v-else v-on:click="actReblog(issue);" class="fa fa-fw fa-retweet"></i>
<i v-if="issue.req_favourite" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="issue.favourited" v-on:click="actUnFav(issue);" class="fa fa-fw fa-star color-on"></i>
<i v-else v-on:click="actFav(issue);" class="fa fa-fw fa-star"></i>
<i v-if="checkKatsuChain(issue)" v-on:click="runDetail(issue.id);" class="fa fa-fw fa-comments-o"></i>
<i v-else v-on:click="runDetail(issue.id);" class="fa fa-fw fa-comment-o"></i>
<i v-on:click="runAcct(issue.account.id);" class="fa fa-fw fa-user-circle-o"></i>
</div>
</div>
</div>
</div>

<div v-if="hasDetail" class="status-list">
<div class="status flex">
<img :src="https://sumire.work/kktjs/checkAvatar(detail.account.avatar_static)" class="avatar border" v-on:click="runAcct(detail.account.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(detail.account.display_name)" class="color-pk" v-html="formatEmoji(detail.account.display_name, detail.account.emojis)"></a>
<a v-else class="color-pk">{{detail.account.username}}</a>
<small>‭@{{detail.account.acct}}</small>
</div>
<small v-if="detail.account.locked"><i class="fa fa-fw fa-lock"></i></small>
<small v-if="detail.account.bot" class="status-info">[Bot]</small>
<small>[{{detail.visibility}}]</small>
<small v-if="!optSimple && detail.sensitive" class="status-info"><i class="fa fa-fw fa-exclamation-triangle"></i></small>
</div>
<div class="detail-time flex end">
</div>
<div class="status-text">
<span v-html="formatSpoiler(detail.spoiler_text, detail.emojis)"></span>
<div v-if="detail.spoiler_text">
<div v-if="!detail.content_opened" class="spoller-link color-wh bgcolor-pk" v-on:click="updateContentWrapper(detail, true);"><small>- SHOW MORE -</small></div>
<div v-else class="spoller-link color-wh bgcolor" v-on:click="updateContentWrapper(detail, false);"><small>- SHOW LESS -</small></div>
<span v-if="detail.content_opened" v-html="formatContent(detail.content, detail.emojis)"></span>
</div>
<div v-else>
<span v-html="formatContent(detail.content, detail.emojis)"></span>
</div>
</div>
<div v-if="null != detail.poll && 0 != detail.poll.options" class="card">
<div v-for="(option, index) in detail.poll.options" class="option-name flex start">
<div class="hidden full"><span v-html="index+1+'. '+formatEmojiDraft(option.title, detail.poll.emojis)"></span></div>
<small v-if="detail.poll.voted || detail.poll.expired">{{option.votes_count}}票</small>
</div>
<div v-if="detail.poll.voted || detail.poll.expired" class="flex center">
<div v-if="user.id != detail.account.id" class="color-wh bgcolor-disable button full flex wrap">
<small v-if="detail.poll.expired">Finished</small>
<small v-else>Voted</small>
</div>
</div>
<div v-else class="flex center">
<div v-for="(option, index) in detail.poll.options" v-if="!detail.poll.expired" class="full">
<small v-if="isSetVote(detail.poll, index)" class="color-wh bgcolor-pk button flex wrap" v-on:click="setVote(detail, index);">{{index+1}}</small>
<small v-else class="color-wh bgcolor button flex wrap" v-on:click="setVote(detail, index);">{{index+1}}</small>
</div>
<div class="full">
<small v-if="detail.req_vote" class="color-wh bgcolor-disable button flex wrap"><i class="fa fa-fw fa-spinner fa-pulse"></i></small>
<small v-else-if="!checkVote(detail.poll)" class="color-wh bgcolor-disable button flex wrap">Vote</small>
<small v-else class="color-wh bgcolor-pk button flex wrap" v-on:click="actVote(detail);">Vote</small>
</div>
</div>
<div>
<small v-if="detail.poll.expired">最終結果 計{{detail.poll.votes_count}}票</small>
<small v-else>投票中 現在{{detail.poll.votes_count}}票 ({{formatDate(detail.poll.expires_at)}}まで)</small>
</div>
</div>
<div v-if="0 != detail.media_attachments" class="media-wrapper bgcolor-gray hidden flex">
<a v-for="media in detail.media_attachments" @click="modal_media = media;showMedia = true;">
<video v-if="'gifv' == media.type && '2' == optAutoPlay" :src="https://sumire.work/kktjs/media.url" class="media" playsinline muted autoplay loop></video>
<img v-if="('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" :src="https://sumire.work/kktjs/checkMedia(media.preview_url,%20media.remote_url)" :alt="media.description" :title="media.description" class="media" onerror="this.src=IMG_DUMMY">
<i v-if="'video' == media.type || ('gifv' == media.type && '1' == optAutoPlay)" class="fa fa-fw fa-play-circle-o color-pk"></i>
</a>
</div>
<div v-if="0 != detail.media_attachments" class="media-wrapper control">
<i v-on:click="updateMediaWrapper(detail, false);" class="fa fa-fw fa-eye-slash bgcolor-wh"></i>
</div>
<div v-if="(( detail.sensitive && !detail.media_opened ) || false === detail.media_opened ) && 0 != detail.media_attachments" class="media-wrapper bluesheet" v-on:click="updateMediaWrapper(detail, true);">
<h4 v-if="detail.sensitive">Sensitive contents</h4>
<h4 v-else>Media contents</h4>
<small>Click to view</small>
</div>
<div v-if="0 != detail.media_attachments.length" class="action-bar flex end">
<div class="full hidden nodot">
<small>media links:</small>
<span v-for="media in detail.media_attachments">
<a v-if="null != media.remote_url" :href="https://sumire.work/kktjs/media.remote_url" rel="nofollow noopener" target="_blank">
<i v-if="'video' == media.type || 'gifv' == media.type" class="fa fa-fw fa-file-video-o color-gr"></i>
<i v-else class="fa fa-fw fa-file-image-o color-gr"></i>
</a>
<a v-else :href="https://sumire.work/kktjs/media.url" rel="nofollow noopener" target="_blank">
<i v-if="'video' == media.type || 'gifv' == media.type" class="fa fa-fw fa-file-video-o color-gr"></i>
<i v-else class="fa fa-fw fa-file-image-o color-gr"></i>
</a>
</span>
</div>
</div>
<a v-if="null != detail.card" class="flex center card" :href="https://sumire.work/kktjs/detail.card.url" target="_blank" rel="noopener noreferrer">
<img v-if="null != detail.card.image" :src="https://sumire.work/kktjs/detail.card.image" onerror="this.src=IMG_DUMMY">
<div class="detail-content hidden">
<span>{{detail.card.title}}</span><br>
<small>{{formatDomain(detail.card)}}</small>
</div>
</a>
<div v-if="!fetch_watch.detail_chain && !fetch_watch.detail_fav && !fetch_watch.detail_reblog" class="detail-bar flex end">
<div>
<div class="detail-select"><i class="fa fa-fw fa-retweet"></i><small>{{detail_reblog.length}}</small></div>
<img v-for="account in detail_reblog" :src="https://sumire.work/kktjs/checkAvatar(account.avatar_static)" v-on:click="runAcct(account.id);" class="avatar mini" onerror="this.src=IMG_DUMMY">
</div>
<div>
<div class="detail-select"><i class="fa fa-fw fa-star"></i><small>{{detail_fav.length}}</small></div>
<img v-for="account in detail_fav" :src="https://sumire.work/kktjs/checkAvatar(account.avatar_static)" v-on:click="runAcct(account.id);" class="avatar mini" onerror="this.src=IMG_DUMMY">
</div>
</div>
<div class="action-bar flex end wrap">
<div class="">
<i v-if="detail.req_pin" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="detail.pinned" v-on:click="actUnPin(detail);" class="fa fa-fw fa-thumb-tack"></i>
<i v-else-if="detail.account.id == user.id && 'direct' != detail.visibility && 'private' != detail.visibility" v-on:click="actPin(detail);" class="fa fa-fw fa-thumb-tack fa-rotate-270"></i>
<i v-else v-on:click="runBookmark(detail);" class="fa fa-fw fa-paperclip"></i>
<small class="time">{{formatDateFull(detail.created_at)}}</small>
</div>
<div class="action-bar flex end">
 <dummy></dummy>
<i v-on:click="runReply(detail);" class="fa fa-fw fa-reply"></i>
<i v-if="detail.req_reblog" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="'direct' == detail.visibility || 'private' == detail.visibility" class="fa fa-fw fa-retweet color-disable"></i>
<i v-else-if="detail.reblogged" v-on:click="actUnReblog(detail);" class="fa fa-fw fa-retweet color-on"></i>
<i v-else v-on:click="actReblog(detail);" class="fa fa-fw fa-retweet"></i>
<i v-if="detail.req_favourite" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="detail.favourited" v-on:click="actUnFav(detail);" class="fa fa-fw fa-star color-on"></i>
<i v-else v-on:click="actFav(detail);" class="fa fa-fw fa-star"></i>
<i v-if="detail.req_delete || detail.req_report" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="user.id == detail.account.id" v-on:click="actDelete(detail);" class="fa fa-fw fa-trash"></i>
<i v-else v-on:click="actReport(detail);" class="fa fa-fw fa-exclamation-circle"></i>
<i v-on:click="runAcct(detail.account.id);" class="fa fa-fw fa-user-circle-o"></i>
</div>
</div>
</div>
</div>
<div class="flex account-bar">
</div>
<div class="status-header flex end">
<small v-if="detail.application">
via <a :href="https://sumire.work/kktjs/detail.application.website" target="_blank" rel="noopener noreferrer">{{detail.application.name}}</a>
</small>
</div>
<div class="status-header flex end">
<small v-if="formatDomain(detail.account) != repository">
from <a :href="https://sumire.work/kktjs/'//'%20detail.account.domain" target="_blank" rel="noopener noreferrer">{{formatDomain(detail.account)}}</a>
</small>
</div>
</div>

<div v-if="hasDetail && !fetch_watch.detail_chain && !fetch_watch.detail_fav && !fetch_watch.detail_reblog" class="status-list">
<div v-for="(issue, index) in detail_chain.descendants" class="status flex">
<img :src="https://sumire.work/kktjs/checkAvatar(issue.account.avatar_static)" class="avatar border" v-on:click="runAcct(issue.account.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(issue.account.display_name)" class="color-pk" v-html="formatEmoji(issue.account.display_name, issue.account.emojis)"></a>
<a v-else class="color-pk">{{issue.account.username}}</a>
<small>‭@{{issue.account.acct}}</small>
</div>
<small v-if="'public' != issue.visibility">[{{issue.visibility}}]</small>
<small v-if="!optSimple && issue.sensitive" class="status-info"><i class="fa fa-fw fa-exclamation-triangle"></i></small>
</div>
<div class="status-text">
<span v-html="formatSpoiler(issue.spoiler_text, issue.emojis)"></span>
<div v-if="issue.spoiler_text">
<div v-if="!issue.content_opened" class="spoller-link color-wh bgcolor-pk" v-on:click="updateContentWrapper(issue, true);"><small>- SHOW MORE -</small></div>
<div v-else class="spoller-link color-wh bgcolor" v-on:click="updateContentWrapper(issue, false);"><small>- SHOW LESS -</small></div>
<span v-if="issue.content_opened" v-html="formatContent(issue.content, issue.emojis)"></span>
</div>
<div v-else>
<span v-html="formatContent(issue.content, issue.emojis)"></span>
</div>
</div>
<div v-if="null != issue.poll && 0 != issue.poll.options" class="card">
<div v-for="(option, index) in issue.poll.options" class="option-name flex start">
<div class="hidden full"><span v-html="index+1+'. '+formatEmojiDraft(option.title, issue.poll.emojis)"></span></div>
<small v-if="issue.poll.voted || issue.poll.expired">{{option.votes_count}}票</small>
</div>
<div v-if="issue.poll.voted || issue.poll.expired || user.id == issue.account.id" class="flex center">
<div v-if="user.id != issue.account.id" class="color-wh bgcolor-disable button full flex wrap">
<small v-if="issue.poll.expired">Finished</small>
<small v-else>Voted</small>
</div>
</div>
<div v-else class="flex center">
<div v-for="(option, index) in issue.poll.options" v-if="!issue.poll.expired" class="full">
<small v-if="isSetVote(issue.poll, index)" class="color-wh bgcolor-pk button flex wrap" v-on:click="setVote(issue, index);">{{index+1}}</small>
<small v-else class="color-wh bgcolor button flex wrap" v-on:click="setVote(issue, index);">{{index+1}}</small>
</div>
<div class="full">
<small v-if="issue.req_vote" class="color-wh bgcolor-disable button flex wrap"><i class="fa fa-fw fa-spinner fa-pulse"></i></small>
<small v-else-if="!checkVote(issue.poll)" class="color-wh bgcolor-disable button flex wrap">Vote</small>
<small v-else class="color-wh bgcolor-pk button flex wrap" v-on:click="actVote(issue);">Vote</small>
</div>
</div>
<div>
<small v-if="issue.poll.expired">最終結果 計{{issue.poll.votes_count}}票</small>
<small v-else>投票中 現在{{issue.poll.votes_count}}票 ({{formatDate(issue.poll.expires_at)}}まで)</small>
</div>
</div>
<div v-if="0 != issue.media_attachments" class="media-wrapper bgcolor-gray hidden flex">
<a v-for="media in issue.media_attachments" @click="modal_media = media;showMedia = true;">
<video v-if="'gifv' == media.type && '2' == optAutoPlay" :src="https://sumire.work/kktjs/media.url" class="media" playsinline muted autoplay loop></video>
<img v-if="('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" :src="https://sumire.work/kktjs/checkMedia(media.preview_url,%20media.remote_url)" :alt="media.description" :title="media.description" class="media" onerror="this.src=IMG_DUMMY">
<i v-if="'video' == media.type || ('gifv' == media.type && '1' == optAutoPlay)" class="fa fa-fw fa-play-circle-o color-pk"></i>
</a>
</div>
<div v-if="0 != issue.media_attachments" class="media-wrapper control">
<i v-on:click="updateMediaWrapper(issue, false);" class="fa fa-fw fa-eye-slash bgcolor-wh"></i>
</div>
<div v-if="(( issue.sensitive && !issue.media_opened ) || false === issue.media_opened ) && 0 != issue.media_attachments" class="media-wrapper bluesheet" v-on:click="updateMediaWrapper(issue, true);">
<h4 v-if="issue.sensitive">Sensitive contents</h4>
<h4 v-else>Media contents</h4>
<small>Click to view</small>
</div>
<a v-if="null != issue.card" class="flex center card" :href="https://sumire.work/kktjs/issue.card.url" target="_blank" rel="noopener noreferrer">
<img v-if="null != issue.card.image" :src="https://sumire.work/kktjs/issue.card.image" onerror="this.src=IMG_DUMMY">
<div class="detail-content hidden">
<span>{{issue.card.title}}</span><br>
<small>{{formatDomain(issue.card)}}</small>
</div>
</a>
<div class="action-bar flex end">
<div class="hidden nodot">
<i v-if="issue.req_pin" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="issue.pinned" v-on:click="actUnPin(issue);" class="fa fa-fw fa-thumb-tack"></i>
<i v-else-if="issue.account.id == user.id && 'direct' != issue.visibility && 'private' != issue.visibility" v-on:click="actPin(issue);" class="fa fa-fw fa-thumb-tack fa-rotate-270"></i>
<i v-else v-on:click="runBookmark(issue);" class="fa fa-fw fa-paperclip"></i>
<small class="time">{{formatDate(issue.created_at)}}</small>
</div>
<i v-on:click="runReply(issue);" class="fa fa-fw fa-reply"></i>
<i v-if="issue.req_reblog" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="'direct' == issue.visibility || 'private' == issue.visibility" class="fa fa-fw fa-retweet color-disable"></i>
<i v-else-if="issue.reblogged" v-on:click="actUnReblog(issue);" class="fa fa-fw fa-retweet color-on"></i>
<i v-else v-on:click="actReblog(issue);" class="fa fa-fw fa-retweet"></i>
<i v-if="issue.req_favourite" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="issue.favourited" v-on:click="actUnFav(issue);" class="fa fa-fw fa-star color-on"></i>
<i v-else v-on:click="actFav(issue);" class="fa fa-fw fa-star"></i>
<i v-if="checkKatsuChain(issue)" v-on:click="runDetail(issue.id);" class="fa fa-fw fa-comments-o"></i>
<i v-else v-on:click="runDetail(issue.id);" class="fa fa-fw fa-comment-o"></i>
<i v-on:click="runAcct(issue.account.id);" class="fa fa-fw fa-user-circle-o"></i>
</div>
</div>
</div>
</div>
<div v-else>
<div v-if="fetch_watch.detail" class="flex">Initializing...</div>
</div>
<div class="flex info-wrapper">
<span v-if="fetch_watch.detail || fetch_watch.detail_chain"><i class="fa fa-fw fa-spinner fa-pulse"></i>Katsu Loading...</span>
<span v-else-if="fetch_watch.detail_fav || fetch_watch.detail_reblog"><i class="fa fa-fw fa-spinner fa-pulse"></i>Account Loading...</span>
</div>
</div>
</div>

<div v-if="showAcct" class="column bgcolor-gray" :class="{ full: optColumnWide && '1' == optColumns }">
<div class="column-header">
<div class="flex">
<div class="hidden full">
<i class="fa fa-fw fa-user-circle-o"></i>Account <small v-if="!optSimple">(id:{{acct_targetid}})</small>
</div>
<span class="column-option">
<i v-if="!fetch_watch.acct_profile && !fetch_watch.acct_profile_rel && !fetch_watch.acct_profile_pin && !fetch_watch.acct_profile_req" v-on:click="runAcct(acct_targetid);" class="fa fa-fw fa-refresh"></i>
<i v-else class="fa fa-fw fa-spin fa-refresh color-disable"></i>
</span>
</div>
</div>
<div class="scrollable" id="acct" v-on:scroll="handleScrollAcct">
<div v-if="hasAcctProfile && !fetch_watch.acct_profile && !fetch_watch.acct_profile_rel && !fetch_watch.acct_profile_pin && !fetch_watch.acct_profile_req" class="account-info">
<div v-if="isMyAcct && user_requesting_count > 0" v-on:click="resetAcctColumn();fetchAcctFollowRequest();" class="button mini color-wh bgcolor-pk"><i class="fa fa-fw fa-info-circle"></i>Follow Request: {{user_requesting_count}}</div>
<div v-if="!checkHeader(acct.header)" class="acct-header-wrapper">
<img :src="https://sumire.work/kktjs/acct.header" class="media-header" onerror="this.src=IMG_DUMMY">
</div>
<div class="flex">
<img :src="https://sumire.work/kktjs/checkAvatar(acct.avatar)" class="avatar" onerror="this.src=IMG_DUMMY">
<div class="content">
<div class="status-name flex start color-gr">
<div class="hidden full">
<input v-if="isMyAcct && showAcctEdit" type="text" class="underline-dash" v-model="profile.name">
<a v-else-if="checkDisplayName(acct.display_name)" class="color-pk" v-html="formatEmoji(acct.display_name, acct.emojis)"></a>
<a v-else class="color-pk">{{acct.username}}</a>
<small>‭@{{acct.acct}}</small>
<input v-if="isMyAcct && showAcctEdit" type="text" class="underline-dash name-hack" v-model="profile.name_b">
</div>
<span v-if="acct.locked"><i class="fa fa-fw fa-lock"></i></span>
<span v-if="acct.bot"><small>[Bot]</small></span>
</div>
<span>{{acct.statuses_count}} </span>Katsu
<div>
<span>{{acct.following_count}} </span>Follow /
<span>{{acct.followers_count}} </span>Follower
</div>
<div v-for="field in acct.fields" class="hidden">
<small v-if="field.verified_at" class="color-on">{{field.name}}<i class="fa fa-fw fa-check-square"></i></small>
<small v-else>{{field.name}}</small>:
<small v-html="field.value"></small>
</div>
<div v-if="user.id != acct_targetid" class="flex end action-bar">
<i v-if="showAcctOption" v-on:click="toggleAcctOption();" class="fa fa-fw fa-caret-up"></i>
<i v-else v-on:click="toggleAcctOption();" class="fa fa-fw fa-caret-down"></i>
<span v-if="acct_relation[0].followed_by">[Follows You] </span>
<span v-if="acct_relation[0].muting"><i class="fa fa-fw fa-microphone-slash"></i></span>
<span v-if="acct.req_follow" class="button mini color-wh bgcolor"><i class="fa fa-fw fa-spinner fa-pulse"></i></span>
<span v-else-if="acct_relation[0].following" v-on:click="actUnFollow(acct);" class="button mini color-wh bgcolor-pk">Following</span>
<span v-else-if="acct_relation[0].requested" class="button mini color-wh bgcolor-disable">Requested</span>
<span v-else-if="acct_relation[0].blocking" class="button mini color-wh bgcolor-disable">Follow</span>
<span v-else v-on:click="actFollow(acct);" class="button mini color-wh bgcolor">Follow</span>
</div>
<div v-if="user.id != acct_targetid && showAcctOption" class="flex end action-bar option topline-dash">
<i v-on:click="runReply(acct);" class="fa fa-fw fa-reply"></i>
<span v-if="acct.req_mute" class="button mini color-wh bgcolor"><i class="fa fa-fw fa-spinner fa-pulse"></i></span>
<span v-else-if="acct_relation[0].muting" v-on:click="actUnMute(acct);" class="button mini color-wh bgcolor-pk">UnMute</span>
<span v-else v-on:click="actMute(acct);" class="button mini color-wh bgcolor">Mute</span>
<span v-if="acct.req_block" class="button mini color-wh bgcolor"><i class="fa fa-fw fa-spinner fa-pulse"></i></span>
<span v-else-if="acct_relation[0].blocking" v-on:click="actUnBlock(acct);" class="button mini color-wh bgcolor-pk">UnBlock</span>
<span v-else v-on:click="actBlock(acct);" class="button mini color-wh bgcolor">Block</span>
</div>
<div v-if="isMyAcct" class="flex end action-bar">
<i v-on:click="toggleSetting();" class="fa fa-fw fa-cog"></i>
<dummy v-if="acct.req_profile"></dummy>
<span v-else-if="!showAcctEdit" v-on:click="toggleAcctEdit();" class="button mini fixed color-wh bgcolor">Edit</span>
<span v-else-if="showAcctEdit" v-on:click="toggleAcctEdit();" class="button mini color-wh bgcolor">Cancel</span>
<span v-if="acct.req_profile" class="button mini color-wh bgcolor"><i class="fa fa-fw fa-spinner fa-pulse"></i></span>
<span v-else-if="showAcctEdit" v-on:click="actProfile();" class="button mini color-wh bgcolor-pk">Save</span>
</div>
</div>
</div>
<div v-if="hasAcctNote" class="flex">
<img :src="https://sumire.work/kktjs/checkAvatar(acct.avatar)" class="avatar border" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-text">
<span v-html="formatContent(acct.note, acct.emojis)"></span>
</div>
</div>
</div>
<div v-for="(issue, index) in acct_pinned" class="status-wrapper" :class="issue.visibility">

<div class="status flex">
<img :src="https://sumire.work/kktjs/checkAvatar(issue.account.avatar_static)" class="avatar border" v-on:click="runAcct(issue.account.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(issue.account.display_name)" class="color-pk" v-html="formatEmoji(issue.account.display_name, issue.account.emojis)"></a>
<a v-else class="color-pk">{{issue.account.username}}</a>
<small>‭@{{issue.account.acct}}</small>
</div>
<small v-if="'public' != issue.visibility">[{{issue.visibility}}]</small>
<small v-if="!optSimple && issue.sensitive" class="status-info"><i class="fa fa-fw fa-exclamation-triangle"></i></small>
</div>
<div class="status-text">
<span v-html="formatSpoiler(issue.spoiler_text, issue.emojis)"></span>
<div v-if="issue.spoiler_text">
<div v-if="!issue.content_opened" class="spoller-link color-wh bgcolor-pk" v-on:click="updateContentWrapper(issue, true);"><small>- SHOW MORE -</small></div>
<div v-else class="spoller-link color-wh bgcolor" v-on:click="updateContentWrapper(issue, false);"><small>- SHOW LESS -</small></div>
<span v-if="issue.content_opened" v-html="formatContent(issue.content, issue.emojis)"></span>
</div>
<div v-else>
<span v-html="formatContent(issue.content, issue.emojis)"></span>
</div>
</div>
<div v-if="null != issue.poll && 0 != issue.poll.options" class="card">
<div v-for="(option, index) in issue.poll.options" class="option-name flex start">
<div class="hidden full"><span v-html="index+1+'. '+formatEmojiDraft(option.title, issue.poll.emojis)"></span></div>
<small v-if="issue.poll.voted || issue.poll.expired">{{option.votes_count}}票</small>
</div>
<div v-if="issue.poll.voted || issue.poll.expired || user.id == issue.account.id" class="flex center">
<div v-if="user.id != issue.account.id" class="color-wh bgcolor-disable button full flex wrap">
<small v-if="issue.poll.expired">Finished</small>
<small v-else>Voted</small>
</div>
</div>
<div v-else class="flex center">
<div v-for="(option, index) in issue.poll.options" v-if="!issue.poll.expired" class="full">
<small v-if="isSetVote(issue.poll, index)" class="color-wh bgcolor-pk button flex wrap" v-on:click="setVote(issue, index);">{{index+1}}</small>
<small v-else class="color-wh bgcolor button flex wrap" v-on:click="setVote(issue, index);">{{index+1}}</small>
</div>
<div class="full">
<small v-if="issue.req_vote" class="color-wh bgcolor-disable button flex wrap"><i class="fa fa-fw fa-spinner fa-pulse"></i></small>
<small v-else-if="!checkVote(issue.poll)" class="color-wh bgcolor-disable button flex wrap">Vote</small>
<small v-else class="color-wh bgcolor-pk button flex wrap" v-on:click="actVote(issue);">Vote</small>
</div>
</div>
<div>
<small v-if="issue.poll.expired">最終結果 計{{issue.poll.votes_count}}票</small>
<small v-else>投票中 現在{{issue.poll.votes_count}}票 ({{formatDate(issue.poll.expires_at)}}まで)</small>
</div>
</div>
<div v-if="0 != issue.media_attachments" class="media-wrapper bgcolor-gray hidden flex">
<a v-for="media in issue.media_attachments" @click="modal_media = media;showMedia = true;">
<video v-if="'gifv' == media.type && '2' == optAutoPlay" :src="https://sumire.work/kktjs/media.url" class="media" playsinline muted autoplay loop></video>
<img v-if="('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" :src="https://sumire.work/kktjs/checkMedia(media.preview_url,%20media.remote_url)" :alt="media.description" :title="media.description" class="media" onerror="this.src=IMG_DUMMY">
<i v-if="'video' == media.type || ('gifv' == media.type && '1' == optAutoPlay)" class="fa fa-fw fa-play-circle-o color-pk"></i>
</a>
</div>
<div v-if="0 != issue.media_attachments" class="media-wrapper control">
<i v-on:click="updateMediaWrapper(issue, false);" class="fa fa-fw fa-eye-slash bgcolor-wh"></i>
</div>
<div v-if="(( issue.sensitive && !issue.media_opened ) || false === issue.media_opened ) && 0 != issue.media_attachments" class="media-wrapper bluesheet" v-on:click="updateMediaWrapper(issue, true);">
<h4 v-if="issue.sensitive">Sensitive contents</h4>
<h4 v-else>Media contents</h4>
<small>Click to view</small>
</div>
<a v-if="null != issue.card" class="flex center card" :href="https://sumire.work/kktjs/issue.card.url" target="_blank" rel="noopener noreferrer">
<img v-if="null != issue.card.image" :src="https://sumire.work/kktjs/issue.card.image" onerror="this.src=IMG_DUMMY">
<div class="detail-content hidden">
<span>{{issue.card.title}}</span><br>
<small>{{formatDomain(issue.card)}}</small>
</div>
</a>
<div class="action-bar flex end">
<div class="hidden nodot">

<i v-if="issue.req_pin" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="issue.account.id != user.id" class="fa fa-fw fa-thumb-tack color-disable"></i>
<i v-else v-on:click="actUnPin(issue);" class="fa fa-fw fa-thumb-tack"></i>
<small class="time">{{formatDate(issue.created_at)}}</small>
</div>
<i v-on:click="runReply(issue);" class="fa fa-fw fa-reply"></i>
<i v-if="issue.req_reblog" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="'direct' == issue.visibility || 'private' == issue.visibility" class="fa fa-fw fa-retweet color-disable"></i>
<i v-else-if="issue.reblogged" v-on:click="actUnReblog(issue);" class="fa fa-fw fa-retweet color-on"></i>
<i v-else v-on:click="actReblog(issue);" class="fa fa-fw fa-retweet"></i>
<i v-if="issue.req_favourite" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="issue.favourited" v-on:click="actUnFav(issue);" class="fa fa-fw fa-star color-on"></i>
<i v-else v-on:click="actFav(issue);" class="fa fa-fw fa-star"></i>
<i v-if="checkKatsuChain(issue)" v-on:click="runDetail(issue.id);" class="fa fa-fw fa-comments-o"></i>
<i v-else v-on:click="runDetail(issue.id);" class="fa fa-fw fa-comment-o"></i>
<i v-on:click="runAcct(issue.account.id);" class="fa fa-fw fa-user-circle-o"></i>
</div>
</div>
</div>
</div>
<div class="flex account-bar">
<div v-on:click="resetAcctColumn();fetchAcctAll();" class="select-link color-wh bgcolor" :class="{ 'bgcolor-pk': 'katsu' == acct_type }"><i class="fa fa-fw fa-comments-o"></i>All</div>
<div v-on:click="resetAcctColumn();fetchAcctMedia();" class="select-link color-wh bgcolor" :class="{ 'bgcolor-pk': 'media' == acct_type }"><i class="fa fa-fw fa-photo"></i>Media</div>
<div v-on:click="resetAcctColumn();fetchAcctFollow();" class="select-link color-wh bgcolor" :class="{ 'bgcolor-pk': 'follow' == acct_type }"><i class="fa fa-fw fa-user-circle-o"></i>Follow</div>
<div v-on:click="resetAcctColumn();fetchAcctFollower();" class="select-link color-wh bgcolor" :class="{ 'bgcolor-pk': 'follower' == acct_type }"><i class="fa fa-fw fa-user-circle-o"></i>Follower</div>
</div>
<div v-if="isMyAcct" class="flex account-bar">
<div v-on:click="resetAcctColumn();fetchAcctFav();" class="select-link color-wh bgcolor" :class="{ 'bgcolor-pk': 'fav' == acct_type }"><i class="fa fa-fw fa-star-o"></i>Fav</div>
<div v-on:click="resetAcctColumn();fetchAcctMute();" class="select-link color-wh bgcolor" :class="{ 'bgcolor-pk': 'mute' == acct_type }"><i class="fa fa-fw fa-microphone-slash"></i>Mute</div>
<div v-on:click="resetAcctColumn();fetchAcctBlock();" class="select-link color-wh bgcolor" :class="{ 'bgcolor-pk': 'block' == acct_type }"><i class="fa fa-fw fa-ban"></i>Block</div>
<div v-on:click="resetAcctColumn();fetchAcctFollowRequest();" class="select-link color-wh bgcolor" :class="{ 'bgcolor-pk': 'request' == acct_type }"><i class="fa fa-fw fa-hourglass"></i>Request</div>
</div>
</div>
<div v-else class="status-list">
<div v-if="(fetch_lock.acct || fetch_watch.acct_profile || fetch_watch.acct_profile_rel || fetch_watch.acct_profile_pin || fetch_watch.acct_profile_req)" class="flex info-wrapper">Initializing...</div>
</div>
<div v-if="hasAcctProfile && hasAcct && !fetch_watch.acct_profile && !fetch_watch.acct_profile_rel && !fetch_watch.acct_profile_pin && !fetch_watch.acct_profile_req" class="status-list high">
<div v-for="(issue, index) in accts" class="status-wrapper" :class="issue.visibility">
<div v-if="null != issue.reblog" class="status-header flex start">
<i class="fa fa-fw fa-retweet color-on"></i>
<img :src="https://sumire.work/kktjs/checkAvatar(issue.account.avatar_static)" class="avatar border notif" v-on:click="runAcct(issue.account.id);" onerror="this.src=IMG_DUMMY">
<div class="hidden full">
<div>
<span v-if="checkDisplayName(issue.account.display_name)" class="color-pk" v-html="formatEmoji(issue.account.display_name, issue.account.emojis)"></span>
<span v-else class="color-pk">{{issue.account.username}}</span>
<small class="color-gr">‭@{{issue.account.acct}}</small>
</div>
<div class="status-name flex start">
<div class="hidden">
<span> reblog</span>
</div>
<span class="status-info color-gr">({{formatDate(issue.created_at)}})</span>
</div>
</div>
</div>

<div v-if="null != issue.reblog" class="status flex">
<img :src="https://sumire.work/kktjs/checkAvatar(issue.reblog.account.avatar_static)" class="avatar border" v-on:click="runAcct(issue.reblog.account.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(issue.reblog.account.display_name)" class="color-pk" v-html="formatEmoji(issue.reblog.account.display_name, issue.reblog.account.emojis)"></a>
<a v-else class="color-pk">{{issue.reblog.account.username}}</a>
<small>‭@{{issue.reblog.account.acct}}</small>
</div>
<small v-if="'public' != issue.reblog.visibility">[{{issue.reblog.visibility}}]</small>
<small v-if="!optSimple && issue.reblog.sensitive" class="status-info"><i class="fa fa-fw fa-exclamation-triangle"></i></small>
</div>
<div class="status-text">
<span v-html="formatSpoiler(issue.reblog.spoiler_text, issue.reblog.emojis)"></span>
<div v-if="issue.reblog.spoiler_text">
<div v-if="!issue.reblog.content_opened" class="spoller-link color-wh bgcolor-pk" v-on:click="updateContentWrapper(issue.reblog, true);"><small>- SHOW MORE -</small></div>
<div v-else class="spoller-link color-wh bgcolor" v-on:click="updateContentWrapper(issue.reblog, false);"><small>- SHOW LESS -</small></div>
<span v-if="issue.reblog.content_opened" v-html="formatContent(issue.reblog.content, issue.reblog.emojis)"></span>
</div>
<div v-else>
<span v-html="formatContent(issue.reblog.content, issue.reblog.emojis)"></span>
</div>
</div>
<div v-if="null != issue.reblog.poll && 0 != issue.reblog.poll.options" class="card">
<div v-for="(option, index) in issue.reblog.poll.options" class="option-name flex start">
<div class="hidden full"><span v-html="index+1+'. '+formatEmojiDraft(option.title, issue.reblog.poll.emojis)"></span></div>
<small v-if="issue.reblog.poll.voted || issue.reblog.poll.expired">{{option.votes_count}}票</small>
</div>
<div v-if="issue.reblog.poll.voted || issue.reblog.poll.expired || user.id == issue.reblog.account.id" class="flex center">
<div v-if="user.id != issue.reblog.account.id" class="color-wh bgcolor-disable button full flex wrap">
<small v-if="issue.reblog.poll.expired">Finished</small>
<small v-else>Voted</small>
</div>
</div>
<div v-else class="flex center">
<div v-for="(option, index) in issue.reblog.poll.options" v-if="!issue.reblog.poll.expired" class="full">
<small v-if="isSetVote(issue.reblog.poll, index)" class="color-wh bgcolor-pk button flex wrap" v-on:click="setVote(issue.reblog, index);">{{index+1}}</small>
<small v-else class="color-wh bgcolor button flex wrap" v-on:click="setVote(issue.reblog, index);">{{index+1}}</small>
</div>
<div class="full">
<small v-if="issue.reblog.req_vote" class="color-wh bgcolor-disable button flex wrap"><i class="fa fa-fw fa-spinner fa-pulse"></i></small>
<small v-else-if="!checkVote(issue.reblog.poll)" class="color-wh bgcolor-disable button flex wrap">Vote</small>
<small v-else class="color-wh bgcolor-pk button flex wrap" v-on:click="actVote(issue.reblog);">Vote</small>
</div>
</div>
<div>
<small v-if="issue.reblog.poll.expired">最終結果 計{{issue.reblog.poll.votes_count}}票</small>
<small v-else>投票中 現在{{issue.reblog.poll.votes_count}}票 ({{formatDate(issue.reblog.poll.expires_at)}}まで)</small>
</div>
</div>
<div v-if="0 != issue.reblog.media_attachments" class="media-wrapper bgcolor-gray hidden flex">
<a v-for="media in issue.reblog.media_attachments" @click="modal_media = media;showMedia = true;">
<video v-if="'gifv' == media.type && '2' == optAutoPlay" :src="https://sumire.work/kktjs/media.url" class="media" playsinline muted autoplay loop></video>
<img v-if="('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" :src="https://sumire.work/kktjs/checkMedia(media.preview_url,%20media.remote_url)" :alt="media.description" :title="media.description" class="media" onerror="this.src=IMG_DUMMY">
<i v-if="'video' == media.type || ('gifv' == media.type && '1' == optAutoPlay)" class="fa fa-fw fa-play-circle-o color-pk"></i>
</a>
</div>
<div v-if="0 != issue.reblog.media_attachments" class="media-wrapper control">
<i v-on:click="updateMediaWrapper(issue.reblog, false);" class="fa fa-fw fa-eye-slash bgcolor-wh"></i>
</div>
<div v-if="(( issue.reblog.sensitive && !issue.reblog.media_opened ) || false === issue.reblog.media_opened ) && 0 != issue.reblog.media_attachments" class="media-wrapper bluesheet" v-on:click="updateMediaWrapper(issue.reblog, true);">
<h4 v-if="issue.reblog.sensitive">Sensitive contents</h4>
<h4 v-else>Media contents</h4>
<small>Click to view</small>
</div>
<a v-if="null != issue.reblog.card" class="flex center card" :href="https://sumire.work/kktjs/issue.reblog.card.url" target="_blank" rel="noopener noreferrer">
<img v-if="null != issue.reblog.card.image" :src="https://sumire.work/kktjs/issue.reblog.card.image" onerror="this.src=IMG_DUMMY">
<div class="detail-content hidden">
<span>{{issue.reblog.card.title}}</span><br>
<small>{{formatDomain(issue.reblog.card)}}</small>
</div>
</a>
<div class="action-bar flex end">
<div class="hidden nodot">
<i class="fa fa-fw fa-paperclip color-disable"></i>
<small class="time">{{formatDate(issue.reblog.created_at)}}</small>
</div>
<i v-on:click="runReply(issue.reblog);" class="fa fa-fw fa-reply"></i>
<i v-if="issue.reblog.req_reblog" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="'direct' == issue.reblog.visibility || 'private' == issue.reblog.visibility" class="fa fa-fw fa-retweet color-disable"></i>
<i v-else-if="issue.reblog.reblogged" v-on:click="actUnReblog(issue.reblog);" class="fa fa-fw fa-retweet color-on"></i>
<i v-else v-on:click="actReblog(issue.reblog);" class="fa fa-fw fa-retweet"></i>
<i v-if="issue.reblog.req_favourite" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="issue.reblog.favourited" v-on:click="actUnFav(issue.reblog);" class="fa fa-fw fa-star color-on"></i>
<i v-else v-on:click="actFav(issue.reblog);" class="fa fa-fw fa-star"></i>
<i v-if="checkKatsuChain(issue.reblog)" v-on:click="runDetail(issue.reblog.id);" class="fa fa-fw fa-comments-o"></i>
<i v-else v-on:click="runDetail(issue.reblog.id);" class="fa fa-fw fa-comment-o"></i>
<i v-on:click="runAcct(issue.reblog.account.id);" class="fa fa-fw fa-user-circle-o"></i>
</div>
</div>
</div>

<div v-else class="status flex">
<img :src="https://sumire.work/kktjs/checkAvatar(issue.account.avatar_static)" class="avatar border" v-on:click="runAcct(issue.account.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(issue.account.display_name)" class="color-pk" v-html="formatEmoji(issue.account.display_name, issue.account.emojis)"></a>
<a v-else class="color-pk">{{issue.account.username}}</a>
<small>‭@{{issue.account.acct}}</small>
</div>
<small v-if="'public' != issue.visibility">[{{issue.visibility}}]</small>
<small v-if="!optSimple && issue.sensitive" class="status-info"><i class="fa fa-fw fa-exclamation-triangle"></i></small>
</div>
<div class="status-text">
<span v-html="formatSpoiler(issue.spoiler_text, issue.emojis)"></span>
<div v-if="issue.spoiler_text">
<div v-if="!issue.content_opened" class="spoller-link color-wh bgcolor-pk" v-on:click="updateContentWrapper(issue, true);"><small>- SHOW MORE -</small></div>
<div v-else class="spoller-link color-wh bgcolor" v-on:click="updateContentWrapper(issue, false);"><small>- SHOW LESS -</small></div>
<span v-if="issue.content_opened" v-html="formatContent(issue.content, issue.emojis)"></span>
</div>
<div v-else>
<span v-html="formatContent(issue.content, issue.emojis)"></span>
</div>
</div>
<div v-if="null != issue.poll && 0 != issue.poll.options" class="card">
<div v-for="(option, index) in issue.poll.options" class="option-name flex start">
<div class="hidden full"><span v-html="index+1+'. '+formatEmojiDraft(option.title, issue.poll.emojis)"></span></div>
<small v-if="issue.poll.voted || issue.poll.expired">{{option.votes_count}}票</small>
</div>
<div v-if="issue.poll.voted || issue.poll.expired || user.id == issue.account.id" class="flex center">
<div v-if="user.id != issue.account.id" class="color-wh bgcolor-disable button full flex wrap">
<small v-if="issue.poll.expired">Finished</small>
<small v-else>Voted</small>
</div>
</div>
<div v-else class="flex center">
<div v-for="(option, index) in issue.poll.options" v-if="!issue.poll.expired" class="full">
<small v-if="isSetVote(issue.poll, index)" class="color-wh bgcolor-pk button flex wrap" v-on:click="setVote(issue, index);">{{index+1}}</small>
<small v-else class="color-wh bgcolor button flex wrap" v-on:click="setVote(issue, index);">{{index+1}}</small>
</div>
<div class="full">
<small v-if="issue.req_vote" class="color-wh bgcolor-disable button flex wrap"><i class="fa fa-fw fa-spinner fa-pulse"></i></small>
<small v-else-if="!checkVote(issue.poll)" class="color-wh bgcolor-disable button flex wrap">Vote</small>
<small v-else class="color-wh bgcolor-pk button flex wrap" v-on:click="actVote(issue);">Vote</small>
</div>
</div>
<div>
<small v-if="issue.poll.expired">最終結果 計{{issue.poll.votes_count}}票</small>
<small v-else>投票中 現在{{issue.poll.votes_count}}票 ({{formatDate(issue.poll.expires_at)}}まで)</small>
</div>
</div>
<div v-if="0 != issue.media_attachments" class="media-wrapper bgcolor-gray hidden flex">
<a v-for="media in issue.media_attachments" @click="modal_media = media;showMedia = true;">
<video v-if="'gifv' == media.type && '2' == optAutoPlay" :src="https://sumire.work/kktjs/media.url" class="media" playsinline muted autoplay loop></video>
<img v-if="('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" :src="https://sumire.work/kktjs/checkMedia(media.preview_url,%20media.remote_url)" :alt="media.description" :title="media.description" class="media" onerror="this.src=IMG_DUMMY">
<i v-if="'video' == media.type || ('gifv' == media.type && '1' == optAutoPlay)" class="fa fa-fw fa-play-circle-o color-pk"></i>
</a>
</div>
<div v-if="0 != issue.media_attachments" class="media-wrapper control">
<i v-on:click="updateMediaWrapper(issue, false);" class="fa fa-fw fa-eye-slash bgcolor-wh"></i>
</div>
<div v-if="(( issue.sensitive && !issue.media_opened ) || false === issue.media_opened ) && 0 != issue.media_attachments" class="media-wrapper bluesheet" v-on:click="updateMediaWrapper(issue, true);">
<h4 v-if="issue.sensitive">Sensitive contents</h4>
<h4 v-else>Media contents</h4>
<small>Click to view</small>
</div>
<a v-if="null != issue.card" class="flex center card" :href="https://sumire.work/kktjs/issue.card.url" target="_blank" rel="noopener noreferrer">
<img v-if="null != issue.card.image" :src="https://sumire.work/kktjs/issue.card.image" onerror="this.src=IMG_DUMMY">
<div class="detail-content hidden">
<span>{{issue.card.title}}</span><br>
<small>{{formatDomain(issue.card)}}</small>
</div>
</a>
<div class="action-bar flex end">
<div class="hidden nodot">
<i v-if="issue.req_pin" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="issue.pinned" v-on:click="actUnPin(issue);" class="fa fa-fw fa-thumb-tack"></i>
<i v-else-if="issue.account.id == user.id && (acct_type=='katsu' || acct_type=='media') && 'direct' != issue.visibility && 'private' != issue.visibility" v-on:click="actPin(issue);" class="fa fa-fw fa-thumb-tack fa-rotate-270"></i>
<i v-else v-on:click="runBookmark(issue);" class="fa fa-fw fa-paperclip"></i>
<small class="time">{{formatDate(issue.created_at)}}</small>
</div>
<i v-on:click="runReply(issue);" class="fa fa-fw fa-reply"></i>
<i v-if="issue.req_reblog" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="'direct' == issue.visibility || 'private' == issue.visibility" class="fa fa-fw fa-retweet color-disable"></i>
<i v-else-if="issue.reblogged" v-on:click="actUnReblog(issue);" class="fa fa-fw fa-retweet color-on"></i>
<i v-else v-on:click="actReblog(issue);" class="fa fa-fw fa-retweet"></i>
<i v-if="issue.req_favourite" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="issue.favourited" v-on:click="actUnFav(issue);" class="fa fa-fw fa-star color-on"></i>
<i v-else v-on:click="actFav(issue);" class="fa fa-fw fa-star"></i>
<i v-if="checkKatsuChain(issue)" v-on:click="runDetail(issue.id);" class="fa fa-fw fa-comments-o"></i>
<i v-else v-on:click="runDetail(issue.id);" class="fa fa-fw fa-comment-o"></i>
<i v-on:click="runAcct(issue.account.id);" class="fa fa-fw fa-user-circle-o"></i>
</div>
</div>
</div>
</div>
<div class="flex info-wrapper">
<span v-if="fetch_lock.acct"><i class="fa fa-fw fa-spinner fa-pulse"></i>Katsu Loading...</span>
<span v-else-if="fetch_comp.acct">All Loaded</span>
<span v-else>TouchEnd to Load Next</span>
</div>
</div>
<div v-else-if="hasAcctProfile && hasAcctUser && !fetch_watch.acct_profile && !fetch_watch.acct_profile_rel && !fetch_watch.acct_profile_pin && !fetch_watch.acct_profile_req" class="status-list high">
<div v-for="issue in accts_users" class="status flex">
<img :src="https://sumire.work/kktjs/checkAvatar(issue.avatar_static)" class="avatar border" v-on:click="runAcct(issue.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(issue.display_name)" class="color-pk" v-html="formatEmoji(issue.display_name, issue.emojis)"></a>
<a v-else class="color-pk">{{issue.username}}</a>
<small>‭@{{issue.acct}}</small>
</div>
<span v-if="issue.locked"><i class="fa fa-fw fa-lock"></i></span>
<small v-if="issue.bot" class="status-info">[Bot]</small>
</div>
<div class="status-text">
</div>
<div class="action-bar flex end">
<i></i>
<div v-if="user.id != issue.id && acct_type != 'request'">
<span v-if="issue.req_follow" class="button mini color-wh bgcolor"><i class="fa fa-fw fa-spinner fa-pulse"></i></span>
<span v-else-if="isFollow(issue.id)" v-on:click="actUnFollow(issue);" class="button mini color-wh bgcolor-pk">Following</span>
<span v-else-if="isRequest(issue.id)" class="button mini color-wh bgcolor-disable">Requested</span>
<span v-else-if="isBlock(issue.id)" class="button mini color-wh bgcolor-disable">Follow</span>
<span v-else-if="!isFollow(issue.id)" v-on:click="actFollow(issue);" class="button mini color-wh bgcolor">Follow</span>
</div>
<div v-if="acct_type == 'request'">
<span v-if="issue.req_follow" class="button mini color-wh bgcolor"><i class="fa fa-fw fa-spinner fa-pulse"></i></span>
<span v-else-if="false === issue.authorize" class="button mini color-wh bgcolor-disable">Rejected</span>
<span v-else-if="void 0 === issue.authorize" v-on:click="actUnFollowAuth(issue);" class="button mini color-wh bgcolor">Reject</span>
<span v-if="issue.req_follow" class="button mini color-wh bgcolor"><i class="fa fa-fw fa-spinner fa-pulse"></i></span>
<span v-else-if="issue.authorize" class="button mini color-wh bgcolor-disable">Authorized</span>
<span v-else-if="void 0 === issue.authorize" v-on:click="actFollowAuth(issue);" class="button mini color-wh bgcolor-pk">Authorize</span>
</div>
<i v-on:click="runAcct(issue.id);" class="fa fa-fw fa-user-circle-o"></i>
</div>
</div>
</div>
<div class="flex info-wrapper">
<span v-if="fetch_lock.acct"><i class="fa fa-fw fa-spinner fa-pulse"></i>Account Loading...</span>
<span v-else-if="fetch_comp.acct">All Loaded</span>
<span v-else>TouchEnd to Load Next</span>
</div>
</div>
<div v-else class="status-list high">
<div class="flex info-wrapper">
<span v-if="(fetch_watch.acct_profile || fetch_watch.acct_profile_rel || fetch_watch.acct_profile_pin || fetch_watch.acct_profile_req)"><i class="fa fa-fw fa-spinner fa-pulse"></i>Profile Loading...</span>
<span v-else-if="fetch_lock.acct && (acct_type == 'katsu' || acct_type == 'media' || acct_type == 'fav')"><i class="fa fa-fw fa-spinner fa-pulse"></i>Katsu Loading...</span>
<span v-else-if="fetch_lock.acct"><i class="fa fa-fw fa-spinner fa-pulse"></i>Account Loading...</span>
<span v-else-if="fetch_comp.acct">All Loaded</span>
<span v-else>TouchEnd to Load Next</span>
</div>
</div>
</div>
</div>
</div>
<div id="over" :class="{ 'extra': 'native' == app_mode }" class="flex column-list-over">

<div v-if="showLink" class="column mini leftswipe scrollable bgcolor-wh">
<div class="link-header"><i class="fa fa-fw fa-comment"></i>Timeline</div>
<div class="link-list">
<div class="flex wrap">
<span v-on:click="runHome();" class="list-link border-lite full bgcolor-wh flex end">
<div class="hidden full"><i class="fa fa-fw fa-home"></i>Home</div>
</span>
<span v-if="fetch_lock.localws || fetch_lock.local" class="list-link border-lite full color bgcolor-disable flex end">
<div class="hidden full"><i class="fa fa-fw fa-users"></i>Local</div>
</span>
<span v-else v-on:click="runLocal('Local');reopenWsLocal('Local');" class="list-link border-lite full bgcolor-wh flex end">
<div class="hidden full"><i class="fa fa-fw fa-users"></i>Local</div>
</span>
<span v-if="fetch_lock.localws || fetch_lock.local" class="list-link border-lite full color bgcolor-disable flex end">
<div class="hidden full"><i class="fa fa-fw fa-globe"></i>Global</div>
</span>
<span v-else v-on:click="runLocal('Global');reopenWsLocal('Global');" class="list-link border-lite full bgcolor-wh flex end">
<div class="hidden full"><i class="fa fa-fw fa-globe"></i>Global</div>
</span>
<span v-on:click="toggleLinkStream('lists');" class="list-link border-lite full bgcolor-wh flex end">
<div class="hidden full"><i class="fa fa-fw fa-list"></i>Lists</div>
</span>
<div v-if="showLinkStream == 'lists'" class="full">
<span v-if="fetch_lock.multiws || fetch_lock.multi || fetch_lock.lists" class="list-link slim color-wh bgcolor-disable flex end">
<div class="hidden full"><small>Loading...</small></div>
</span>
<span v-else v-for="issue in stream_lists" v-on:click="runMulti('List', issue.id);reopenWsMulti('List', issue);showMultiOption = false;" class="list-link slim border-lite bgcolor-wh flex end">
<div class="hidden full"><small>{{issue.title}}</small></div>
</span>
<span v-on:click="toggleStream();" class="list-link slim border-lite bgcolor-wh flex end">
<div class="hidden full"><small><i class="fa fa-fw fa-pencil"></i>Open Streams</small></div>
</span>
</div>
<span v-on:click="toggleLinkStream('tags');" class="list-link border-lite full bgcolor-wh flex end">
<div class="hidden full"><i class="fa fa-fw fa-hashtag"></i>Hashtags</div>
</span>
<div v-if="showLinkStream == 'tags'" class="full">
<span v-if="fetch_lock.multiws || fetch_lock.multi" class="list-link slim color-wh bgcolor-disable flex end">
<div class="hidden full"><small>Loading...</small></div>
</span>
<span v-else v-for="issue in stream_hashtags" v-on:click="runMulti('Hashtag', issue);reopenWsMulti('Hashtag', issue);showMultiOption = false;" class="list-link slim border-lite bgcolor-wh flex end">
<div class="hidden full"><small>#{{issue}}</small></div>
</span>
<span v-on:click="toggleStream();" class="list-link slim border-lite  bgcolor-wh flex end">
<div class="hidden full"><small><i class="fa fa-fw fa-pencil"></i>Open Streams</small></div>
</span>
</div>
<span v-if="'web' == app_mode" v-on:click="toggleLinkStream('channels_d');" class="list-link border-lite color full bgcolor-disable flex end">
<div class="hidden full"><i class="fa fa-fw fa-gamepad"></i>Discord Channels</div>
<small>未</small>
</span>
<span v-if="showLinkStream == 'channels'" v-for="issue in stream_channels" v-on:click="return;runMulti('Discord', issue);reopenWsMulti('Discord', issue);showMultiOption = false;" class="list-link slim border-lite full bgcolor-wh flex end">
<div class="hidden full"><small>{{issue}}</small></div>
</span>

</div>





</div>
<div class="user-list">
<div v-if="null != user.id" class="status flex">
<img :src="https://sumire.work/kktjs/checkAvatar(user.avatar_static)" class="avatar border short" v-on:click="runUser('katsu');" onerror="this.src=IMG_DUMMY">
<div class="content border short">
<div class="flex start hidden">
<a v-if="checkDisplayName(user.display_name)" class="color-pk" v-html="formatEmoji(user.display_name, user.emojis)"></a>
<a v-else class="color-pk">{{user.username}}</a>
</div>
<div class="status-name flex start color-gr">
<div class="hidden full">
<small>‭@{{user.acct}}</small>
</div>
<span v-if="user.locked"><i class="fa fa-fw fa-lock"></i></span>
<small v-if="user.bot" class="status-info">[Bot]</small>
</div>
<div class="status-text">
</div>
</div>
</div>
<div class="flex wrap">

<span v-on:click="runNotif('all');" class="list-link border-lite full bgcolor-wh flex end">
<div class="hidden full"><i class="fa fa-fw fa-bell"></i>Notification</div>
<small v-if="!notif_unread_filter.complete">30+</small>
<small v-else-if="0 != notif_unread_filter.mention + notif_unread_filter.fav + notif_unread_filter.reblog + notif_unread_filter.follow + notif_unread_filter.others">{{notif_unread_filter.mention + notif_unread_filter.fav + notif_unread_filter.reblog + notif_unread_filter.follow + notif_unread_filter.others}}</small>
</span>
<span v-on:click="runNotif('mention');showNotifOption = true;" class="list-link border-lite full bgcolor-wh flex end">
<div class="hidden full"><i class="fa fa-fw fa-at"></i>Mention</div>
<small v-if="!notif_unread_filter.complete">?</small>
<small v-else-if="0 != notif_unread_filter.mention">{{notif_unread_filter.mention}}</small>
</span>


</div>
<div class="flex wrap link-footer">
<i class="fa fa-fw fa-star" v-on:click="runUser('fav_force');"></i>
<i class="fa fa-fw fa-cog" v-on:click="toggleSetting();"></i>
<i class="fa fa-fw fa-search" v-on:click="toggleSearch();"></i>
<i class="fa fa-fw fa-pencil-square-o" v-on:click="toggleForm();"></i>
</div>
</div>
</div>

<div v-show="showStream" class="column scrollable bgcolor-wh" v-on:wheel="handleWheel">
<div class="column-header">
<div class="action-bar flex end bgcolor-wh">
<span v-on:click="toggleStream();" class="button mini fixed color-wh bgcolor-gr">Close</span>
<h3>Streams</h3>
<span>Edit: </span>
<span v-if="showStreamEdit" v-on:click="toggleStreamEdit();" class="button mini fixed color-wh bgcolor-pk">ON</span>
<span v-else v-on:click="toggleStreamEdit();" class="button mini fixed color-wh bgcolor">OFF</span>
</div>
</div>
<div class="form-option full">

<div v-show="hasStreamList" class="status-list">
<div class="link-header"><i class="fa fa-fw fa-user-circle-o"></i> Accounts <small v-if="!optSimple">(List id: {{stream_list.id}})</small></div>
<div class="flex select-container manage">
<div v-if="fetch_lock.multiws || fetch_lock.multi || fetch_lock.lists" class="list-link color-wh bgcolor-disable">Back</div>
<div v-else v-on:click="showStreamEdit=false;fetchStreamList(); stream_list_users=[]; stream_list_users_bu=[]; stream_list_users_relation=[]; stream_list=[];" class="list-link color-wh bgcolor">Back</div>
<div v-if="fetch_lock.multiws || fetch_lock.multi || fetch_lock.lists" class="list-link full color-disable bgcolor-wh hidden">{{stream_list.title}}</div>
<div v-else-if="!showStreamEdit" v-on:click="toggleStreamEdit();" class="list-link full bgcolor-wh hidden">{{stream_list.title}}</div>
<div v-if="fetch_lock.multiws || fetch_lock.multi || fetch_lock.lists" class="list-link color-wh bgcolor-disable">Edit</div>
<div v-else-if="!showStreamEdit" v-on:click="toggleStreamEdit();" class="list-link color-wh bgcolor">Edit</div>
<input v-focus v-show="showStreamEdit && !fetch_lock.multiws && !fetch_lock.multi && !fetch_lock.lists" type="text" v-restore-listprofile class="underline-dash" id="list_name" @keyup.enter="actListProfile();" onKeyup="inputListProfile(this)">
<span v-if="!fetch_lock.multiws && !fetch_lock.multi && !fetch_lock.lists && showStreamEdit" class="flex">
<dummy v-if="stream_list.req_profile"></dummy>
<span v-else v-on:click="listprofile.name=stream_list.title;checkListProfile();document.getElementById('list_name').value=stream_list.title;toggleStreamEdit();" class="button mini color-wh bgcolor">Cancel</span>
<span v-if="stream_list.req_profile" class="button mini color-wh bgcolor"><i class="fa fa-fw fa-spinner fa-pulse"></i></span>
<span v-else-if="stream_list_profile_check" v-on:click="actListProfile();" class="color-wh bgcolor-pk button">Save</span>
<span v-else class="button mini color-wh bgcolor-disable">Save</span>
</span>
</div>
<div class="flex account-bar">
<div v-on:click="resetStreamList();fetchListListed();" class="select-link color-wh bgcolor" :class="{ 'bgcolor-pk': 'listed' == stream_list_type }"><i class="fa fa-fw fa-user-o"></i>Listed</div>
<div v-on:click="resetStreamList();runListSearch();" class="select-link color-wh bgcolor" :class="{ 'bgcolor-pk': 'search' == stream_list_type }"><i class="fa fa-fw fa-search"></i>Search</div>
<div v-on:click="resetStreamList();fetchListFollow();" class="select-link color-wh bgcolor" :class="{ 'bgcolor-pk': 'follow' == stream_list_type }"><i class="fa fa-fw fa-user-circle-o"></i>Follow</div>

</div>
<div class="status-list">
<div v-if="'search'==stream_list_type" class="action-bar bgcolor-wh flex center">
<small>フォローしているアカウントから探す</small>
<input type="checkbox" id="checkfollowing" class="invisible" v-model="stream_list_following">
<label v-if="stream_list_following" for="checkfollowing" class="button color-wh bgcolor-pk">ON</label>
<label v-else for="checkfollowing" class="button color-wh bgcolor">OFF</label>
</div>
<div v-if="'search'==stream_list_type" class="search-container action-bar bgcolor-wh flex center">
<input v-focus type="text" v-restore-search class="underline-dash" @keyup.enter="fetchListSearch();" onKeyup="inputSearch(this)"><br>
<span v-if="fetch_lock.lists" class="button color-wh bgcolor">Search</span>
<span v-else v-on:click="fetchListSearch();" class="button color-wh bgcolor-pk">Search</span>
</div>
<div v-for="issue in stream_list_users" class="status flex">
<img :src="https://sumire.work/kktjs/checkAvatar(issue.avatar_static)" class="avatar border" v-on:click="showStream = false; runAcct(issue.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(issue.display_name)" class="color-pk" v-html="formatEmoji(issue.display_name, issue.emojis)"></a>
<a v-else class="color-pk">{{issue.username}}</a>
<small>‭@{{issue.acct}}</small>
</div>
<span v-if="issue.locked"><i class="fa fa-fw fa-lock"></i></span>
<small v-if="issue.bot" class="status-info">[Bot]</small>
</div>
<div class="status-text">
</div>
<div class="action-bar flex end">
<i></i>
<div v-if="user.id != issue.id">
<span v-if="issue.req_list" class="button mini color-wh bgcolor"><i class="fa fa-fw fa-spinner fa-pulse"></i></span>
<span v-else-if="!isListFollow(issue.id)" class="button mini color-wh bgcolor-disable">Add</span>
<span v-else-if="isList(issue.id)" v-on:click="actUnList(issue);" class="button mini color-wh bgcolor-pk">Remove</span>
<span v-else-if="!isList(issue.id)" v-on:click="actList(issue);" class="button mini color-wh bgcolor">Add</span>
</div>
<i v-on:click="showStream = false; runAcct(issue.id);" class="fa fa-fw fa-user-circle-o"></i>
</div>
</div>
</div>
<div v-if="'follow'==stream_list_type && !isListFollowMax" class="search-container action-bar bgcolor-wh flex center">
<span v-if="fetch_lock.multiws || fetch_lock.multi || fetch_lock.lists" class="full color-wh bgcolor-disable button">Next</span>
<span v-else v-on:click="fetchListFollow();" class="full color-wh bgcolor-gr button">Next</span>
</div>
</div>
</div>

<div v-show="!hasStreamList" class="status-list">
<div class="link-header"><i class="fa fa-fw fa-list"></i> Lists</div>
<div v-for="issue in stream_lists" class="flex select-container">
<i v-if="showStreamEdit && (fetch_lock.multiws || fetch_lock.multi || fetch_lock.lists)" class="fa fa-fw fa-times color-disable"></i>
<i v-else-if="showStreamEdit" v-on:click="runRemoveList(issue.id);" class="fa fa-fw fa-times"></i>
<div v-if="fetch_lock.multiws || fetch_lock.multi || fetch_lock.lists" class="list-link full color-wh bgcolor-disable hidden">{{issue.title}}</div>
<div v-else v-on:click="showStream=false;runMulti('List', issue.id);reopenWsMulti('List', issue);showMultiOption=false;showStreamEdit=false;" class="list-link full color-wh bgcolor hidden">{{issue.title}}</div>
<div v-if="fetch_lock.multiws || fetch_lock.multi || fetch_lock.lists" class="list-link color-wh bgcolor-disable"><i class="fa fa-fw fa-user-o"></i></div>
<div v-else v-on:click="showStreamEdit=false;stream_list=issue;listprofile.name=stream_list.title;checkListProfile();document.getElementById('list_name').value=stream_list.title;fetchListListedBackup();fetchListListed();" class="list-link color-wh bgcolor"><i class="fa fa-fw fa-user-o"></i></div>
</div>
<div v-show="showStreamEdit && !isListMax" class="select-container list bgcolor-wh flex center">
<input type="text" v-restore-list class="underline-dash" id="list_name_new" @keyup.enter="runAddList();" onKeyup="inputList(this);"><br>
<span v-if="fetch_lock.multiws || fetch_lock.multi || fetch_lock.lists" class="color-wh bgcolor-disable button"><i class="fa fa-fw fa-spinner fa-pulse color-wh"></i></span>
<span v-else-if="stream_list_text_check" v-on:click="runAddList();" class="color-wh bgcolor-pk button">Add</span>
<span v-else class="color-wh bgcolor-disable button">Add</span>
</div>
<div v-show="!showStreamEdit || isListMax" class="flex">
<div v-if="fetch_lock.multiws || fetch_lock.multi || fetch_lock.lists || isListMax" class="list-link full color-wh bgcolor-disable hidden"><i class="fa fa-fw fa-plus"></i> New List</div>
<div v-else v-on:click="toggleStreamEdit();" class="list-link full color-wh bgcolor hidden"><i class="fa fa-fw fa-plus"></i> New List</div>
</div>
<!-- -->
<div class="link-header"><i class="fa fa-fw fa-hashtag"></i> Hashtags</div>
<div v-for="issue in stream_hashtags" class="flex select-container">
<i v-if="showStreamEdit" v-on:click="removeStreamHashtag(issue);" class="fa fa-fw fa-times"></i>
<div v-if="fetch_lock.multiws || fetch_lock.multi" class="list-link full color-wh bgcolor-disable hidden">#{{issue}}</div>
<div v-else v-on:click="showStream=false;runMulti('Hashtag', issue);reopenWsMulti('Hashtag', issue);showMultiOption=false;showStreamEdit=false;" class="list-link full color-wh bgcolor hidden">#{{issue}}</div>
</div>
<div v-show="showStreamEdit && !isHashtagMax" class="select-container bgcolor-wh flex center">
<input type="text" v-restore-search class="underline-dash" id="hashtag_name_new" @keyup.enter="checkStreamHashtag();" onKeyup="inputSearch(this)"><br>
<span v-on:click="checkStreamHashtag();" class="color-wh bgcolor-gr button">Check</span>
<span v-if="fetch_lock.search_hashtag" class="color-wh bgcolor-disable button"><i class="fa fa-fw fa-spinner fa-pulse color-wh"></i></span>
<span v-else-if="stream_hashtag_text == ''" class="color-wh bgcolor-disable button">Add</span>
<span v-else v-on:click="addStreamHashtag();" class="color-wh bgcolor-pk button">Add</span>
</div>
<div v-show="!showStreamEdit || isHashtagMax" class="flex">
<div v-if="fetch_lock.multiws || fetch_lock.multi || isHashtagMax" class="list-link full color-wh bgcolor-disable hidden"><i class="fa fa-fw fa-plus"></i> New Hashtag</div>
<div v-else v-on:click="toggleStreamEdit();" class="list-link full color-wh bgcolor hidden"><i class="fa fa-fw fa-plus"></i> New Hashtag</div>
</div>
<!-- -->
<div v-if="'web' == app_mode" class="link-header"><i class="fa fa-fw fa-gamepad"></i> Discord Channels</div>
<div v-if="'web' == app_mode" v-for="issue in stream_channels" class="flex">
<div v-if="fetch_lock.multiws || fetch_lock.multi" class="list-link full color-wh bgcolor-disable hidden">{{issue}}</div>
<div v-else v-on:click="return;showStream=false;runMulti('Discord', issue);reopenWsMulti('Discord', issue);showMultiOption=false;showStreamEdit=false;" class="list-link full color-wh bgcolor-disable hidden">{{issue}}</div>
</div>
</div>
<div v-show="hasStreamList" class="flex info-wrapper">
<span v-if="fetch_lock.lists"><i class="fa fa-fw fa-spinner fa-pulse"></i>Account Loading...</span>
<span v-else-if="fetch_comp.lists">All Loaded</span>
</div>
</div>
</div>

<div v-if="showSearch" class="column scrollable bgcolor-wh" v-on:wheel="handleWheel">
<div class="column-header bgcolor-wh">
<div class="flex end action-bar">
<span v-on:click="toggleSearch();" class="button mini fixed color-wh bgcolor-gr">Close</span>
</div>
</div>
<div class="form-option">
<div class="status-list">
<div class="search-container action-bar bgcolor-wh flex center">
<input v-focus type="text" v-restore-search class="underline-dash" @keyup.enter="searchAll();" onKeyup="inputSearch(this)">
<span v-if="fetch_lock.search" class="button color-wh bgcolor-disable">Search</span>
<span v-else v-on:click="searchAll();" class="button color-wh bgcolor-pk">Search</span>
</div>
<div class="flex account-bar">
<div v-on:click="search_type = 'hashtag'" class="select-link color-wh bgcolor" :class="{ 'bgcolor-pk': hasSearch && 0 != searchs.hashtags.length }"><i class="fa fa-fw fa-hashtag"></i>Hashtag</div>
<div v-on:click="search_type = 'acct'" class="select-link color-wh bgcolor" :class="{ 'bgcolor-pk': hasSearch && 0 != searchs.accounts.length }"><i class="fa fa-fw fa-user-circle-o"></i>Account</div>
<div v-on:click="search_type = 'katsu'" class="select-link color-wh bgcolor" :class="{ 'bgcolor-pk': hasSearch && 0 != searchs.statuses.length }"><i class="fa fa-fw fa-comments-o"></i>Katsu</div>
</div>
<div v-if="hasSearch && search_type == 'hashtag'" class="flex wrap">
<span v-for="issue in searchs.hashtags" v-on:click="runMulti('Hashtag', issue.name);reopenWsMulti('Hashtag', issue.name);" class="list-link border-lite full color-pk bgcolor-wh">#{{issue.name}}</span>
</div>
<div v-if="hasSearchAcctEx && search_type == 'acct'" v-for="issue in searchs.accounts_ex" class="status flex">
<img :src="https://sumire.work/kktjs/checkAvatar(issue.avatar_static)" class="avatar border" v-on:click="showSearch = false; runAcct(issue.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(issue.display_name)" class="color-pk" v-html="formatEmoji(issue.display_name, issue.emojis)"></a>
<a v-else class="color-pk">{{issue.username}}</a>
<small>‭@{{issue.acct}}</small>
</div>
<span v-if="issue.locked"><i class="fa fa-fw fa-lock"></i></span>
<small v-if="issue.bot" class="status-info">[Bot]</small>
</div>
<div class="status-text">
</div>
<div class="action-bar flex end">
<div class="hidden nodot">
<i class="fa fa-fw fa-user-o color-disable"></i>
<small class="time">{{formatDate(issue.created_at)}}</small>
</div>
<i v-on:click="showSearch = false; runAcct(issue.id);" class="fa fa-fw fa-user-circle-o"></i>
</div>
</div>
</div>
<div v-if="hasSearch && search_type == 'katsu'" v-for="(issue, index) in searchs.statuses" class="status flex">
<img :src="https://sumire.work/kktjs/checkAvatar(issue.account.avatar_static)" class="avatar border" v-on:click="runAcct(issue.account.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(issue.account.display_name)" class="color-pk" v-html="formatEmoji(issue.account.display_name, issue.account.emojis)"></a>
<a v-else class="color-pk">{{issue.account.username}}</a>
<small>‭@{{issue.account.acct}}</small>
</div>
<small v-if="'public' != issue.visibility">[{{issue.visibility}}]</small>
<small v-if="!optSimple && issue.sensitive" class="status-info"><i class="fa fa-fw fa-exclamation-triangle"></i></small>
</div>
<div class="status-text">
<span v-html="formatSpoiler(issue.spoiler_text, issue.emojis)"></span>
<div v-if="issue.spoiler_text">
<div v-if="!issue.content_opened" class="spoller-link color-wh bgcolor-pk" v-on:click="updateContentWrapper(issue, true);"><small>- SHOW MORE -</small></div>
<div v-else class="spoller-link color-wh bgcolor" v-on:click="updateContentWrapper(issue, false);"><small>- SHOW LESS -</small></div>
<span v-if="issue.content_opened" v-html="formatContent(issue.content, issue.emojis)"></span>
</div>
<div v-else>
<span v-html="formatContent(issue.content, issue.emojis)"></span>
</div>
 </div>
<div v-if="null != issue.poll && 0 != issue.poll.options" class="card">
<div v-for="(option, index) in issue.poll.options" class="option-name flex start">
<div class="hidden full"><span v-html="index+1+'. '+formatEmojiDraft(option.title, issue.poll.emojis)"></span></div>
<small v-if="issue.poll.voted || issue.poll.expired">{{option.votes_count}}票</small>
</div>
<div v-if="issue.poll.voted || issue.poll.expired || user.id == issue.account.id" class="flex center">
<div v-if="user.id != issue.account.id" class="color-wh bgcolor-disable button full flex wrap">
<small v-if="issue.poll.expired">Finished</small>
<small v-else>Voted</small>
</div>
</div>
<div v-else class="flex center">
<div v-for="(option, index) in issue.poll.options" v-if="!issue.poll.expired" class="full">
<small v-if="isSetVote(issue.poll, index)" class="color-wh bgcolor-pk button flex wrap" v-on:click="setVote(issue, index);">{{index+1}}</small>
<small v-else class="color-wh bgcolor button flex wrap" v-on:click="setVote(issue, index);">{{index+1}}</small>
</div>
<div class="full">
<small v-if="issue.req_vote" class="color-wh bgcolor-disable button flex wrap"><i class="fa fa-fw fa-spinner fa-pulse"></i></small>
<small v-else-if="!checkVote(issue.poll)" class="color-wh bgcolor-disable button flex wrap">Vote</small>
<small v-else class="color-wh bgcolor-pk button flex wrap" v-on:click="actVote(issue);">Vote</small>
</div>
</div>
<div>
<small v-if="issue.poll.expired">最終結果 計{{issue.poll.votes_count}}票</small>
<small v-else>投票中 現在{{issue.poll.votes_count}}票 ({{formatDate(issue.poll.expires_at)}}まで)</small>
</div>
</div>
<div v-if="0 != issue.media_attachments" class="media-wrapper bgcolor-gray hidden flex">
<a v-for="media in issue.media_attachments" @click="modal_media = media;showMedia = true;">
<video v-if="'gifv' == media.type && '2' == optAutoPlay" :src="https://sumire.work/kktjs/media.url" class="media" playsinline muted autoplay loop></video>
<img v-if="('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" :src="https://sumire.work/kktjs/checkMedia(media.preview_url,%20media.remote_url)" :alt="media.description" :title="media.description" class="media" onerror="this.src=IMG_DUMMY">
<i v-if="'video' == media.type || ('gifv' == media.type && '1' == optAutoPlay)" class="fa fa-fw fa-play-circle-o color-pk"></i>
</a>
</div>
<div v-if="0 != issue.media_attachments" class="media-wrapper control">
<i v-on:click="updateMediaWrapper(issue, false);" class="fa fa-fw fa-eye-slash bgcolor-wh"></i>
</div>
<div v-if="((( optAllNsfw || issue.sensitive ) && !issue.media_opened ) || false === issue.media_opened ) && 0 != issue.media_attachments" class="media-wrapper bluesheet" v-on:click="updateMediaWrapper(issue, true);">
<h4 v-if="issue.sensitive">Sensitive contents</h4>
<h4 v-else>Media contents</h4>
<small>Click to view</small>
</div>
<a v-if="null != issue.card" class="flex center card" :href="https://sumire.work/kktjs/issue.card.url" target="_blank" rel="noopener noreferrer">
<img v-if="null != issue.card.image" :src="https://sumire.work/kktjs/issue.card.image" onerror="this.src=IMG_DUMMY">
<div class="detail-content hidden">
<span>{{issue.card.title}}</span><br>
 <small>{{formatDomain(issue.card)}}</small>
</div>
</a>
<div class="action-bar flex end">
<div class="hidden nodot">
<i v-on:click="runBookmark(issue);" class="fa fa-fw fa-paperclip"></i>
<small class="time">{{formatDate(issue.created_at)}}</small>
</div>
<i v-on:click="runReply(issue);" class="fa fa-fw fa-reply"></i>
<i v-if="issue.req_reblog" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="'direct' == issue.visibility || 'private' == issue.visibility" class="fa fa-fw fa-retweet color-disable"></i>
<i v-else-if="issue.reblogged" v-on:click="actUnReblog(issue);" class="fa fa-fw fa-retweet color-on"></i>
<i v-else v-on:click="actReblog(issue);" class="fa fa-fw fa-retweet"></i>
<i v-if="issue.req_favourite" class="fa fa-fw fa-spinner fa-pulse color-disable"></i>
<i v-else-if="issue.favourited" v-on:click="actUnFav(issue);" class="fa fa-fw fa-star color-on"></i>
<i v-else v-on:click="actFav(issue);" class="fa fa-fw fa-star"></i>
<i v-if="checkKatsuChain(issue)" v-on:click="runDetail(issue.id);" class="fa fa-fw fa-comments-o"></i>
<i v-else v-on:click="runDetail(issue.id);" class="fa fa-fw fa-comment-o"></i>
<i v-on:click="runAcct(issue.account.id);" class="fa fa-fw fa-user-circle-o"></i>
</div>
</div>
</div>
<div class="flex info-wrapper">
<span v-if="fetch_lock.search"><i class="fa fa-fw fa-spinner fa-pulse"></i>Searching...</span>
<span v-else-if="hasSearch">All Loaded</span>
</div>
</div>
</div>
</div>

<div v-if="showForm" class="column scrollable bgcolor-wh" v-on:wheel="handleWheel">
<div class="column-header bgcolor-wh">
<div class="flex end action-bar">
<span v-on:click="toggleForm();" class="button mini fixed color-wh bgcolor-gr">Close</span>
<span v-if="checkKatsu() && 2 > katsu_drafts.length" v-on:click="katsuToDraft();" class="button mini color-wh bgcolor">Save the draft</span>
<span v-else class="button mini color-wh bgcolor-disable">Save the draft</span>
</div>
</div>
<div class="status-list bgcolor-wh">
<div class="form-wrapper">
<div class="form-option">
<div class="action-bar full flex">
<div class="flex hidden">
<img :src="https://sumire.work/kktjs/checkAvatar(user.avatar)" class="avatar mini" v-on:click="showForm = false; runAcct(user.id);" onerror="this.src=IMG_DUMMY">
<div class="status-name flex start color-gr">
<div class="hidden">
<a v-if="checkDisplayName(user.display_name)" class="color-pk" v-html="formatEmoji(user.display_name, user.emojis)"></a>
<a v-else class="color-pk">{{user.username}}</a>
<small>‭@{{user.acct}}</small>
</div>
</div>
</div>

</div>
</div>
<div v-if="hasKatsuDraft" class="form-option bgcolor-gray">
<div v-for="(draft, index) in katsu_drafts" class="action-bar flex end draft">
<i v-on:click="draftToKatsu(index, true);" class="fa fa-fw fa-arrow-up"></i>
<span class="full text center hidden">{{draft.spoiler_text}}{{draft.status}}</span>
<i v-if="null != draft.in_reply_to_id" class="fa fa-fw fa-reply color-disable"></i>
<i v-if="0 < draft.media_attachments.length" class="fa fa-fw fa-photo color-disable"></i>
</div>
</div>
</div>
<div v-if="hasReply" class="status-header bgcolor-gray">
<i class="fa fa-fw fa-reply"></i>
<span> reply to</span>
<span v-if="checkDisplayName(katsu.reply.account.display_name)" class="color-pk" v-html="formatEmoji(katsu.reply.account.display_name, katsu.reply.account.emojis)"></span>
<span v-else class="color-pk">{{katsu.reply.account.username}}</span>
</div>
<div v-if="hasReply" class="status flex form bgcolor-gray">
<img :src="https://sumire.work/kktjs/checkAvatar(katsu.reply.account.avatar_static)" class="avatar border" v-on:click="runAcct(katsu.reply.account.id);" onerror="this.src=IMG_DUMMY">
<div class="content-before"><svg width="12" height="14"><use xlink:href="#cb"></use></svg></div>
<div class="content border">
<div class="status-name flex start color-gr">
<div class="hidden full">
<a v-if="checkDisplayName(katsu.reply.account.display_name)" class="color-pk" v-html="formatEmoji(katsu.reply.account.display_name, katsu.reply.account.emojis)"></a>
<a v-else class="color-pk">{{katsu.reply.account.username}}</a>
<small>‭@{{katsu.reply.account.acct}}</small>
</div>
<small v-if="'public' != katsu.reply.visibility">[{{katsu.reply.visibility}}]</small>
<small v-if="!optSimple && katsu.reply.sensitive" class="status-info"><i class="fa fa-fw fa-exclamation-triangle"></i></small>
</div>
<div class="status-text">
<span v-html="formatSpoiler(katsu.reply.spoiler_text, katsu.reply.emojis)"></span>
<div v-if="katsu.reply.spoiler_text">
<div v-if="!katsu.reply.content_opened" class="spoller-link color-wh bgcolor-pk" v-on:click="updateContentWrapper(reply, true);"><small>- SHOW MORE -</small></div>
<div v-else class="spoller-link color-wh bgcolor" v-on:click="updateContentWrapper(reply, false);"><small>- SHOW LESS -</small></div>
<span v-if="katsu.reply.content_opened" v-html="formatContent(katsu.reply.content, issue.reply.emojis)"></span>
</div>
<div v-else>
<span v-html="formatContent(katsu.reply.content, katsu.reply.emojis)"></span>
</div>
</div>
<div v-if="null != katsu.reply.poll && 0 != katsu.reply.poll.options" class="card">
<div v-for="(option, index) in katsu.reply.poll.options" class="option-name flex start">
<div class="hidden full"><span v-html="index+1+'. '+formatEmojiDraft(option.title, katsu.reply.poll.emojis)"></span></div>
<small v-if="katsu.reply.poll.voted || katsu.reply.poll.expired">{{option.votes_count}}票</small>
</div>
<div v-if="katsu.reply.poll.voted || katsu.reply.poll.expired || user.id == katsu.reply.account.id" class="flex center">
<div v-if="user.id != katsu.reply.account.id" class="color-wh bgcolor-disable button full flex wrap">
<small v-if="katsu.reply.poll.expired">Finished</small>
<small v-else>Voted</small>
</div>
</div>
<div v-else class="flex center">
<div v-for="(option, index) in katsu.reply.poll.options" v-if="!katsu.reply.poll.expired" class="full">
<small v-if="isSetVote(katsu.reply.poll, index)" class="color-wh bgcolor-pk button flex wrap" v-on:click="setVote(katsu.reply, index);">{{index+1}}</small>
 <small v-else class="color-wh bgcolor button flex wrap" v-on:click="setVote(katsu.reply, index);">{{index+1}}</small>
</div>
<div class="full">
<small v-if="katsu.reply.req_vote" class="color-wh bgcolor-disable button flex wrap"><i class="fa fa-fw fa-spinner fa-pulse"></i></small>
<small v-else-if="!checkVote(katsu.reply.poll)" class="color-wh bgcolor-disable button flex wrap">Vote</small>
<small v-else class="color-wh bgcolor-pk button flex wrap" v-on:click="actVote(katsu.reply);">Vote</small>
</div>
</div>
<div>
<small v-if="katsu.reply.poll.expired">最終結果 計{{katsu.reply.poll.votes_count}}票</small>
<small v-else>投票中 現在{{katsu.reply.poll.votes_count}}票 ({{formatDate(katsu.reply.poll.expires_at)}}まで)</small>
</div>
</div>
<div v-if="0 != katsu.reply.media_attachments" class="media-wrapper bgcolor-gray hidden flex">
<a v-for="media in katsu.reply.media_attachments" @click="modal_media = media;showMedia = true;">
<video v-if="'gifv' == media.type && '2' == optAutoPlay" :src="https://sumire.work/kktjs/media.url" class="media" playsinline muted autoplay loop></video>
<img v-if="('gifv' != media.type || ('gifv' == media.type && '1' == optAutoPlay))" :src="https://sumire.work/kktjs/checkMedia(media.preview_url,%20media.remote_url)" :alt="media.description" :title="media.description" class="media" onerror="this.src=IMG_DUMMY">
<i v-if="'video' == media.type || ('gifv' == media.type && '1' == optAutoPlay)" class="fa fa-fw fa-play-circle-o color-pk"></i>
</a>
</div>
<div v-if="0 != katsu.reply.media_attachments" class="media-wrapper control">
<i v-on:click="updateMediaWrapper(reply, false);" class="fa fa-fw fa-eye-slash bgcolor-wh"></i>
</div>
<div v-if="((( optAllNsfw || katsu.reply.sensitive ) && !katsu.reply.media_opened ) || false === katsu.reply.media_opened ) && 0 != katsu.reply.media_attachments" class="media-wrapper bluesheet" v-on:click="updateMediaWrapper(reply, true);">
<h4 v-if="katsu.reply.sensitive">Sensitive contents</h4>
<h4 v-else>Media contents</h4>
<small>Click to view</small>
</div>
<div class="action-bar flex end">
<div class="hidden">
<i class="fa fa-fw fa-paperclip color-disable"></i>
<small class="time">{{formatDate(katsu.reply.created_at)}}</small>
</div>
<i v-on:click="addContent(katsu.reply.url); katsu['in_reply_to_id'] = ''; katsu.reply = [];" class="fa fa-fw fa-arrow-circle-down"></i>
<i v-on:click="katsu['in_reply_to_id'] = ''; katsu.reply = [];" class="fa fa-fw fa-times"></i>
</div>
</div>
</div>
<div class="form-wrapper">
<div v-show="showFormSpoiler" class="form-option">
<div class="flex center">
<div v-on:click="addSpoiler('<コンプラ>');" class="color-wh bgcolor button full"><small>コンプラ</small></div>
<div v-on:click="addSpoiler('<ネタバレ>');" class="color-wh bgcolor button full"><small>ネタバレ</small></div>
<div v-on:click="addSpoiler('<R-18>');" class="color-wh bgcolor button full"><small>R-18</small></div>
</div>
<div class="flex center">
<small class="full text center">とりあえず<br>ダメそうならコレ</small>
<small class="full text center">アニメやゲームが<br>まだの人に配慮</small>
<small class="full text center">年齢制限が必要な<br>描写を含む内容</small>
</div>
<div class="action-bar flex end">
<div class="spoiler-left">
<i v-if="'' == katsu_spoiler_text" v-on:click="restoreSpoiler();" class="fa fa-fw fa-exclamation-triangle color-disable"></i>
<i v-else v-on:click="disableSpoiler();" class="fa fa-fw fa-exclamation-triangle"></i>
<i v-on:click="contentExchange();" class="fa fa-fw fa-exchange"></i>
</div>
<textarea type="text" id="katsu_spoiler" v-restore-s class="spoiler-input border-lite" placeholder="Content warning" @keydown="actKatsuShortCut();" onKeyup="autogrow(this)"></textarea>
</div>
</div>
<div class="flex center">
<div class="form-option full">
<textarea v-focus type="text" id="katsu_content" v-restore-c class="content-input border-lite" placeholder="What is on your mind?" @keydown="actKatsuShortCut();" onkeyup="autogrow(this)"></textarea>
</div>
</div>
<div v-show="showFormVote" class="form-option">
<div class="select-container vote bgcolor-wh flex center">
<div class="">
<span>1.</span><input type="text" v-restore-vote0 class="underline-dash" id="vote_title_0" onKeyup="inputVote(this, 0);"><br>
<span>2.</span><input type="text" v-restore-vote1 class="underline-dash" id="vote_title_1" onKeyup="inputVote(this, 1);"><br>
<span>3.</span><input type="text" v-restore-vote2 class="underline-dash" id="vote_title_2" onKeyup="inputVote(this, 2);"><br>
<span>4.</span><input type="text" v-restore-vote3 class="underline-dash" id="vote_title_3" onKeyup="inputVote(this, 3);"><br>
</div>
<small v-on:click="toggleFormVote();" class="color-wh bgcolor button">Remove</small>
</div>
<div class="flex end action-bar">
<span>複数回答アンケートに設定</span>
<div v-if="true === katsu['poll'].multiple" v-on:click="katsu['poll'].multiple = false;" class="button color-wh bgcolor-pk">ON</div>
<div v-else v-on:click="katsu['poll'].multiple = true;" class="button color-wh bgcolor">OFF</div>
</div>
<div class="flex end action-bar">
<span>投票期間</span>
<div class="select-wrapper underline-dash">
<select class="button mini color bgcolor-wh" v-model="katsu.poll_work.extime[0]" v-on:change="runExtime">
<option v-for="index in 29" :value="index-1">{{ index-1 }}</option>
</select>
</div>
日
<div class="select-wrapper underline-dash">
<select class="button mini color bgcolor-wh" v-model="katsu.poll_work.extime[1]" v-on:change="runExtime">
<option v-for="index in 24" :value="index-1">{{ index-1 }}</option>
</select>
</div>
時間
<div class="select-wrapper underline-dash">
<select class="button mini color bgcolor-wh" v-model="katsu.poll_work.extime[2]" v-on:change="runExtime">
<option v-for="index in 60" :value="index-1">{{ index-1 }}</option>
</select>
</div>
分
</div>
</div>
<div v-if="showFormDraft" class="form-option bgcolor-gray">
<div v-if="5 > content_text_drafts.length" class="action-bar flex end draft">
<i v-if="0 == contentLength()" class="fa fa-fw fa-floppy-o color-disable"></i>
<i v-else v-on:click="contentToDraft();" class="fa fa-fw fa-floppy-o"></i>
<span v-if="0 == contentLength()" class="full text center">(入力ショートカットに登録)</span>
<span v-else class="full text center">(入力ショートカットに登録)</span>
</div>
<div v-for="(draft, index) in content_text_drafts" class="action-bar flex end draft">
<i v-on:click="draftToContent(index, false);" class="fa fa-fw fa-copy"></i>
<i v-on:click="draftToContent(index, true);" class="fa fa-fw fa-arrow-up"></i>
<span class="full text center hidden" v-html="formatEmojiDraft(draft, user.emojis)"></span>
</div>
</div>
<div v-if="showFormFileImporter" class="form-option">
<div class="flex">
<span class="color-wh bgcolor-disable full button">Drop to upload</span>
</div>
</div>
<div v-if="0 != katsu['media_previews'].length" class="form-option">
<div class="media-wrapper bgcolor-gray hidden flex">
<a v-for="(media, index) in katsu['media_previews']" @click="modal_media = media;showMedia = true;">
<img v-if="null != katsu['media_attachments'][index] && ('image' == katsu['media_attachments'][index].type || 'image' == katsu['media_previews'][index].type)" :src="https://sumire.work/kktjs/katsu['media_previews'][index].url" class="media">
<img v-else-if="'image' == katsu['media_previews'][index].type" :src="https://sumire.work/kktjs/media.url" class="media gray">
<img v-else-if="null != katsu['media_attachments'][index] && ('video' == katsu['media_attachments'][index].type || 'gifv' == katsu['media_attachments'][index].type)" :src="https://sumire.work/kktjs/katsu['media_attachments'][index].preview_url" class="media">
<img v-else-if="'video' == katsu['media_previews'][index].type || 'gifv' == katsu['media_previews'][index].type" :src="https://sumire.work/kktjs/media.preview_url" class="media gray">
<i v-if="(null != katsu['media_attachments'][index] && ('video' == katsu['media_attachments'][index].type)) || ('video' == katsu['media_previews'][index].type)" class="fa fa-fw fa-play-circle-o color-pk"></i>
</a>
</div>
<div class="flex center">
<small v-for="(media, index) in katsu['media_previews']" v-on:click="removeMedia(index)" class="color-wh bgcolor-pk button full" :class="{ 'bgcolor-disable': null == katsu['media_attachments'][index] }">
<span>Remove</span>
</small>
</div>
<div class="media-stats hidden flex">
<div v-for="(media, index) in katsu['media_previews']" class="full">
<small v-if="null != katsu['media_attachments'][index]"><i class="fa fa-fw fa-check"></i><span v-if="katsu['media_previews'][index].converted">Convert</span><span v-else>Ok</span></small>

<small v-else><i class="fa fa-fw fa-spinner fa-pulse"></i>Upload</small>
</div>
</div>
<div class="flex end action-bar">
<span>メディアを隠す(NSFW)</span>
<div v-if="true === katsu['nsfw']" v-on:click="katsu['nsfw'] = false;" class="button color-wh bgcolor-pk">ON</div>
<div v-else v-on:click="katsu['nsfw'] = true;" class="button color-wh bgcolor">OFF</div>
</div>
</div>
<div v-if="showFormVisible" class="form-option">
<div class="flex center">
<div v-on:click="katsu['visibility'] = 'public';" class="color-wh bgcolor button tall full flex wrap" :class="{ 'bgcolor-pk': 'unlisted' != katsu['visibility'] && 'private' != katsu['visibility'] && 'direct' != katsu['visibility'] }"><i class="fa fa-fw fa-globe"></i><small>public</small></div>
<div v-on:click="katsu['visibility'] = 'unlisted';" class="color-wh bgcolor button tall full flex wrap" :class="{ 'bgcolor-pk': 'unlisted' == katsu['visibility'] }"><i class="fa fa-fw fa-unlock-alt"></i><small>unlist</small></div>
<div v-on:click="katsu['visibility'] = 'private';" class="color-wh bgcolor button tall full flex wrap" :class="{ 'bgcolor-pk': 'private' == katsu['visibility'] }"><i class="fa fa-fw fa-lock"></i><small>private</small></div>
<div v-on:click="katsu['visibility'] = 'direct';" class="color-wh bgcolor button tall full flex wrap" :class="{ 'bgcolor-pk': 'direct' == katsu['visibility'] }"><i class="fa fa-fw fa-envelope"></i><small>direct</small></div>
</div>
<div class="flex center">
<small class="full text center">全体に公開</small>
<small class="full text center">ローカルTL<br>に流さない</small>
<small class="full text center">フォロワー<br>だけに公開</small>
<small class="full text center">宛先の人<br>だけに公開</small>
</div>
</div>
<div class="action-bar flex wrap form-option underline-dash">
<div class="color bgcolor-in">
<label v-if="4 > katsu['media_previews'].length && katsu['media_previews'].length == katsu['media_attachments'].length && !showFormVote" for="uploader"><i class="fa fa-fw fa-camera"></i></label>
<i v-else class="fa fa-fw fa-camera color-disable"></i>
<i v-if="0 == katsu['media_previews'].length && 0 == katsu['media_attachments'].length" v-on:click="toggleFormVote();" class="fa fa-fw fa-tasks"></i>
<i v-else class="fa fa-fw fa-tasks color-disable"></i>
<i class="fa fa-fw fa-smile-o" @click="showEmojiPicker = true; openEmoji();"></i>
<i v-on:click="toggleFormDraft();" class="fa fa-fw fa-th-list"></i>
<i v-if="'direct' == katsu['visibility']" v-on:click="toggleFormVisible();" class="fa fa-fw fa-envelope"></i>
<i v-else-if="'private' == katsu['visibility']" v-on:click="toggleFormVisible();" class="fa fa-fw fa-lock"></i>
<i v-else-if="'unlisted' == katsu['visibility']" v-on:click="toggleFormVisible();" class="fa fa-fw fa-unlock-alt"></i>
<i v-else v-on:click="toggleFormVisible();" class="fa fa-fw fa-globe"></i>
<i v-on:click="toggleFormSpoiler();" class="fa fa-fw fa-exclamation-triangle"></i>
</div>
<div class="flex end katsu-ctrl">
<div class="katsu-count">{{500 - spoilerLength() - contentLength()}}</div>
<div v-if="katsu.req_katsu" class="color-wh bgcolor-disable button micro"><i class="fa fa-fw fa-spinner fa-pulse"></i></div>
<div v-else-if="checkKatsu()" v-on:click="actKatsu(katsu);" class="color-wh bgcolor-gr button">KATSU!</div>
<div v-else class="color-wh bgcolor-disable button">KATSU!</div>
</div>
</div>
<div class="action-bar form-option">
<img id="img" src="https://sumire.work/kktjs/" alt="">
<div class="flex end action-bar">
<span>🔥 お知らせ 🔥</span>
<small>20180126(v1.2.7)</small>
</div>
<span>新しい機能に向けてメニューと操作を追加したよ</span><br>
<span>設定アイコンは、リスト機能にする予定だから、</span><br>
<span>新しいアイコンや、スワイプで呼び出してね。</span><br>
<span>実況カラムみたいな大きな更新が多いから、</span><br>
<span>慎重に進めてていくね。</span><br>
</div>
</div>
</div>
</div>

<div v-if="showSetting" class="column scrollable bgcolor-wh" v-on:wheel="handleWheel">
<div class="status-list">
<div class="column-header">
<div class="flex end action-bar">
<span v-on:click="saveConf();" class="button mini fixed color-wh bgcolor-gr">Save</span>
<span v-on:click="openProfile();" class="button mini color-wh bgcolor-pk">Open Profile</span>
<span v-on:click="deleteToken();" class="button mini color-wh bgcolor-pk">Logout</span>
</div>
</div>
<div class="setting-wrapper">
<div v-if="showDebugVia" class="flex end action-bar">
<label v-if="app_wait_update" v-on:click="saveConf();location.reload();" class="button full color-wh bgcolor-pk">Save & Update kktjs</label>
<label v-else-if="fetch_lock.update" class="button full color-wh bgcolor-disable">Update Check</label>
<label v-else-if="sw_stat.enabled && sw_stat.controller" v-on:click="serviceWorkerUpdateCheck();" class="button full color-wh bgcolor-pk">Update Check</label>
<label v-else-if="sw_stat.enabled && false === sw_stat.controller" v-on:click="saveConf();location.reload();" class="button full color-wh bgcolor-pk">Save & Reload</label>
<label v-else v-on:click="saveConf();reloadForce();" class="button full color-wh bgcolor-pk">Save & Super Reload</label>
</div>
<h3 class="setting-header">📛📛📛 WebApp Setting 📛📛📛</h3>
<h3><i class="fa fa-fw fa-wrench"></i> Layout: 端末を選んでカラム数を決めてね</h3>
<div class="flex end action-bar"><span>{{ optColumns }} Column(s) </span></div>
<div class="flex end action-bar">
<label class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 1 == optColumns }" for="cone" v-on:click="optColumns = 1;runCustom();">Mobile</label>
<label class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 2 == optColumns }" for="ctwo" v-on:click="optColumns = 2;runCustom();">Tablet</label>
<label class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 3 == optColumns }" for="cthree" v-on:click="optColumns = 3;runCustom();">PC</label>
 </div>
<div class="flex end action-bar">
<span>優先カラム</span>
<label class="button color-wh bgcolor" :class="{ 'bgcolor-pk': 1 == optPtl }" for="tone" v-on:click="optPtl = 1;runCustom();">Local</label>
<label class="button color-wh bgcolor" :class="{ 'bgcolor-pk': 2 == optPtl }" for="ttwo" v-on:click="optPtl = 2;runCustom();">Home</label>
</div>
<div class="flex end action-bar">
<span>ワイドカラムモード</span>
<input type="checkbox" id="checkwide" class="invisible" v-model="optColumnWide">
<label v-if="optColumnWide" for="checkwide" class="button color-wh bgcolor-pk">ON</label>
<label v-else for="checkwide" class="button color-wh bgcolor">OFF</label>
</div>
<div class="flex end action-bar">
<span>カラム数の自動再設定</span>
<input type="checkbox" id="checkauto" class="invisible" v-model="optAutoLayout">
<label v-if="optColumnWide" for="checkwide" class="button color-wh bgcolor-disable">OFF</label>
<label v-else-if="optAutoLayout" for="checkauto" class="button color-wh bgcolor-pk">ON</label>
<label v-else for="checkauto" class="button color-wh bgcolor">OFF</label>
</div>
<h3><i class="fa fa-fw fa-photo"></i> View: 表示をアレンジしちゃおう </h3>
<div class="flex end action-bar">
<span>シンプルモード(内部情報を隠す)</span>
<input type="checkbox" id="simple" class="invisible" v-model="optSimple">
<label v-if="optSimple" for="simple" class="button color-wh bgcolor-pk">ON</label>
<label v-else for="simple" class="button color-wh bgcolor">OFF</label>
</div>
<div class="flex end action-bar">
<span>自動再生</span>
<input type="radio" class="invisible" id="vone" value="1" v-model="optAutoPlay">
<input type="radio" class="invisible" id="vtwo" value="2" v-model="optAutoPlay">

<label class="button color-wh bgcolor" :class="{ 'bgcolor-pk': 1 == optAutoPlay }" for="vone">OFF</label>
<label class="button color-wh bgcolor" :class="{ 'bgcolor-pk': 2 == optAutoPlay }" for="vtwo">GIF</label>

</div>
<div class="flex end action-bar">
<span>サムネイルのリサイズ</span>
<input type="radio" class="invisible" id="fone" value="" v-model="optMediaFit">
<input type="radio" class="invisible" id="fthree" value="minimum" v-model="optMediaFit">
<label class="button color-wh bgcolor" :class="{ 'bgcolor-pk': '' == optMediaFit }" for="fone">外接</label>
<label class="button color-wh bgcolor" :class="{ 'bgcolor-pk': 'minimum' == optMediaFit }" for="fthree">内接</label>
</div>
<div class="flex end action-bar">
<span>サムネイルの高さ変更</span>
<input type="radio" class="invisible" id="hone" value="" v-model="optMediaHeight">
<input type="radio" class="invisible" id="htwo" value="tall" v-model="optMediaHeight">
<label class="button color-wh bgcolor" :class="{ 'bgcolor-pk': '' == optMediaHeight }" for="hone">x1</label>
<label class="button color-wh bgcolor" :class="{ 'bgcolor-pk': 'tall' == optMediaHeight }" for="htwo">x2</label>
</div>
<div class="flex end action-bar">
<span>画像を全部NSFWに設定(TL用)</span>
<input type="checkbox" id="checknsfw" class="invisible" v-model="optAllNsfw">
<label v-if="optAllNsfw" for="checknsfw" class="button color-wh bgcolor-pk">ON</label>
<label v-else for="checknsfw" class="button color-wh bgcolor">OFF</label>
</div>
<h3><i class="fa fa-fw fa-file-text-o"></i> Form: カツ!データの入力について決めてね </h3>
<div class="flex end action-bar">
<span>書きかけカツ!の保存</span>
<input type="checkbox" id="keepform" class="invisible" v-model="optKeepForm">
<label v-if="optKeepForm" for="keepform" class="button color-wh bgcolor-pk">ON</label>
<label v-else for="keepform" class="button color-wh bgcolor">OFF</label>
</div>

<h3><i class="fa fa-fw fa-check-square-o"></i> Confirm: 確認が必要な動作を選択してね </h3>
<div class="flex end">
<small v-on:click="optConfirm['fav'] ^= 1;" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 1 == optConfirm['fav'] }">Fav</small>
<small v-on:click="optConfirm['unfav'] ^= 1;" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 1 == optConfirm['unfav'] }">UnFav</small>
<small v-on:click="optConfirm['reblog'] ^= 1;" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 1 == optConfirm['reblog'] }">Boost</small>
<small v-on:click="optConfirm['unreblog'] ^= 1;" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 1 == optConfirm['unreblog'] }">UnBoost</small>
</div>
<div class="flex end">
<small v-on:click="optConfirm['katsu'] ^= 1;" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 1 == optConfirm['katsu'] }">KATSU!</small>
<small v-on:click="optConfirm['delete'] ^= 1;" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 1 == optConfirm['delete'] }">Delete</small>
<small v-on:click="optConfirm['follow'] ^= 1;" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 1 == optConfirm['follow'] }">Follow</small>
<small v-on:click="optConfirm['unfollow'] ^= 1;" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 1 == optConfirm['unfollow'] }">Remove</small>
</div>
<div class="flex end">
<small v-on:click="optConfirm['mute'] ^= 1;" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 1 == optConfirm['mute'] }">Mute</small>
<small v-on:click="optConfirm['unmute'] ^= 1;" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 1 == optConfirm['unmute'] }">UnMute</small>
<small v-on:click="optConfirm['block'] ^= 1;" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 1 == optConfirm['block'] }">Block</small>
<small v-on:click="optConfirm['unblock'] ^= 1;" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 1 == optConfirm['unblock'] }">UnBlock</small>
</div>
<h3><i class="fa fa-fw fa-paint-brush"></i> Theme: 見た目のカスタマイズができるよ </h3>
<div class="flex end action-bar"><span>Tops, Shoes</span></div>
<div class="flex end">
 <label v-on:click="optThemeTops = 'tp_diadark';" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 'tp_diadark' == optThemeTops }">Mastodon Dark Diamonds</label>
</div>
<div class="flex end">
<label v-on:click="optThemeTops = '';" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': '' == optThemeTops }">kktCSS Magenta Diamonds</label>
</div>
<div class="flex end">
<label v-on:click="optThemeTops = 'tp_diablue';" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 'tp_diablue' == optThemeTops }">bbv DeepBlue Diamonds</label>
</div>
<div class="flex end">
<label v-on:click="optThemeTops = 'tp_diagreen';" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 'tp_diagreen' == optThemeTops }">Pirouette Green Diamonds</label>
</div>
<div class="flex end action-bar"><span>Bottoms</span></div>
<div class="flex end">
<label v-on:click="optThemeBottoms = 'bm_diadark';" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 'bm_diadark' == optThemeBottoms }">Mastodon Dark Diamonds</label>
</div>
<div class="flex end">
<label v-on:click="optThemeBottoms = '';" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': '' == optThemeBottoms }">kktCSS Green Diamonds</label>
</div>
<div class="flex end">
<label v-on:click="optThemeBottoms = 'bm_diawhite';" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 'bm_diawhite' == optThemeBottoms }">bbv SandyWhite Diamonds</label>
</div>
<div class="flex end">
<label v-on:click="optThemeBottoms = 'bm_diaorange';" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': 'bm_diaorange' == optThemeBottoms }">Pirouette Orange Diamonds</label>
</div>
<h3><i class="fa fa-fw fa-bell"></i> Notif: 通知の内容を選んでね </h3>
<div class="flex end wrap action-bar">
<span>通知音</span>
<input type="radio" class="invisible" id="sone" value="off" v-model="optThemeSound">
<input type="radio" class="invisible" id="stwo" value="" v-model="optThemeSound">

<label class="button color-wh bgcolor" :class="{ 'bgcolor-pk': 'off' == optThemeSound }" for="sone">OFF</label>
<label class="button color-wh bgcolor" :class="{ 'bgcolor-pk': 'off' != optThemeSound }" for="stwo">ON</label>
</div>
<div class="flex end">
<label v-on:click="playSound('sound');" class="button full color-wh bgcolor" :class="{ 'bgcolor-pk': '' == optThemeSound }" for="stwo">Mastodon Boop</label>
</div>
<div class="flex end">
<label class="button full color-wh bgcolor-disable" for="">Excellent Ringtone</label>
</div>
<div class="flex end action-bar">
<div>トースト通知</div>
<input type="checkbox" id="shortnotif" class="invisible" v-model="optShortNotif">
<label v-if="optShortNotif" for="shortnotif" class="button color-wh bgcolor-pk">ON</label>
<label v-else for="shortnotif" class="button color-wh bgcolor">OFF</label>
</div>
<div class="flex end action-bar">
<span>デスクトップ通知(PCのみ)</span>
<input type="checkbox" id="pushnotif" class="invisible" v-model="optPushNotif">
<label v-if="optPushNotif" for="pushnotif" class="button color-wh bgcolor-pk">ON</label>
<label v-else for="pushnotif" class="button color-wh bgcolor">OFF</label>
</div>
<h3><i class="fa fa-fw fa-bomb"></i> Expert: 更に表示をアレンジしちゃおう </h3>
<div class="flex end action-bar">
<span>スリム化</span>
<input type="radio" class="invisible" id="tone" value="" v-model="optKatsuTrim">
<input type="radio" class="invisible" id="ttwo" value="no-margin" v-model="optKatsuTrim">
<label class="button color-wh bgcolor" :class="{ 'bgcolor-pk': '' == optKatsuTrim }" for="tone">OFF</label>
<label class="button color-wh bgcolor" :class="{ 'bgcolor-pk': 'no-margin' == optKatsuTrim }" for="ttwo">Margin</label>
<label class="button color-wh bgcolor-disable" for="">1 Line</label>
</div>
<div class="flex end action-bar">
<span>カツ!フィルター(TL用)</span>
<small v-if="'word' == optKatsuFilter">カンマ区切りで入力してね<br>(ex. テスト,てすと,test)(10個まで)</small>
<small v-else-if="'regex' == optKatsuFilter">正規表現にも対応してるよ<br>(ex. [\s\S]{140})(140字以上のカツ!)</small>
</div>
<div class="flex end action-bar">
<small>{{result_text_tmp}}</small>
<label class="button color-wh bgcolor" :class="{ 'bgcolor-pk': '' == optKatsuFilter }" v-on:click="optKatsuFilter = '';updateFilterAll();">OFF</label>
<label class="button color-wh bgcolor" :class="{ 'bgcolor-pk': 'word' == optKatsuFilter }" v-on:click="optKatsuFilter = 'word';">Words</label>
<label class="button color-wh bgcolor" :class="{ 'bgcolor-pk': 'regex' == optKatsuFilter }" v-on:click="optKatsuFilter = 'regex';">Regex</label>
</div>
<div v-if="'' != optKatsuFilter" class="search-container action-bar bgcolor-wh flex center">
<input type="text" v-restore-kfr class="underline-dash" @keyup.enter="updateFilterAll();" onKeyup="inputKatsuFilterRaw(this)"><br>
<label v-on:click="updateFilterAll();" class="button color-wh bgcolor-gr">Apply</label>
</div>
<div v-if="'regex' == optKatsuFilter" class="flex end action-bar">
<small>new regexp('設定値').test('注意文'+'本文(HTMLなし)')</small>
</div>
<div class="flex end action-bar"><span>本文や画像を開いた状態で表示する(取り扱い注意)</span></div>
<div class="flex end action-bar">
<dummy></dummy>
<label class="button color-wh bgcolor" :class="{ 'bgcolor-pk': '' == optAllOpen }" v-on:click="optAllOpen = ''; updateWrapperAll();">OFF</label>
<label class="button color-wh bgcolor" :class="{ 'bgcolor-pk': 'media' == optAllOpen }" v-on:click="optAllOpen = 'media'; updateWrapperAll();">Media</label>
<label class="button color-wh bgcolor" :class="{ 'bgcolor-pk': 'katsu' == optAllOpen }" v-on:click="optAllOpen = 'katsu'; updateWrapperAll();">Katsu</label>
<label class="button color-wh bgcolor" :class="{ 'bgcolor-pk': 'both' == optAllOpen }" v-on:click="optAllOpen = 'both'; updateWrapperAll();">Both</label>
</div>
<div class="flex end action-bar">

<label v-on:click="saveConf();" class="button full double color-wh bgcolor-gr">Save</label>
</div>
<div class="flex end action-bar">
<label v-if="app_wait_update" v-on:click="saveConf();location.reload();" class="button full color-wh bgcolor-pk">Save & Update kktjs</label>
<label v-else-if="fetch_lock.update" class="button full color-wh bgcolor-disable">Update Check</label>
<label v-else-if="sw_stat.enabled && sw_stat.controller" v-on:click="serviceWorkerUpdateCheck();" class="button full color-wh bgcolor-pk">Update Check</label>
<label v-else-if="sw_stat.enabled && false === sw_stat.controller" v-on:click="saveConf();location.reload();" class="button full color-wh bgcolor-pk">Save & Reload</label>
<label v-else v-on:click="saveConf();reloadForce();" class="button full color-wh bgcolor-pk">Save & Super Reload</label>
</div>
<br>

<h3 class="setting-header">📛📛📛 Account Setting 📛📛📛</h3>
<div class="flex end action-bar">
<label v-on:click="openProfile();" class="button full color-wh bgcolor-pk">Open Profile</label>
</div>
<div class="flex end action-bar">
<label v-on:click="deleteToken();" class="button full color-wh bgcolor-pk">Logout</label>
</div>
<br>
<h3 class="setting-header">🔥🔥🔥 Instance Data 🔥🔥🔥</h3>
<div class="flex end action-bar">
<label v-on:click="openMastodon();" class="button full color-wh bgcolor-pk">Open Mastodon</label>
</div>
<div class="flex end action-bar">
<label v-on:click="openAbout();" class="button full color-wh bgcolor-pk">About</label>
</div>
<div class="flex end action-bar">
<label v-on:click="openPolicy();" class="button full color-wh bgcolor-pk">Privacy Policy</label>
</div>
<div class="flex end action-bar">
<label v-on:click="openWiki();" class="button full color-wh bgcolor-pk">Mastodon Wiki</label>
</div>
<div class="flex end action-bar">
<label v-on:click="openDirectry();" class="button full color-wh bgcolor-pk">Profile Directory</label>
</div>
<h3 class="setting-header">🍨🍨🍨 アプリ推奨環境 🍨🍨🍨</h3>
<small>
Windows chrome/vivaldi/firefox<br>
macOS chrome/safari(v11.1以上)/firefox<br>
Android(4.4以上) chrome(58以上)+WebApp化(ホーム画面に追加)<br>
iOS(11.3以上) safari+WebApp化(ホーム画面に追加)<br>
</small><br>
<h4>Androidで表示がおかしい時は、chromeを更新してみて</h4>
<h4>バグは <span v-on:click="search_hashtag='kktjs';runMulti('Hashtag', search_hashtag);reopenWsMulti('Hashtag', search_hashtag);" class="color-pk">#kktjs</span> を付けてカツ!してくれると嬉しいかな。</h4>
<h4>私(<span v-on:click="runAcct(17);" class="color-pk">@sumire</span>)に直接送ってくれても大丈夫だよ。</h4>
<h3 class="setting-header">🍨🍨🍨アイコンについて🍨🍨🍨</h3>
<img class="appicon" src="./img/touch/apple-touch-icon.png" alt=""><br>
<small>
kktjs WebApp Icon is a derivative of <a href="https://github.com/southrop/kirakiratter_design/">"Kirakiratter Design Logo"</a> by ロップ / <a href="https://github.com/southrop/kirakiratter_design/blob/master/logo/LICENSE">CC BY 4.0</a>. <br>
kktjs WebApp Icon is licensed under <a href="https://creativecommons.org/licenses/by/4.0/deed.ja">CC BY 4.0</a> by Sumire.<br>
</small>
<h3 class="setting-header">🍨🍨🍨 開発ステータス 🍨🍨🍨</h3>
<h3>バージョン</h3>
<small>kkt{{app_ver_top}}</small>
<h3>アプリで使える機能(v1.4)</h3>
<small>
ログイン/ログアウト/Webアプリ設定<br>
カツ!機能(メディア投稿,CW,NSFW,絵文字入力,アンケート)<br>
ドラッグ＆ドロップでメディア投稿(PC)<br>
キーボードショートカット(カツ!/検索)<br>
Home/Local/通知/タグ TLのカツ!ストリーム取得/削除<br>
Home/Local/通知/Fav済/ユーザー/タグ のカツ!一覧取得<br>
Home/Local/通知/Fav済/ユーザー/タグ を遡って取得<br>
リストの一覧を取得<br>
リスト TLのカツ!ストリーム取得/削除<br>
リスト TLのカツ!一覧取得<br>
リスト TLのカツ!を遡って取得<br>
リストの追加/削除<br>
リストに登録済みのアカウント一覧 取得<br>
リストにアカウントを登録/解除<br>
カツ!のリンク先情報(OGP)展開<br>
Home/Local TLのカツ!フィルタ(TLで展開可能)<br>
アカウント検索機能<br>
カスタム絵文字の表示<br>
カツ!の CW/NSFW,画像/ビデオ/gifv(ループ再生) 表示<br>
カツ!詳細のお気に入り/ブーストしたアカウント一覧 取得<br>
ユーザー情報/フォロー情報/カツ!詳細 取得<br>
ピン留めカツ! の取得<br>
フォロー/フォロワー 一覧取得<br>
フォロー/フォロワー 一覧を遡って取得<br>
フォローリクエスト中のアカウント一覧 取得<br>
フォローリクエスト中のアカウントの 認証/拒否<br>
フォローリクエスト数を表示<br>
検索した結果(アカウント/タグ) 取得<br>
お気に入り/ブースト/フォロー の登録/解除<br>
カツ!/お気に入り/ブースト/フォロー の確認ウィンドウ<br>
ミュート/ブロック の登録/解除、確認ウィンドウ<br>
リストにアカウントを登録/解除、確認ウィンドウ<br>
ピン留め の登録/解除、確認ウィンドウ<br>
カツ!アンケートへの 投票<br>
カツ!の 削除<br>
カツ!の 通報<br>
プロファイル編集(名前のみ)<br>
ヘッダアイコンのカラム移動機能<br>
デスクトップ通知(PC)と、通知音再生<br>
カツ!の メンション/ハッシュタグ/カツ!URL を開く<br>
通信エラーの表示<br>
</small><br>
<h3>拡張機能(v1.4)</h3>
<small>
カラーテーマ機能<br>
ショートカットメニュー<br>
ハッシュタグ TLのショートカット登録機能<br>
1,2,3カラム表示+Home/Local TLのワイドカラム化<br>
画面のリサイズ/回転時に最適なカラム数に切り替え<br>
Home/Local TLの画像や映像を全て隠すオプション<br>
Home/Local TLに 最新/上底/下底スクロールボタンを追加<br>
Home/Local TLに カツ!表示数目標を設定(200カツ!)<br>
リスト用検索に未フォローアカウント表示&フォロワー一覧<br>
リストのリネーム機能<br>
リスト数50、リスト名の文字数300を上限に設定<br>
Local TLにしおりをはさむ機能(削除カツ!未対応)<br>
通知の未読数を表示<br>
タグ/リスト TLのカツ!フィルタ(TLで展開可能)<br>
フォロー/フォロワー一覧 をユーザー情報内で表示<br>
カツ!詳細/ユーザー情報 リンクのボタン化<br>
カツ!に含まれるメディアのリンクボタン追加<br>
カツ!の 下書きの保存<br>
カツ!の 本文と注意文の入れ替え機能<br>
カツ!の 入力ショートカット(タグや定型文を登録可能)<br>
アカウントにリプを送るとき、デフォルトをunlistに変更<br>
複数回答できるカツ!アンケートに対応<br>
検索機能とアカウント検索機能の統合<br>
EmojiOne v2.2.7 採用<br>
nametag の 📛 tofu on fire 📛 化 (EmojiOne加工)<br>
プロファイル(名前)のかんたんUnicodeハック機能を追加<br>
スワイプでカラムを呼び出す機能(カラムは固定)<br>
戻るボタンでアプリを閉じない(Android)<br>
ヘッダに お気に入り、Webアプリ設定アイコンを追加<br>
通知音の切替機能<br>
通信エラーメッセージ<br>
Local/連合 TLの切り替え機能<br>
タグ/リスト TLの切り替え機能<br>
webpファイルのアップロード対応<br>
</small><br>
<h3>アプリにまだない機能(v1.4)</h3>
<small>
リンク先情報(OGP)の埋め込みhtml展開<br>
アカウントプロファイルの編集(名前以外)<br>
カツ!入力欄のサジェスト機能<br>
カスタム絵文字入力<br>
[完成済]ダイレクトメッセージストリーム取得/削除<br>
シェア機能(Web Share API対応)<br>
ストリーミング再接続のカツ!漏れ確認<br>
カツ!を削除して下書きに戻す機能<br>
アカウントのブースト非表示<br>
ドメインのミュート機能<br>
キーボードショートカット(アプリ操作)<br>
インスタンスのミュート<br>
[2.7.0 API]予約カツ!機能<br>
[2.9.1]音声ファイルのアップロード対応<br>
</small><br>
<h3>Mastodon/kktで対応待ちの機能(v1.4)</h3>
<small>
[mst v?]検索した結果(全体のカツ!) 取得<br>
</small><br>
<h3>追加されるかもしれない拡張機能</h3>
<small>
画像/動画を再圧縮してアップロード<br>
インスタンスの情報 取得<br>
連合インスタンス一覧 取得<br>
連合インスタンスの情報 取得<br>
Push通知(Service Worker)<br>
カツ!を 翻訳<br>
通知 TLのインスタンスフィルター<br>
HOME/Local TLの特定ワードを含むカツ!をNSFWで包む機能<br>
カツ!した当時のLocal TLへタイムスリップする機能<br>
</small>
<h3>スマートフォンアプリで追加されるかもしれない拡張機能</h3>
<small>
PUSH通知(iOS)<br>
</small>
</div>
</div>
</div>
</div>
<div v-if="'web' == app_mode" class="app-footer">
<svg xmlns="http://www.w3.org/2000/svg" height="100%" width="100%">
<defs>
<pattern id="ptbottoms" patternUnits="userSpaceOnUse" height="24" width="18">
<rect class="pkl" height="24" width="18" y="0" x="0" />
<path class="pkd" d="m0 12 9-12 9 12-9 12z" />
</pattern>
</defs>
<rect width="100%" height="100%" style="fill: url(./index.html#ptbottoms)" />
</svg>
</div>
<div v-if="'web' == app_mode && ua != 'pc'" class="app-footer flex control">
<div class="margin"></div>
<div class="icon-wrapper flex">
<i class="fa fa-fw fa-bars" v-on:click="toggleLink();"></i>
<i class="fa fa-fw invisible"></i>
</div>
 <div class="margin"></div>
</div>
<div class="bgapp">
<svg xmlns="http://www.w3.org/2000/svg" height="100%" width="100%">
<defs>
<pattern id="ptshoes" patternUnits="userSpaceOnUse" height="114" width="80">
<rect class="grl" height="114" width="80" y="0" x="0" />
<path class="grd" d="m0 57 40-57 40 57-40 57z" />
</pattern>
</defs>
<rect width="100%" height="100%" style="fill: url(./index.html#ptshoes)" />
</svg>
<input type="file" accept=".jpg,.jpeg,.png,.gif,.bmp,.dib,.webp,.webm,.mp4,.m4v,image/jpeg,image/png,image/gif,image/bmp,image/webp,video/webm,video/mp4" name="file" id="uploader" class="invisible" onChange="importclick(this.files)">
<button id="soundoff" class="invisible"></button>
<button id="sound" class="invisible"></button>
<button id="soundex" class="invisible"></button>
<img src="./img/missing_header.png" alt="">
</div>
</div>

<script src="./js/vue.min.js"></script>
<script src="./js/addtohomescreen.min.js"></script>
<script src="./js/inobounce.min.js"></script>
<script src="./js/emojione.js"></script>
<script src="https://sumire.work/kktjs/js/lodash.min.js"></script>
<script src="./js/Pv=0926_main.js"></script>
<script src="./js/picker.js" async></script>
<script>
      if('serviceWorker' in navigator){
        navigator.serviceWorker.register('sw.js', {scope: './'}).then(reg => {
          reg.addEventListener('updatefound', () => {
            // console.log("sw reg: update found");
            reg.update();
          });
        });
        navigator.serviceWorker.addEventListener('controllerchange', () => {
          console.log("sw reg: updated.");
          app._data.fetch_lock.update = false;
          app._data.result_text = "kktjs new version released.";
          app._data.app_wait_update = true;
          // location.reload();
        });
      }else{
        console.warn('Service Worker is not supported');
      }
    </script>
</body>
</html>